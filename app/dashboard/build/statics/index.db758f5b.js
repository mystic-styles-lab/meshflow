import{i as z0,B as St,a as wt,b as _t,j as N0,d as K,U as P0,z as yt,r as Ct,f as vt,Q as kt,e as Et,$ as Ao,c as c0,g as A,h as Dt,C as zt,k as Rt,u as g0,l as V,m as r,S as le,n as e,o as w,H as S,V as I,T as i,s as Ft,p as x,q as nr,J as At,t as k,v as Io,A as Ye,w as Bo,x as To,M as he,y as de,D as xe,E as ce,F as ge,G as pe,I as qe,K as $0,L as Wo,N as lr,O as be,P as z,R as F,W as O0,X as G,Y as T,Z as se,_ as P,a0 as Pe,a1 as ve,a2 as vr,a3 as q,a4 as Me,a5 as Lo,a6 as ar,a7 as Ge,a8 as It,a9 as Uo,aa as Mo,ab as j0,ac as Lr,ad as No,ae as Gr,af as Ar,ag as Po,ah as Y,ai as Qr,aj as Sr,ak as wr,al as fe,am as _r,an as _e,ao as $o,ap as Bt,aq as Tt,ar as Wt,as as Lt,at as yr,au as Ne,av as ke,aw as H0,ax as Ut,ay as Mt,az as V0,aA as R0,aB as zr,aC as Nt,aD as Pt,aE as $t,aF as Ot,aG as jt,aH as we,aI as Rr,aJ as Oo,aK as jo,aL as Ho,aM as Vo,aN as Yo,aO as kr,aP as Y0,aQ as Jr,aR as Ur,aS as qo,aT as Ir,aU as Br,aV as F0,aW as Tr,aX as Ht,aY as Be,aZ as Te,a_ as We,a$ as Le,b0 as Ue,b1 as A0,b2 as Vt,b3 as Se,b4 as xr,b5 as Kr,b6 as Yt,b7 as qt,b8 as Gt,b9 as q0,ba as Qt,bb as Zr,bc as t0,bd as Go,be as Zt,bf as Xt,bg as Qo,bh as mr,bi as Jt,bj as Kt,bk as Fr,bl as oo,bm as Zo,bn as b0,bo as G0,bp as Wr,bq as p0,br as ir,bs as Xo,bt as ea,bu as Jo,bv as ra,bw as oa,bx as Ko,by as ta,bz as aa,bA as et,bB as rt,bC as ot,bD as ue,bE as h0,bF as qr,bG as to,bH as tt,bI as ia,bJ as la,bK as na,bL as Q0,bM as sa,bN as a0,bO as i0,bP as De,bQ as re,bR as l0,bS as J,bT as ao,bU as ua,bV as da,bW as ca,bX as at,bY as ga,bZ as ba,b_ as I0,b$ as pa,c0 as io,c1 as n0,c2 as s0,c3 as ha,c4 as xa,c5 as ma,c6 as fa,c7 as Sa,c8 as wa,c9 as _a,ca as ya,cb as Ca,cc as va,cd as ka,ce as Ea,cf as Da,cg as za,ch as Ra,ci as Fa,cj as Aa}from"./vendor.86cbfd6d.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))l(u);new MutationObserver(u=>{for(const s of u)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&l(d)}).observe(document,{childList:!0,subtree:!0});function a(u){const s={};return u.integrity&&(s.integrity=u.integrity),u.referrerpolicy&&(s.referrerPolicy=u.referrerpolicy),u.crossorigin==="use-credentials"?s.credentials="include":u.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(u){if(u.ep)return;u.ep=!0;const s=a(u);fetch(u.href,s)}})();z0.use(St).use(wt).use(_t).init({debug:{}.NODE_ENV==="development",returnNull:!1,fallbackLng:"en",interpolation:{escapeValue:!1},react:{useSuspense:!1},load:"languageOnly",detection:{caches:["localStorage","sessionStorage","cookie"]},backend:{loadPath:N0(["/dashboard/","statics/locales/{{lng}}.json"])}},function(o,t){K.locale(z0.language)});z0.on("languageChanged",o=>{K.locale(o)});P0("zh-cn",yt);P0("ru",Ct);P0("fa",vt);const B0=new kt,T0=o=>{const t=document.querySelector('meta[name="theme-color"]');t==null||t.setAttribute("content",o=="dark"?"#1A202C":"#3B81F6")},Ia=Et({shadows:{outline:"0 0 0 2px var(--chakra-colors-primary-200)"},fonts:{body:"Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif"},colors:{"light-border":"#d2d2d4",primary:{50:"#9cb7f2",100:"#88a9ef",200:"#749aec",300:"#618ce9",400:"#4d7de7",500:"#396fe4",600:"#3364cd",700:"#2e59b6",800:"#284ea0",900:"#224389"},gray:{750:"#222C3B"}},components:{Tooltip:{baseStyle:{bg:"rgba(30, 35, 50, 0.95)",color:"white",borderRadius:"12px",px:3,py:2,backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 4px 15px rgba(0, 0, 0, 0.3)",_light:{bg:"rgba(255, 255, 255, 0.95)",color:"gray.800",border:"1px solid rgba(0, 0, 0, 0.1)",boxShadow:"0 4px 15px rgba(0, 0, 0, 0.15)"}}},Menu:{baseStyle:{list:{bg:"rgba(30, 35, 50, 0.95)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"16px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)",py:2,_light:{bg:"rgba(255, 255, 255, 0.95)",border:"1px solid rgba(0, 0, 0, 0.1)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.15)"}},item:{bg:"transparent",color:"white",_hover:{bg:"rgba(255, 255, 255, 0.1)"},_light:{color:"gray.800",_hover:{bg:"rgba(0, 0, 0, 0.05)"}}}}},Modal:{baseStyle:{dialog:{bg:"rgba(30, 35, 50, 0.95)",backdropFilter:"blur(20px) saturate(180%)",borderRadius:"30px",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.37)",_light:{bg:"rgba(255, 255, 255, 0.95)",border:"1px solid rgba(0, 0, 0, 0.1)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.15)"}},overlay:{bg:"rgba(0, 0, 0, 0.5)",backdropFilter:"blur(4px)"},header:{borderBottom:"1px solid rgba(255, 255, 255, 0.08)",_light:{borderBottom:"1px solid rgba(0, 0, 0, 0.08)"}},footer:{borderTop:"1px solid rgba(255, 255, 255, 0.08)",_light:{borderTop:"1px solid rgba(0, 0, 0, 0.08)"}},closeButton:{bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"full",color:"white",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.1)",_hover:{bg:"rgba(255, 255, 255, 0.1)"},_light:{bg:"rgba(255, 255, 255, 0.7)",border:"1px solid rgba(0, 0, 0, 0.1)",color:"gray.600",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.08), inset 0 1px 0 rgba(255, 255, 255, 0.5)",_hover:{bg:"rgba(255, 255, 255, 0.9)"}}}}},Alert:{baseStyle:{container:{borderRadius:"20px",fontSize:"sm",bg:"rgba(30, 35, 50, 0.9)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 4px 15px rgba(0, 0, 0, 0.2)",_light:{bg:"rgba(255, 255, 255, 0.9)",border:"1px solid rgba(0, 0, 0, 0.1)",boxShadow:"0 4px 15px rgba(0, 0, 0, 0.1)"}}}},Switch:{baseStyle:{track:{bg:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.15)",boxShadow:"inset 0 1px 0 rgba(255, 255, 255, 0.05)",_light:{bg:"rgba(0, 0, 0, 0.08)",border:"1px solid rgba(0, 0, 0, 0.1)",boxShadow:"inset 0 1px 0 rgba(255, 255, 255, 0.3)"},_checked:{bg:"primary.500",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 0 10px rgba(99, 102, 241, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.15)"}},thumb:{bg:"white",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)"}}},Select:{baseStyle:{field:{bg:"rgba(255, 255, 255, 0.06)",border:"none",borderRadius:"16px",color:"white",backdropFilter:"blur(12px)",boxShadow:"inset 0 1px 0 rgba(255, 255, 255, 0.1), 0 4px 12px rgba(0, 0, 0, 0.15)",_light:{bg:"rgba(255, 255, 255, 0.7)",border:"none",color:"gray.800",boxShadow:"inset 0 1px 0 rgba(255, 255, 255, 0.5), 0 4px 12px rgba(0, 0, 0, 0.08)"},_hover:{bg:"rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.8)"}},_focus:{bg:"rgba(255, 255, 255, 0.1)",boxShadow:"inset 0 1px 0 rgba(255, 255, 255, 0.1), 0 4px 16px rgba(102, 126, 234, 0.25)",_light:{bg:"rgba(255, 255, 255, 0.85)",boxShadow:"inset 0 1px 0 rgba(255, 255, 255, 0.5), 0 4px 16px rgba(102, 126, 234, 0.2)"}}},icon:{color:"gray.400",_light:{color:"gray.500"}}}},FormHelperText:{baseStyle:{fontSize:"xs"}},Textarea:{baseStyle:{bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"20px",color:"white",boxShadow:"inset 0 1px 0 rgba(255, 255, 255, 0.05)",_light:{bg:"rgba(255, 255, 255, 0.7)",border:"1px solid rgba(0, 0, 0, 0.1)",color:"gray.800",boxShadow:"inset 0 1px 0 rgba(255, 255, 255, 0.5)"},_hover:{bg:"rgba(255, 255, 255, 0.08)",_light:{bg:"rgba(255, 255, 255, 0.8)"}},_placeholder:{color:"gray.400",_light:{color:"gray.500"}}}},FormLabel:{baseStyle:{fontSize:"sm",fontWeight:"medium",mb:"1",color:"gray.300",_dark:{color:"gray.300"},_light:{color:"gray.600"}}},Input:{baseStyle:{addon:{_dark:{borderColor:"gray.600",_placeholder:{color:"gray.500"}}},field:{_focusVisible:{boxShadow:"none",borderColor:"primary.200",outlineColor:"primary.200"},_dark:{borderColor:"gray.600",_disabled:{color:"gray.400",borderColor:"gray.500"},_placeholder:{color:"gray.500"}}}}},Table:{baseStyle:{table:{borderCollapse:"separate",borderSpacing:0},thead:{borderBottomColor:"rgba(255, 255, 255, 0.1)",_light:{borderBottomColor:"rgba(0, 0, 0, 0.1)"}},th:{background:"transparent",border:"none",borderBottom:"1px solid rgba(255, 255, 255, 0.1)",color:"rgba(255, 255, 255, 0.8)",_light:{background:"transparent",borderBottom:"1px solid rgba(0, 0, 0, 0.1)",color:"gray.700"},_dark:{borderColor:"rgba(255, 255, 255, 0.1)",background:"transparent"}},td:{transition:"all .1s ease-out",border:"none",borderBottom:"1px solid rgba(255, 255, 255, 0.05)",_light:{borderBottom:"1px solid rgba(0, 0, 0, 0.05)"},_dark:{borderColor:"rgba(255, 255, 255, 0.05)"}},tr:{"&.interactive":{cursor:"pointer",_hover:{"& > td":{bg:"rgba(255, 255, 255, 0.05)"},_light:{"& > td":{bg:"rgba(0, 0, 0, 0.03)"}}}},_last:{"& > td":{borderBottom:"none"}}}}}}});const Xr=()=>localStorage.getItem("token"),Ba=o=>{localStorage.setItem("token",o)},Ta=()=>{localStorage.removeItem("token")},it=Ao.create({baseURL:"/api/"}),lt=(o,t={})=>(Xr()&&(t.headers={...(t==null?void 0:t.headers)||{},Authorization:`Bearer ${Xr()}`}),it(o,t)),j=lt,Wa=Object.freeze(Object.defineProperty({__proto__:null,$fetch:it,fetcher:lt,fetch:j},Symbol.toStringTag,{value:"Module"})),Z0=c0(o=>({isLoading:!0,isPostLoading:!1,version:null,started:!1,logs_websocket:null,config:"",fetchCoreSettings:()=>{o({isLoading:!0}),Promise.all([j("/core").then(({version:t,started:a,logs_websocket:l})=>o({version:t,started:a,logs_websocket:l})),j("/core/config").then(t=>o({config:t}))]).finally(()=>o({isLoading:!1}))},updateConfig:t=>(o({isPostLoading:!0}),j("/core/config",{method:"PUT",body:t}).finally(()=>{o({isPostLoading:!1})})),restartCore:()=>j("/core/restart",{method:"POST"})}));function Re(o,t=2,a=!1){if(!+o)return"0 B";const l=1024,u=t<0?0:t,s=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],d=Math.floor(Math.log(o)/Math.log(l));return a?[parseFloat((o/Math.pow(l,d)).toFixed(u)),s[d]]:`${parseFloat((o/Math.pow(l,d)).toFixed(u))} ${s[d]}`}const lo=o=>{if(o!==null)return o.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},La=A(Dt,{baseStyle:{w:7,h:7}}),Ua=A(zt,{baseStyle:{w:7,h:7}}),Ma=A(Rt,{baseStyle:{w:7,h:7}}),w0=({title:o,value:t,subValue:a,icon:l})=>e(w,{bg:"rgba(255, 255, 255, 0.03)",backdropFilter:"blur(20px) saturate(180%)",p:4,borderRadius:"24px",border:"1px solid rgba(255, 255, 255, 0.08)",boxShadow:"0 8px 32px 0 rgba(31, 38, 135, 0.15), inset 0 1px 2px rgba(255, 255, 255, 0.1)",transition:"all 0.3s ease",_light:{bg:"rgba(255, 255, 255, 0.7)",border:"1px solid rgba(0, 0, 0, 0.08)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.08), inset 0 1px 2px rgba(255, 255, 255, 0.9)"},children:r(S,{spacing:3,align:"center",children:[l&&e(w,{color:"rgba(255, 255, 255, 0.7)",_light:{color:"rgba(0, 0, 0, 0.6)"},children:l}),r(I,{align:"start",spacing:0,children:[e(i,{fontSize:"xs",color:"rgba(255, 255, 255, 0.5)",_light:{color:"rgba(0, 0, 0, 0.5)"},fontWeight:"medium",textTransform:"uppercase",letterSpacing:"wider",children:o}),r(S,{spacing:2,align:"baseline",children:[e(i,{fontSize:"2xl",fontWeight:"bold",color:"white",_light:{color:"gray.900"},children:t}),a&&e(i,{fontSize:"xs",color:"rgba(255, 255, 255, 0.5)",_light:{color:"rgba(0, 0, 0, 0.5)"},children:a})]})]})]})}),W0="statistics-query-key",Na=o=>{const{version:t}=$(),{data:a}=g0({queryKey:W0,queryFn:()=>j("/system"),refetchInterval:5e3,onSuccess:({version:u})=>{t!==u&&$.setState({version:u})}}),{t:l}=V();return r(le,{columns:{base:1,md:2,lg:3},spacing:3,w:"full",...o,children:[e(w0,{icon:e(La,{}),title:l("activeUsers"),value:a?lo(a.users_active):"0",subValue:a?`\u0412\u0441\u0435\u0433\u043E: ${lo(a.total_user)}`:void 0}),e(w0,{icon:e(Ua,{}),title:l("dataUsage"),value:a?Re(a.incoming_bandwidth+a.outgoing_bandwidth):"0 B"}),e(w0,{icon:e(Ma,{}),title:l("memoryUsage"),value:a?Re(a.mem_used,1,!0).join(" "):"0 B",subValue:a?`\u0412\u0441\u0435\u0433\u043E: ${Re(a.mem_total,1)}`:void 0})]})},nt="marzban-num-users-per-page",no=10,Pa=()=>{const o=localStorage.getItem(nt)||no.toString();return parseInt(o)||no},$a=o=>localStorage.setItem(nt,o),Oa=o=>{for(const t in o)o[t]||delete o[t];return $.setState({loading:!0}),j("/users",{query:o}).then(t=>($.setState({users:t}),t)).finally(()=>{$.setState({loading:!1})})},ja=()=>j("/inbounds").then(o=>{$.setState({inbounds:new Map(Object.entries(o))})}).finally(()=>{$.setState({loading:!1})}),$=c0(Ft((o,t)=>({version:null,editingUser:null,deletingUser:null,isCreatingNewUser:!1,QRcodeLinks:null,subscribeUrl:null,users:{users:[],total:0},loading:!0,isResetingAllUsage:!1,isEditingHosts:!1,isEditingNodes:!1,isShowingNodesUsage:!1,resetUsageUser:null,revokeSubscriptionUser:null,filters:{username:"",limit:Pa(),sort:"-created_at"},inbounds:new Map,isEditingCore:!1,refetchUsers:()=>{Oa(t().filters)},resetAllUsage:()=>j("/users/reset",{method:"POST"}).then(()=>{t().onResetAllUsage(!1),t().refetchUsers()}),onResetAllUsage:a=>o({isResetingAllUsage:a}),onCreateUser:a=>o({isCreatingNewUser:a}),onEditingUser:a=>{o({editingUser:a})},onDeletingUser:a=>{o({deletingUser:a})},onFilterChange:a=>{o({filters:{...t().filters,...a}}),t().refetchUsers()},setQRCode:a=>{o({QRcodeLinks:a})},deleteUser:a=>(o({editingUser:null}),j(`/user/${a.username}`,{method:"DELETE"}).then(()=>{o({deletingUser:null}),t().refetchUsers(),B0.invalidateQueries(W0)})),createUser:a=>j("/user",{method:"POST",body:a}).then(()=>{o({editingUser:null}),t().refetchUsers(),B0.invalidateQueries(W0)}),editUser:a=>j(`/user/${a.username}`,{method:"PUT",body:a}).then(()=>{t().onEditingUser(null),t().refetchUsers()}),fetchUserUsage:(a,l)=>{for(const u in l)l[u]||delete l[u];return j(`/user/${a.username}/usage`,{method:"GET",query:l})},onEditingHosts:a=>{o({isEditingHosts:a})},onEditingNodes:a=>{o({isEditingNodes:a})},onShowingNodesUsage:a=>{o({isShowingNodesUsage:a})},setSubLink:a=>{o({subscribeUrl:a})},resetDataUsage:a=>j(`/user/${a.username}/reset`,{method:"POST"}).then(()=>{o({resetUsageUser:null}),t().refetchUsers()}),revokeSubscription:a=>j(`/user/${a.username}/revoke_sub`,{method:"POST"}).then(l=>{o({revokeSubscriptionUser:null,editingUser:l}),t().refetchUsers()})}))),$e=({children:o,color:t})=>e(w,{position:"relative",width:"36px",height:"36px",display:"flex",justifyContent:"center",alignItems:"center",_before:{content:'""',display:"block",position:"absolute",top:"0",left:"0",width:"calc(100%)",height:"calc(100%)",bg:`${t}.400`,opacity:".5",borderRadius:"5px",zIndex:"1",_dark:{bg:`${t}.400`}},_after:{content:'""',display:"block",position:"absolute",top:"0",left:"0",width:"calc(100% + 10px)",height:"calc(100% + 10px)",transform:"translate(-5px, -5px)",bg:`${t}.400`,opacity:".4",borderRadius:"8px",zIndex:"1",_dark:{bg:`${t}.400`}},children:e(i,{color:`${t}.500`,_dark:{color:`${t}.900`},position:"relative",zIndex:"2",children:o})});window.ace.define("ace/theme/nord_dark",["require","exports","module","ace/lib/dom"],(o,t,a)=>{t.isDark=!0,t.cssClass="ace-nord-dark",o("../lib/dom").importCssString(t.cssText,t.cssClass)});window.ace.define("ace/theme/dawn",["require","exports","module","ace/lib/dom"],(o,t,a)=>{t.isDark=!1,t.cssClass="ace-dawn",o("../lib/dom").importCssString(t.cssText,t.cssClass)});const st=x.exports.forwardRef(({json:o,onChange:t,mode:a="code"},l)=>{const{colorMode:u}=nr(),s={mode:a,onChangeText:t,statusBar:!1,mainMenuBar:!1,theme:u==="dark"?"ace/theme/nord_dark":"ace/theme/dawn"},d=x.exports.useRef(null),b=x.exports.useRef(null);return x.exports.useEffect(()=>(b.current=new At(d.current,s),o&&b.current.update(o),()=>{b.current&&b.current.destroy()}),[u]),x.exports.useEffect(()=>{b.current&&b.current.update(o)},[o]),e(w,{ref:l,border:"1px solid",borderColor:"gray.300",_dark:{borderColor:"gray.500"},borderRadius:5,h:"full",children:e(w,{height:"full",ref:d})})}),X0=k.object({name:k.string().min(1),address:k.string().min(1),port:k.number().min(1).or(k.string().transform(o=>parseFloat(o))),api_port:k.number().min(1).or(k.string().transform(o=>parseFloat(o))),xray_version:k.string().nullable().optional(),id:k.number().nullable().optional(),status:k.enum(["connected","connecting","error","disabled"]).nullable().optional(),message:k.string().nullable().optional(),add_as_new_host:k.boolean().optional(),usage_coefficient:k.number().or(k.string().transform(o=>parseFloat(o)))}),L0=()=>({name:"",address:"",port:62050,api_port:62051,xray_version:"",usage_coefficient:1}),Cr="fetch-nodes-query-key",x0=()=>{const{isEditingNodes:o}=$();return g0({queryKey:Cr,queryFn:sr.getState().fetchNodes,refetchInterval:o?3e3:void 0,refetchOnWindowFocus:!1})},sr=c0((o,t)=>({nodes:[],addNode(a){return j("/node",{method:"POST",body:a})},fetchNodes(){return j("/nodes")},fetchNodesUsage(a){return j("/nodes/usage",{query:a})},updateNode(a){return j(`/node/${a.id}`,{method:"PUT",body:a})},setDeletingNode(a){o({deletingNode:a})},reconnectNode(a){return j(`/node/${a.id}/reconnect`,{method:"POST"})},deleteNode:()=>{var a;return j(`/node/${(a=t().deletingNode)==null?void 0:a.id}`,{method:"DELETE"})}})),so=500,Ha=A(Io,{baseStyle:{w:5,h:5}}),Va=A(Ye,{baseStyle:{w:4,h:4}}),Ya=A(Bo,{baseStyle:{w:4,h:4}}),qa=A(To,{baseStyle:{w:3,h:3}}),Ga=o=>({[Me.ReadyState.CONNECTING]:"connecting",[Me.ReadyState.OPEN]:"connected",[Me.ReadyState.CLOSING]:"closed",[Me.ReadyState.CLOSED]:"closed",[Me.ReadyState.UNINSTANTIATED]:"closed"})[o],Qa=o=>{try{let t=new URL("http://127.0.0.1:8000".startsWith("/")?window.location.origin+"http://127.0.0.1:8000":"http://127.0.0.1:8000");return(t.protocol==="https:"?"wss://":"ws://")+N0([t.host+t.pathname,o?`/node/${o}/logs`:"/core/logs"])+"?interval=1&token="+Xr()}catch(t){return console.error("Unable to generate websocket url"),console.error(t),null}};let br=[];const Za=()=>{const{colorMode:o}=nr(),{data:t}=x0(),a=!1,[l,u]=x.exports.useState(""),s=(M,X)=>{M!==l&&(M==="host"?(u(""),B([])):(u(M),B([])))},{isEditingCore:d}=$(),{fetchCoreSettings:b,updateConfig:p,isLoading:y,config:m,isPostLoading:_,version:c,restartCore:h}=Z0(),R=x.exports.useRef(null),[D,B]=x.exports.useState([]),{t:C}=V(),n=pe(),f=qe({defaultValues:{config:m||{}}});x.exports.useEffect(()=>{m&&f.setValue("config",m)},[m]),x.exports.useEffect(()=>{d&&b()},[d]);const v=x.exports.useRef(!0),L=x.exports.useCallback($0(M=>{var oe,Fe,ye;const X=Math.abs((((oe=R.current)==null?void 0:oe.scrollTop)||0)-(((Fe=R.current)==null?void 0:Fe.scrollHeight)||0)+(((ye=R.current)==null?void 0:ye.offsetHeight)||0))<10;R.current&&X?v.current=!0:v.current=!1,M.length<40&&B(M)},300),[]),{readyState:N}=Wo(Qa(l),{onMessage:M=>{br.push(M.data),br.length>so&&(br=br.splice(0,br.length-so)),L([...br])},shouldReconnect:()=>!0,reconnectAttempts:10,reconnectInterval:1e3});x.exports.useEffect(()=>{var M;R.current&&v.current&&(R.current.scrollTop=(M=R.current)==null?void 0:M.scrollHeight)},[D]),x.exports.useEffect(()=>()=>{br=[]},[]);const Z=Ga(N.toString()),{mutate:ee,isLoading:W}=lr(h),ae=({config:M})=>{p(M).then(()=>{n({title:C("core.successMessage"),status:"success",isClosable:!0,position:"top",duration:3e3})}).catch(X=>{let oe=C("core.generalErrorMessage");typeof X.response._data.detail=="object"&&(oe=X.response._data.detail[Object.keys(X.response._data.detail)[0]]),typeof X.response._data.detail=="string"&&(oe=X.response._data.detail),n({title:oe,status:"error",isClosable:!0,position:"top",duration:3e3})})},ne=x.exports.useRef(null),[H,g]=x.exports.useState(!1),U=()=>{var M;document.fullscreenElement?(document.exitFullscreen(),g(!1)):((M=ne.current)==null||M.requestFullscreen(),g(!0))};return r("form",{onSubmit:f.handleSubmit(ae),children:[r(be,{children:[r(z,{children:[r(S,{justifyContent:"space-between",alignItems:"flex-start",children:[r(F,{children:[C("core.configuration")," ",y&&e(O0,{isIndeterminate:!0,size:"15px"})]}),e(S,{gap:0,children:e(G,{label:"Xray Version",placement:"top",children:e(T,{height:"100%",textTransform:"lowercase",children:c&&`v${c}`})})})]}),r(w,{position:"relative",ref:ne,minHeight:"300px",children:[e(se,{control:f.control,name:"config",render:({field:M})=>e(st,{json:m,onChange:M.onChange})}),e(P,{size:"xs","aria-label":"full screen",variant:"ghost",position:"absolute",top:"2",right:"4",onClick:U,children:H?e(qa,{}):e(Ya,{})})]})]}),r(z,{mt:"4",children:[r(S,{justifyContent:"space-between",style:{paddingBottom:"1rem"},children:[r(S,{children:[(t==null?void 0:t[0])&&r(Pe,{size:"sm",style:{width:"auto"},disabled:a,bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"xl",_focus:{borderColor:"blue.400",boxShadow:"0 0 0 1px blue.400"},_dark:{bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)"},_light:{bg:"white",border:"1px solid",borderColor:"gray.200"},sx:{option:{backgroundColor:o==="dark"?"#222C3B":"white"}},onChange:M=>s(M.currentTarget.value,M.currentTarget.selectedOptions[0].text),children:[e("option",{value:"host",defaultChecked:!0,children:"Master"},"host"),t&&t.map(M=>e("option",{value:String(M.id),children:C(M.name)},M.address))]}),e(F,{className:"w-au",children:C("core.logs")})]}),e(i,{as:F,children:C(`core.socket.${Z}`)})]}),e(w,{bg:"rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.08)",borderRadius:"xl",_light:{bg:"gray.50",border:"1px solid",borderColor:"gray.200"},minHeight:"200px",maxHeight:"250px",p:2,overflowY:"auto",ref:R,css:{"&::-webkit-scrollbar":{width:"4px"},"&::-webkit-scrollbar-track":{width:"6px"},"&::-webkit-scrollbar-thumb":{background:"rgba(255, 255, 255, 0.1)",borderRadius:"24px"}},children:D.map((M,X)=>e(i,{fontSize:"xs",opacity:.8,whiteSpace:"pre-line",children:M},X))})]})]}),e(ve,{children:r(S,{w:"full",justifyContent:"space-between",children:[e(S,{children:e(w,{children:e(G,{label:C("core.restartCore"),children:e(P,{"aria-label":"Restart Core",icon:e(Va,{className:vr({"animate-spin":W})}),onClick:()=>ee(),size:"sm",borderRadius:"full",bg:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)",color:"white",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.1)",_hover:{bg:"rgba(255, 255, 255, 0.1)"},_light:{bg:"rgba(255, 255, 255, 0.8)",color:"gray.700",border:"1px solid rgba(0, 0, 0, 0.1)",_hover:{bg:"rgba(255, 255, 255, 0.95)"}}})})})}),e(S,{children:e(q,{size:"sm",variant:"solid",colorScheme:"primary",px:"5",type:"submit",isDisabled:y||_,isLoading:_,bg:"rgba(102, 126, 234, 0.8)",backdropFilter:"blur(10px)",borderRadius:"30px",border:"1px solid rgba(255, 255, 255, 0.2)",fontSize:"sm",fontWeight:"600",color:"white",boxShadow:"0 4px 15px rgba(102, 126, 234, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.2)",_hover:{bg:"rgba(102, 126, 234, 0.9)",boxShadow:"0 6px 20px rgba(102, 126, 234, 0.5)"},_light:{bg:"rgba(102, 126, 234, 0.9)",_hover:{bg:"rgba(102, 126, 234, 1)"}},children:C("core.save")})})]})})]})},Xa=()=>{const{isEditingCore:o}=$(),t=$.setState.bind(null,{isEditingCore:!1}),{t:a}=V();return r(he,{isOpen:o,onClose:t,size:"3xl",children:[e(de,{bg:"blackAlpha.300",backdropFilter:"blur(10px)"}),r(xe,{mx:"3",w:"full",bg:"rgba(30, 35, 50, 0.95)",backdropFilter:"blur(20px) saturate(180%)",borderRadius:"30px",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.37)",_light:{bg:"rgba(255, 255, 255, 0.95)",border:"1px solid rgba(0, 0, 0, 0.1)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.15)"},children:[e(ce,{pt:6,color:"white",_light:{color:"gray.900"},children:r(S,{gap:2,children:[e($e,{color:"primary",children:e(Ha,{color:"white"})}),e(i,{fontWeight:"semibold",fontSize:"lg",children:a("core.title")})]})}),e(ge,{mt:3,bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"full",color:"white",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(0, 0, 0, 0.1)",color:"gray.600",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.08), inset 0 1px 0 rgba(255, 255, 255, 0.5)"},_hover:{bg:"rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.95)"}}}),e(Za,{})]})]})},Mr=A(Lo,{baseStyle:{w:5,h:5}}),Ja=()=>{const[o,t]=x.exports.useState(!1),{deletingUser:a,onDeletingUser:l,deleteUser:u}=$(),{t:s}=V(),d=pe(),b=()=>{l(null)},p=()=>{a&&(t(!0),u(a).then(()=>{d({title:s("deleteUser.deleteSuccess",{username:a.username}),status:"success",isClosable:!0,position:"top",duration:3e3})}).then(b).finally(t.bind(null,!1)))};return r(he,{isCentered:!0,isOpen:!!a,onClose:b,size:"sm",children:[e(de,{bg:"blackAlpha.300",backdropFilter:"blur(10px)"}),r(xe,{mx:"3",bg:"rgba(30, 35, 50, 0.95)",backdropFilter:"blur(20px) saturate(180%)",borderRadius:"30px",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.37)",_light:{bg:"rgba(255, 255, 255, 0.95)",border:"1px solid rgba(0, 0, 0, 0.1)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.15)"},children:[e(ce,{pt:6,color:"white",_light:{color:"gray.900"},children:e($e,{color:"red",children:e(Mr,{})})}),e(ge,{mt:3,bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"full",color:"white",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(0, 0, 0, 0.1)",color:"gray.600",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.08), inset 0 1px 0 rgba(255, 255, 255, 0.5)"},_hover:{bg:"rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.95)"}}}),r(be,{children:[e(i,{fontWeight:"semibold",fontSize:"lg",color:"white",_light:{color:"gray.900"},children:s("deleteUser.title")}),a&&e(i,{mt:1,fontSize:"sm",color:"gray.400",_light:{color:"gray.600"},children:e(ar,{components:{b:e("b",{})},children:s("deleteUser.prompt",{username:a.username})})})]}),r(ve,{display:"flex",borderTop:"1px solid rgba(255, 255, 255, 0.08)",_light:{borderTop:"1px solid rgba(0, 0, 0, 0.08)"},children:[e(w,{as:"button",onClick:b,mr:3,w:"full",bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"30px",px:4,py:2,fontSize:"sm",fontWeight:"500",color:"white",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(0, 0, 0, 0.1)",color:"gray.700",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.08), inset 0 1px 0 rgba(255, 255, 255, 0.5)"},_hover:{bg:"rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.95)"}},textAlign:"center",children:s("cancel")}),r(w,{as:"button",onClick:p,w:"full",bg:"rgba(229, 62, 62, 0.8)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"30px",px:4,py:2,fontSize:"sm",fontWeight:"600",color:"white",boxShadow:"0 4px 15px rgba(229, 62, 62, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.2)",_hover:{bg:"rgba(229, 62, 62, 0.9)",boxShadow:"0 6px 20px rgba(229, 62, 62, 0.5), inset 0 1px 0 rgba(255, 255, 255, 0.3)"},display:"flex",alignItems:"center",justifyContent:"center",gap:2,children:[o&&e(Ge,{size:"xs"}),s("delete")]})]})]})]})},e0={baseStyle:{w:4,h:4}},Ka=A(It,e0),ei=A(Uo,e0),u0=A(Ye,e0),ri=A(Mo,e0),oi=A(j0,e0);A(Lr,{baseStyle:{w:4,h:4,strokeWidth:1.5}});const ti=$0(o=>{$.getState().onFilterChange({...$.getState().filters,offset:0,search:o})},300),ai=({...o})=>{const{loading:t,filters:a,onFilterChange:l,refetchUsers:u,onCreateUser:s,onResetAllUsage:d,onShowingNodesUsage:b}=$(),{t:p}=V(),[y,m]=x.exports.useState(""),_=h=>{m(h.target.value),ti(h.target.value)},c=()=>{m(""),l({...a,offset:0,search:""})};return r(No,{id:"filters",templateColumns:{lg:"repeat(3, 1fr)",md:"repeat(4, 1fr)",base:"repeat(1, 1fr)"},position:"sticky",top:0,rowGap:3,gap:{lg:4,base:0},py:2,zIndex:"docked",...o,children:[e(Gr,{colSpan:{base:1,md:2,lg:1},order:{base:2,md:1},children:r(Ar,{children:[e(Po,{pointerEvents:"none",children:e(Ka,{color:"gray.400"})}),e(Y,{placeholder:p("search"),value:y,onChange:_,bg:"rgba(255, 255, 255, 0.06)",backdropFilter:"blur(12px)",border:"none",borderRadius:"20px",color:"white",boxShadow:"inset 0 1px 0 rgba(255, 255, 255, 0.1), 0 4px 12px rgba(0, 0, 0, 0.15)",_placeholder:{color:"rgba(255, 255, 255, 0.4)"},_light:{bg:"rgba(255, 255, 255, 0.7)",border:"none",color:"gray.900",_placeholder:{color:"gray.400"},boxShadow:"inset 0 1px 0 rgba(255, 255, 255, 0.5), 0 4px 12px rgba(0, 0, 0, 0.08)"},_focus:{bg:"rgba(255, 255, 255, 0.1)",boxShadow:"inset 0 1px 0 rgba(255, 255, 255, 0.1), 0 4px 16px rgba(102, 126, 234, 0.25)",_light:{bg:"rgba(255, 255, 255, 0.85)",boxShadow:"inset 0 1px 0 rgba(255, 255, 255, 0.5), 0 4px 16px rgba(102, 126, 234, 0.2)"}},_hover:{bg:"rgba(255, 255, 255, 0.08)",_light:{bg:"rgba(255, 255, 255, 0.8)"}}}),r(Qr,{children:[t&&e(Ge,{size:"xs"}),a.search&&a.search.length>0&&e(P,{onClick:c,"aria-label":"clear",size:"xs",variant:"ghost",borderRadius:"full",color:"gray.400",_hover:{bg:"rgba(255, 255, 255, 0.1)"},children:e(ei,{})})]})]})}),e(Gr,{colSpan:2,order:{base:1,md:2},children:r(S,{justifyContent:"flex-end",alignItems:"center",h:"full",spacing:3,children:[e(G,{label:p("refresh"),children:e(w,{bg:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",borderRadius:"full",border:"1px solid rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(0, 0, 0, 0.1)",boxShadow:"0 4px 15px rgba(0, 0, 0, 0.15), inset 0 1px 2px rgba(255, 255, 255, 1)"},display:"flex",alignItems:"center",justifyContent:"center",minW:"44px",minH:"44px",boxShadow:"inset 0 1px 2px rgba(255, 255, 255, 0.2), 0 2px 6px rgba(0, 0, 0, 0.1)",children:e(P,{"aria-label":"refresh users",disabled:t,onClick:u,variant:"ghost",size:"sm",borderRadius:"full",color:"white",_light:{color:"gray.500"},minW:"auto",h:"auto",children:e(u0,{className:vr({"animate-spin":t})})})})}),r(Sr,{children:[e(G,{label:"\u0414\u043E\u043F\u043E\u043B\u043D\u0438\u0442\u0435\u043B\u044C\u043D\u043E",children:e(w,{bg:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",borderRadius:"full",border:"1px solid rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(0, 0, 0, 0.1)",boxShadow:"0 4px 15px rgba(0, 0, 0, 0.15), inset 0 1px 2px rgba(255, 255, 255, 1)"},display:"flex",alignItems:"center",justifyContent:"center",minW:"44px",minH:"44px",boxShadow:"inset 0 1px 2px rgba(255, 255, 255, 0.2), 0 2px 6px rgba(0, 0, 0, 0.1)",children:e(wr,{as:P,icon:e(ri,{}),variant:"ghost",size:"sm",borderRadius:"full",color:"white",_light:{color:"gray.500"},minW:"auto",h:"auto","aria-label":"\u0414\u043E\u043F\u043E\u043B\u043D\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044F"})})}),e(fe,{children:r(_r,{zIndex:1e4,bg:"rgba(30, 35, 50, 0.95)",backdropFilter:"blur(20px) saturate(180%)",borderRadius:"16px",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.37)",py:1,px:1,_light:{bg:"rgba(255, 255, 255, 0.95)",border:"1px solid rgba(0, 0, 0, 0.1)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.1)"},children:[e(_e,{onClick:()=>b(!0),borderRadius:"10px",bg:"transparent",color:"white",_light:{color:"gray.900"},_hover:{bg:"rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(0, 0, 0, 0.05)"}},children:r(S,{children:[e(oi,{}),e("span",{children:"\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u0438\u0435 \u0443\u0437\u043B\u043E\u0432"})]})}),e(_e,{onClick:()=>d(!0),borderRadius:"10px",bg:"transparent",color:"orange.400",_light:{color:"orange.500"},_hover:{bg:"rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(0, 0, 0, 0.05)"}},children:r(S,{children:[e(u0,{}),e("span",{children:"\u0421\u0431\u0440\u043E\u0441\u0438\u0442\u044C \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u0438\u0435"})]})})]})})]}),e(q,{leftIcon:e($o,{}),onClick:()=>s(!0),bg:"rgba(102, 126, 234, 0.8)",backdropFilter:"blur(10px)",borderRadius:"30px",border:"1px solid rgba(255, 255, 255, 0.2)",px:"5",py:"2.5",fontSize:"sm",fontWeight:"600",color:"white",boxShadow:"0 4px 15px rgba(102, 126, 234, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.2)",_hover:{bg:"rgba(102, 126, 234, 0.9)",boxShadow:"0 6px 20px rgba(102, 126, 234, 0.5)"},_light:{bg:"rgba(102, 126, 234, 0.9)",_hover:{bg:"rgba(102, 126, 234, 1)"}},children:p("createUser")})]})})]})},ut=o=>($(),e(S,{w:"full",py:"0",position:"relative",...o,children:e(i,{display:"inline-block",flexGrow:1,textAlign:"center",color:"gray.500",fontSize:"xs"})})),ii=A(Bt,{baseStyle:{w:5,h:5}}),U0=({actions:o})=>{const{i18n:t}=V();var a=l=>{t.changeLanguage(l)};return r(Sr,{placement:"bottom-end",children:[e(wr,{as:P,size:"sm",variant:"ghost",icon:e(ii,{}),borderRadius:"full",color:"white",_light:{color:"gray.500"},minW:"auto",h:"auto",_hover:{bg:"rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(0, 0, 0, 0.05)"}},_active:{bg:"rgba(255, 255, 255, 0.15)",_light:{bg:"rgba(0, 0, 0, 0.1)"}}}),e(fe,{children:r(_r,{minW:"120px",zIndex:99999,bg:"rgba(30, 35, 50, 0.95)",backdropFilter:"blur(20px) saturate(180%)",borderRadius:"16px",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.37)",py:1,px:1,_light:{bg:"rgba(255, 255, 255, 0.95)",border:"1px solid rgba(0, 0, 0, 0.1)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.1)"},children:[e(_e,{fontSize:"sm",borderRadius:"10px",color:"white",bg:"transparent",px:3,py:2,_light:{color:"gray.900"},_hover:{bg:"rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(0, 0, 0, 0.05)"}},onClick:()=>a("en"),children:"English"}),e(_e,{fontSize:"sm",borderRadius:"10px",color:"white",bg:"transparent",px:3,py:2,_light:{color:"gray.900"},_hover:{bg:"rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(0, 0, 0, 0.05)"}},onClick:()=>a("fa"),children:"\u0641\u0627\u0631\u0633\u06CC"}),e(_e,{fontSize:"sm",borderRadius:"10px",color:"white",bg:"transparent",px:3,py:2,_light:{color:"gray.900"},_hover:{bg:"rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(0, 0, 0, 0.05)"}},onClick:()=>a("zh-cn"),children:"\u7B80\u4F53\u4E2D\u6587"}),e(_e,{fontSize:"sm",borderRadius:"10px",color:"white",bg:"transparent",px:3,py:2,_light:{color:"gray.900"},_hover:{bg:"rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(0, 0, 0, 0.05)"}},onClick:()=>a("ru"),children:"\u0420\u0443\u0441\u0441\u043A\u0438\u0439"})]})})]})},uo=A(Tt,{baseStyle:{w:5,h:5}}),co=A(Wt,{baseStyle:{w:5,h:5}}),li=A(Lt,{baseStyle:{w:6,h:6}}),ni=({actions:o,activeTab:t=0,onTabChange:a})=>{V();const{colorMode:l,toggleColorMode:u}=nr(),{isOpen:s,onOpen:d,onClose:b}=yr(),p={horizontal:0,vertical:.5,tabsLeft:0,buttonsRight:0};Ne("gray.50","gray.900"),Ne("white","gray.700"),Ne("gray.100","gray.800");const y=["\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0438","\u041F\u0440\u043E\u043A\u0441\u0438","\u041B\u043E\u0433\u0438","\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438","\u0422\u0430\u0440\u0438\u0444\u044B"],m=_=>{a==null||a(_),b()};return r(ke,{children:[e(H0,{breakpoint:"(max-width: 930px)",children:r(S,{w:"full",justifyContent:"space-between",alignItems:"center",px:p.horizontal,py:p.vertical,children:[e(w,{bg:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",borderRadius:"full",border:"1px solid rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(0, 0, 0, 0.1)",boxShadow:"0 4px 15px rgba(0, 0, 0, 0.15), inset 0 1px 2px rgba(255, 255, 255, 1)"},display:"flex",alignItems:"center",justifyContent:"center",minW:"44px",minH:"44px",boxShadow:"inset 0 1px 2px rgba(255, 255, 255, 0.2), 0 2px 6px rgba(0, 0, 0, 0.1)",children:e(P,{"aria-label":"Menu",icon:e(li,{}),onClick:d,variant:"ghost",size:"sm",color:"white",_light:{color:"gray.500"},minW:"auto",h:"auto"})}),r(Ut,{isOpen:s,placement:"left",onClose:b,children:[e(de,{bg:"rgba(0, 0, 0, 0.4)",backdropFilter:"blur(4px)"}),r(Mt,{bg:"rgba(30, 35, 50, 0.85)",backdropFilter:"blur(20px) saturate(180%)",borderRight:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.37)",_light:{bg:"rgba(255, 255, 255, 0.85)",borderRight:"1px solid rgba(0, 0, 0, 0.1)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.15)"},children:[e(ge,{color:"white",_light:{color:"gray.500"},_hover:{bg:"rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(0, 0, 0, 0.05)"}}}),e(ce,{color:"white",borderBottom:"1px solid rgba(255, 255, 255, 0.08)",_light:{color:"gray.900",borderBottom:"1px solid rgba(0, 0, 0, 0.08)"},children:"\u041D\u0430\u0432\u0438\u0433\u0430\u0446\u0438\u044F"}),e(be,{pt:4,children:e(I,{align:"stretch",spacing:2,children:y.map((_,c)=>e(w,{p:3,borderRadius:"20px",bg:t===c?"rgba(102, 126, 234, 0.5)":"rgba(255, 255, 255, 0.03)",color:t===c?"white":"rgba(255, 255, 255, 0.8)",cursor:"pointer",fontWeight:t===c?"600":"normal",onClick:()=>m(c),transition:"all 0.3s ease",border:"1px solid",borderColor:t===c?"rgba(102, 126, 234, 0.5)":"rgba(255, 255, 255, 0.05)",_hover:{bg:t===c?"rgba(102, 126, 234, 0.6)":"rgba(255, 255, 255, 0.08)"},_light:{bg:t===c?"rgba(102, 126, 234, 0.8)":"rgba(0, 0, 0, 0.03)",color:t===c?"white":"gray.700",borderColor:t===c?"rgba(102, 126, 234, 0.8)":"rgba(0, 0, 0, 0.05)",_hover:{bg:t===c?"rgba(102, 126, 234, 0.9)":"rgba(0, 0, 0, 0.06)"}},children:_},c))})})]})]}),r(S,{spacing:3,children:[e(w,{bg:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",borderRadius:"full",border:"1px solid rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(0, 0, 0, 0.1)",boxShadow:"0 4px 15px rgba(0, 0, 0, 0.15), inset 0 1px 2px rgba(255, 255, 255, 1)"},display:"flex",alignItems:"center",justifyContent:"center",minW:"44px",minH:"44px",boxShadow:"inset 0 1px 2px rgba(255, 255, 255, 0.2), 0 2px 6px rgba(0, 0, 0, 0.1)",children:e(U0,{})}),e(w,{bg:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",borderRadius:"full",border:"1px solid rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(0, 0, 0, 0.1)",boxShadow:"0 4px 15px rgba(0, 0, 0, 0.15), inset 0 1px 2px rgba(255, 255, 255, 1)"},display:"flex",alignItems:"center",justifyContent:"center",minW:"44px",minH:"44px",boxShadow:"inset 0 1px 2px rgba(255, 255, 255, 0.2), 0 2px 6px rgba(0, 0, 0, 0.1)",children:e(P,{size:"sm",variant:"ghost","aria-label":"switch theme",borderRadius:"full",color:"white",_light:{color:"gray.500"},onClick:()=>{T0(l=="dark"?"light":"dark"),u()},children:l==="light"?e(uo,{}):e(co,{})})})]})]})}),e(V0,{breakpoint:"(max-width: 930px)",children:r(S,{w:"full",justifyContent:"space-between",alignItems:"center",px:p.horizontal,py:p.vertical,children:[e(S,{spacing:2,children:y.map((_,c)=>e(w,{as:"button",onClick:()=>a==null?void 0:a(c),bg:t===c?"rgba(102, 126, 234, 0.5)":"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",borderRadius:"30px",border:"1px solid",borderColor:t===c?"rgba(102, 126, 234, 0.5)":"rgba(255, 255, 255, 0.1)",px:"4",py:"2",fontSize:"sm",fontWeight:"600",color:t===c?"white":"rgba(255, 255, 255, 0.7)",transition:"all 0.3s ease",boxShadow:t===c?"0 4px 15px rgba(102, 126, 234, 0.3), inset 0 1px 2px rgba(255, 255, 255, 0.2)":"inset 0 1px 2px rgba(255, 255, 255, 0.2), 0 2px 6px rgba(0, 0, 0, 0.1)",_light:{bg:t===c?"rgba(102, 126, 234, 0.8)":"rgba(255, 255, 255, 0.8)",borderColor:t===c?"rgba(102, 126, 234, 0.8)":"rgba(0, 0, 0, 0.1)",color:t===c?"white":"rgba(0, 0, 0, 0.7)",boxShadow:t===c?"0 4px 15px rgba(102, 126, 234, 0.4), inset 0 1px 2px rgba(255, 255, 255, 0.5)":"0 4px 15px rgba(0, 0, 0, 0.15), inset 0 1px 2px rgba(255, 255, 255, 1)"},children:_},c))}),r(S,{spacing:3,children:[e(w,{bg:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",borderRadius:"full",border:"1px solid rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(0, 0, 0, 0.1)",boxShadow:"0 4px 15px rgba(0, 0, 0, 0.15), inset 0 1px 2px rgba(255, 255, 255, 1)"},display:"flex",alignItems:"center",justifyContent:"center",minW:"44px",minH:"44px",boxShadow:"inset 0 1px 2px rgba(255, 255, 255, 0.2), 0 2px 6px rgba(0, 0, 0, 0.1)",children:e(U0,{})}),e(w,{bg:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",borderRadius:"full",border:"1px solid rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(0, 0, 0, 0.1)",boxShadow:"0 4px 15px rgba(0, 0, 0, 0.15), inset 0 1px 2px rgba(255, 255, 255, 1)"},display:"flex",alignItems:"center",justifyContent:"center",minW:"44px",minH:"44px",boxShadow:"inset 0 1px 2px rgba(255, 255, 255, 0.2), 0 2px 6px rgba(0, 0, 0, 0.1)",children:e(P,{size:"sm",variant:"ghost","aria-label":"switch theme",borderRadius:"full",color:"white",_light:{color:"gray.500"},minW:"auto",h:"auto",onClick:()=>{T0(l=="dark"?"light":"dark"),u()},children:l==="light"?e(uo,{}):e(co,{})})})]})]})})]})},dt=[{title:"Inbound's default",value:"inbound_default"},{title:"TLS",value:"tls"},{title:"None",value:"none"}],ct=[{title:"",value:""},{title:"h3",value:"h3"},{title:"h2",value:"h2"},{title:"http/1.1",value:"http/1.1"},{title:"h3,h2,http/1.1",value:"h3,h2,http/1.1"},{title:"h3,h2",value:"h3,h2"},{title:"h2,http/1.1",value:"h2,http/1.1"}],gt=[{title:"",value:""},...["chrome","firefox","safari","ios","android","edge","360","qq","random","randomized"].map(o=>({title:o,value:o}))],go=[{title:"none",value:""},{title:"xtls-rprx-vision",value:"xtls-rprx-vision"}],bo=["aes-128-gcm","aes-256-gcm","chacha20-ietf-poly1305"],bt=c0(o=>({isLoading:!1,isPostLoading:!1,hosts:{},fetchHosts:()=>{o({isLoading:!0}),j("/hosts").then(t=>o({hosts:t})).finally(()=>o({isLoading:!1}))},setHosts:t=>(o({isPostLoading:!0}),j("/hosts",{method:"PUT",body:t}).finally(()=>{o({isPostLoading:!1})}))}));const si=A(Uo,{baseStyle:{w:4,h:4}}),hr=R0.forwardRef(({disabled:o,step:t,label:a,className:l,startAdornment:u,endAdornment:s,type:d="text",placeholder:b,onChange:p,onBlur:y,name:m,value:_,onClick:c,error:h,clearable:R=!1,...D},B)=>{const C=()=>{p&&p({target:{value:"",name:m}})},{size:n="md"}=D,f=d=="number"?Rr:Y,v=d=="number"?zr:R0.Fragment,L=d=="number"?{keepWithinRange:!0,precision:5,format:N=>isNaN(parseFloat(String(N)))||Number(parseFloat(String(N)).toFixed(5))===0?N:Number(parseFloat(String(N)).toFixed(5)),min:0,step:t,name:m,type:d,placeholder:b,onChange:N=>{p&&p(N)},onBlur:y,value:_,onClick:c,disabled:o,flexGrow:1,size:n}:{};return r(z,{isInvalid:!!h,children:[a&&e(F,{fontSize:"sm",mb:1,children:a}),r(Ar,{size:n,w:"full",_focusWithin:{borderColor:"blue.400",boxShadow:"0 0 0 1px blue.400"},bg:o?"gray.600":"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"20px",boxShadow:"inset 0 1px 0 rgba(255, 255, 255, 0.05)",_light:{bg:o?"gray.200":"rgba(255, 255, 255, 0.7)",border:"1px solid rgba(0, 0, 0, 0.1)",boxShadow:"inset 0 1px 0 rgba(255, 255, 255, 0.5)"},children:[u&&e(Nt,{children:u}),r(v,{...L,children:[e(f,{name:m,ref:B,step:t,className:vr(l),type:d,placeholder:b,onChange:p,onBlur:y,value:_,onClick:c,disabled:o,flexGrow:1,bg:"transparent",border:"none",color:"white",_light:{color:"gray.800"},_placeholder:{color:"gray.400",_light:{color:"gray.500"}},_focusVisible:{outline:"none",borderTopColor:"transparent",borderRightColor:"transparent",borderBottomColor:"transparent"},_disabled:{cursor:"not-allowed",opacity:.6},...D,roundedLeft:u?"0":"md",roundedRight:s?"0":"md"}),d=="number"&&e(ke,{children:r(Pt,{children:[e($t,{}),e(Ot,{})]})})]}),s&&e(jt,{borderLeftRadius:0,borderRightRadius:"20px",bg:"transparent",border:"none",color:"gray.400",_light:{color:"gray.500"},children:s}),R&&_&&_.length&&e(Qr,{borderLeftRadius:0,borderRightRadius:"6px",bg:"transparent",onClick:C,cursor:"pointer",children:e(si,{})})]}),!!h&&e(we,{children:h})]})}),ui=A(Oo,{baseStyle:{w:5,h:5}}),di=A(jo,{baseStyle:{w:5,h:5}}),ci=A(Ho,{baseStyle:{w:5,h:5}}),_0=A(Pe,{baseStyle:{field:{bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"20px",color:"white",_light:{bg:"rgba(255, 255, 255, 0.7)",border:"1px solid rgba(0, 0, 0, 0.1)",color:"gray.800"},_focus:{borderColor:"blue.400",boxShadow:"0 0 0 1px blue.400"}},icon:{color:"whiteAlpha.700",_light:{color:"gray.500"}}}}),or=A(hr,{baseStyle:{bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"20px",color:"white",_light:{bg:"rgba(255, 255, 255, 0.7)",border:"1px solid rgba(0, 0, 0, 0.1)",color:"gray.800"},_focus:{borderColor:"blue.400",boxShadow:"0 0 0 1px blue.400"},_placeholder:{color:"whiteAlpha.400",_light:{color:"gray.400"}}}}),gi=A(Vo,{baseStyle:{w:5,h:5}}),He=A(Yo,{baseStyle:{w:4,h:4,color:"gray.400",cursor:"pointer"}}),bi=k.record(k.string().min(1),k.array(k.object({remark:k.string().min(1,"Remark is required"),address:k.string().min(1,"Address is required"),port:k.string().or(k.number()).nullable().transform(o=>typeof o=="number"?o:o!==null&&!isNaN(parseInt(o))?Number(parseInt(o)):null),path:k.string().nullable(),sni:k.string().nullable(),host:k.string().nullable(),mux_enable:k.boolean().default(!1),allowinsecure:k.boolean().nullable().default(!1),is_disabled:k.boolean().default(!0),fragment_setting:k.string().nullable(),noise_setting:k.string().nullable(),random_user_agent:k.boolean().default(!1),security:k.string(),alpn:k.string(),fingerprint:k.string(),use_sni_as_host:k.boolean().default(!1)}))),Ee=A(we,{baseStyle:{color:"red.400",display:"block",textAlign:"left",w:"100%"}}),pi=({hostKey:o,isOpen:t,toggleAccordion:a})=>{const{inbounds:l}=$(),u=[...l.values()].flat().filter(C=>C.tag===o)[0],s=Ur(),{fields:d,append:b,remove:p,insert:y,move:m}=qo({control:s.control,name:o}),{errors:_}=s.formState,{t:c}=V(),h=_[o],R=()=>{b({host:"",sni:"",port:null,path:null,address:"",remark:"",mux_enable:!1,allowinsecure:!1,is_disabled:!1,fragment_setting:"",noise_setting:"",random_user_agent:!1,security:"inbound_default",alpn:"",fingerprint:"",use_sni_as_host:!1})},D=C=>{if(C<0||C>=d.length)return;const n=d[C];y(C+1,n)};x.exports.useEffect(()=>{h&&!t&&a()},[h]);const B=(C,n)=>{n==="up"&&C>0?m(C,C-1):n==="down"&&C<d.length-1&&m(C,C+1)};return r(Ir,{bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"20px",mb:2,_light:{bg:"rgba(255, 255, 255, 0.6)",border:"1px solid rgba(0, 0, 0, 0.1)"},p:1,w:"full",children:[r(Br,{px:2,borderRadius:"15px",onClick:a,_hover:{bg:"rgba(255, 255, 255, 0.05)"},children:[e(i,{as:"span",fontWeight:"medium",fontSize:"sm",flex:"1",textAlign:"left",color:"white",_light:{color:"gray.800"},children:o}),e(F0,{})]}),e(Tr,{px:2,pb:2,children:r(I,{gap:3,children:[d.map((C,n)=>{var f,v,L,N,Z,ee,W,ae,ne,H,g,U,M,X,oe,Fe,ye,ur,dr,ie,Oe,cr,Qe,gr,Ze,Xe,Je,Ke,er,rr,E,O,Q,Ce,Ae,je,te,Pr,$r,Or,jr,Hr,Er,K0,eo;return e(Ht.div,{layout:!0,initial:!1,animate:{opacity:1},exit:{opacity:0},transition:{layout:{type:"spring",stiffness:500,damping:30},opacity:{duration:.1}},id:C.id,whileDrag:{scale:1.05,zIndex:10},style:{width:"100%"},children:r(I,{id:C.id,bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"20px",_light:{bg:"rgba(255, 255, 255, 0.6)",border:"1px solid rgba(0, 0, 0, 0.1)"},p:4,w:"full",children:[e(S,{w:"100%",alignItems:"flex-start",children:r(z,{position:"relative",zIndex:10,isInvalid:!!(h&&((f=h[n])==null?void 0:f.remark)),children:[r(Ar,{children:[e(or,{...s.register(o+"."+n+".remark"),size:"sm",borderRadius:"20px",placeholder:"Remark"}),e(Qr,{children:r(Be,{isLazy:!0,placement:"right",children:[e(Te,{children:e(w,{mt:"-8px",children:e(He,{})})}),e(fe,{children:r(We,{children:[e(Le,{}),e(Ue,{}),e(A0,{children:r(w,{fontSize:"xs",children:[e(i,{pr:"20px",children:c("hostsDialog.desc")}),r(i,{children:[r(T,{children:["{","SERVER_IP","}"]})," ",c("hostsDialog.currentServer")]}),r(i,{mt:1,children:[r(T,{children:["{","SERVER_IPV6","}"]})," ",c("hostsDialog.currentServerv6")]}),r(i,{mt:1,children:[r(T,{children:["{","USERNAME","}"]})," ",c("hostsDialog.username")]}),r(i,{mt:1,children:[r(T,{children:["{","DATA_USAGE","}"]})," ",c("hostsDialog.dataUsage")]}),r(i,{mt:1,children:[r(T,{children:["{","DATA_LEFT","}"]})," ",c("hostsDialog.remainingData")]}),r(i,{mt:1,children:[r(T,{children:["{","DATA_LIMIT","}"]})," ",c("hostsDialog.dataLimit")]}),r(i,{mt:1,children:[r(T,{children:["{","DAYS_LEFT","}"]})," ",c("hostsDialog.remainingDays")]}),r(i,{mt:1,children:[r(T,{children:["{","EXPIRE_DATE","}"]})," ",c("hostsDialog.expireDate")]}),r(i,{mt:1,children:[r(T,{children:["{","JALALI_EXPIRE_DATE","}"]})," ",c("hostsDialog.jalaliExpireDate")]}),r(i,{mt:1,children:[r(T,{children:["{","TIME_LEFT","}"]})," ",c("hostsDialog.remainingTime")]}),r(i,{mt:1,children:[r(T,{children:["{","STATUS_TEXT","}"]})," ",c("hostsDialog.statusText")]}),r(i,{mt:1,children:[r(T,{children:["{","STATUS_EMOJI","}"]})," ",c("hostsDialog.statusEmoji")]}),r(i,{mt:1,children:[r(T,{children:["{","PROTOCOL","}"]})," ",c("hostsDialog.proxyProtocol")]}),r(i,{mt:1,children:[r(T,{children:["{","TRANSPORT","}"]})," ",c("hostsDialog.proxyMethod")]})]})})]})})]})})]}),h&&((v=h[n])==null?void 0:v.remark)&&e(Ee,{children:(N=(L=h[n])==null?void 0:L.remark)==null?void 0:N.message})]})}),r(z,{isInvalid:!!(h&&((Z=h[n])==null?void 0:Z.address)),children:[r(Ar,{children:[e(or,{size:"sm",borderRadius:"20px",placeholder:"Address (e.g. example.com)",...s.register(o+"."+n+".address")}),e(Qr,{children:r(Be,{isLazy:!0,placement:"right",children:[e(Te,{children:e(w,{mt:"-8px",children:e(He,{})})}),e(fe,{children:r(We,{children:[e(Le,{}),e(Ue,{}),e(A0,{children:r(w,{fontSize:"xs",children:[e(i,{pr:"20px",children:c("hostsDialog.desc")}),r(i,{children:[r(T,{children:["{","SERVER_IP","}"]})," ",c("hostsDialog.currentServer")]}),r(i,{mt:1,children:[r(T,{children:["{","SERVER_IPV6","}"]})," ",c("hostsDialog.currentServerv6")]}),r(i,{mt:1,children:[r(T,{children:["{","USERNAME","}"]})," ",c("hostsDialog.username")]}),r(i,{mt:1,children:[r(T,{children:["{","DATA_USAGE","}"]})," ",c("hostsDialog.dataUsage")]}),r(i,{mt:1,children:[r(T,{children:["{","DATA_LEFT","}"]})," ",c("hostsDialog.remainingData")]}),r(i,{mt:1,children:[r(T,{children:["{","DATA_LIMIT","}"]})," ",c("hostsDialog.dataLimit")]}),r(i,{mt:1,children:[r(T,{children:["{","DAYS_LEFT","}"]})," ",c("hostsDialog.remainingDays")]}),r(i,{mt:1,children:[r(T,{children:["{","EXPIRE_DATE","}"]})," ",c("hostsDialog.expireDate")]}),r(i,{mt:1,children:[r(T,{children:["{","JALALI_EXPIRE_DATE","}"]})," ",c("hostsDialog.jalaliExpireDate")]}),r(i,{mt:1,children:[r(T,{children:["{","TIME_LEFT","}"]})," ",c("hostsDialog.remainingTime")]}),r(i,{mt:1,children:[r(T,{children:["{","STATUS_TEXT","}"]})," ",c("hostsDialog.statusText")]}),r(i,{mt:1,children:[r(T,{children:["{","STATUS_EMOJI","}"]})," ",c("hostsDialog.statusEmoji")]}),r(i,{mt:1,children:[r(T,{children:["{","PROTOCOL","}"]})," ",c("hostsDialog.proxyProtocol")]}),r(i,{mt:1,children:[r(T,{children:["{","TRANSPORT","}"]})," ",c("hostsDialog.proxyMethod")]})]})})]})})]})})]}),h&&((ee=h[n])==null?void 0:ee.address)&&e(Ee,{children:(ae=(W=h[n])==null?void 0:W.address)==null?void 0:ae.message})]}),e(Jr,{w:"full",allowToggle:!0,children:r(Ir,{border:"0",children:[r("div",{style:{display:"flex",alignItems:"center"},children:[r(Br,{display:"flex",px:0,py:1,borderRadius:3,_hover:{bg:"transparent"},children:[r(i,{flex:"3",align:"start",fontSize:"xs",color:"gray.600",_dark:{color:"gray.500"},pl:1,children:[c("hostsDialog.advancedOptions"),e(F0,{fontSize:"sm",ml:1})]}),r(Vt,{flex:"1",px:"0",display:"contents",children:[e(se,{control:s.control,name:`${o}.${n}.is_disabled`,render:({field:me})=>e(Se,{mx:"1.5",colorScheme:"primary",...me,value:void 0,isChecked:!me.value,onChange:ro=>{console.log(ro.target.checked),me.onChange(!ro.target.checked)}})}),e(G,{label:"Delete",placement:"top",children:e(P,{"aria-label":"Delete",size:"sm",colorScheme:"red",variant:"ghost",onClick:p.bind(null,n),children:e(Mr,{})})})]})]}),e(G,{label:"Duplicate",placement:"top",children:e(P,{"aria-label":"Duplicate",size:"sm",colorScheme:"white",variant:"ghost",onClick:()=>D(n),children:e(ui,{})})}),n<d.length-1&&e(G,{label:"Move Down",placement:"top",children:e(P,{"aria-label":"DownIcon",size:"sm",colorScheme:"white",variant:"ghost",onClick:()=>B(n,"down"),children:e(ci,{})})}),n>0&&e(G,{label:"Move Up",placement:"top",children:e(P,{"aria-label":"UpIcon",size:"sm",colorScheme:"white",variant:"ghost",onClick:()=>B(n,"up"),children:e(di,{})})})]}),e(Tr,{w:"full",p:1,children:r(I,{w:"full",borderRadius:"20px",children:[r(z,{isInvalid:!!(h&&((ne=h[n])==null?void 0:ne.port)),children:[r(F,{display:"flex",pb:1,alignItems:"center",justifyContent:"space-between",gap:1,m:"0",children:[e("span",{children:c("hostsDialog.port")}),r(Be,{isLazy:!0,placement:"right",children:[e(Te,{children:e(He,{})}),e(fe,{children:r(We,{p:2,children:[e(Le,{}),e(Ue,{}),e(i,{fontSize:"xs",pr:5,children:c("hostsDialog.port.info")})]})})]})]}),e(or,{size:"sm",borderRadius:"20px",placeholder:String(u.port||"8080"),type:"number",...s.register(o+"."+n+".port")})]}),r(z,{isInvalid:!!(h&&((H=h[n])==null?void 0:H.sni)),children:[r(F,{display:"flex",pb:1,alignItems:"center",gap:1,justifyContent:"space-between",m:"0",children:[e("span",{children:c("hostsDialog.sni")}),r(Be,{isLazy:!0,placement:"right",children:[e(Te,{children:e(He,{})}),e(fe,{children:r(We,{p:2,children:[e(Le,{}),e(Ue,{}),e(i,{fontSize:"xs",pr:5,children:c("hostsDialog.sni.info")}),e(i,{fontSize:"xs",mt:"2",children:e(ar,{i18nKey:"hostsDialog.host.wildcard",components:{badge:e(T,{})}})}),e(i,{fontSize:"xs",children:e(ar,{i18nKey:"hostsDialog.host.multiHost",components:{badge:e(T,{})}})})]})})]})]}),e(or,{size:"sm",borderRadius:"20px",placeholder:"SNI (e.g. example.com)",...s.register(o+"."+n+".sni")}),h&&((g=h[n])==null?void 0:g.sni)&&e(Ee,{children:(M=(U=h[n])==null?void 0:U.sni)==null?void 0:M.message})]}),r(z,{isInvalid:!!(h&&((X=h[n])==null?void 0:X.host)),children:[r(F,{display:"flex",pb:1,alignItems:"center",gap:1,justifyContent:"space-between",m:"0",children:[e("span",{children:c("hostsDialog.host")}),r(Be,{isLazy:!0,placement:"right",children:[e(Te,{children:e(He,{})}),e(fe,{children:r(We,{p:2,children:[e(Le,{}),e(Ue,{}),e(i,{fontSize:"xs",pr:5,children:c("hostsDialog.host.info")}),e(i,{fontSize:"xs",mt:"2",children:e(ar,{i18nKey:"hostsDialog.host.wildcard",components:{badge:e(T,{})}})}),e(i,{fontSize:"xs",children:e(ar,{i18nKey:"hostsDialog.host.multiHost",components:{badge:e(T,{})}})})]})})]})]}),e(or,{size:"sm",borderRadius:"20px",placeholder:"Host (e.g. example.com)",...s.register(o+"."+n+".host")}),h&&((oe=h[n])==null?void 0:oe.host)&&e(Ee,{children:(ye=(Fe=h[n])==null?void 0:Fe.host)==null?void 0:ye.message})]}),r(z,{isInvalid:!!(h&&((ur=h[n])==null?void 0:ur.path)),children:[r(F,{display:"flex",pb:1,alignItems:"center",gap:1,justifyContent:"space-between",m:"0",children:[e("span",{children:c("hostsDialog.path")}),r(Be,{isLazy:!0,placement:"right",children:[e(Te,{children:e(He,{})}),e(fe,{children:r(We,{p:2,children:[e(Le,{}),e(Ue,{}),e(i,{fontSize:"xs",pr:5,children:c("hostsDialog.path.info")})]})})]})]}),e(or,{size:"sm",borderRadius:"20px",placeholder:"path (e.g. /vless)",...s.register(o+"."+n+".path")}),h&&((dr=h[n])==null?void 0:dr.path)&&e(Ee,{children:(Oe=(ie=h[n])==null?void 0:ie.path)==null?void 0:Oe.message})]}),r(z,{height:"66px",children:[r(F,{display:"flex",pb:1,alignItems:"center",gap:1,justifyContent:"space-between",m:"0",children:[e("span",{children:c("hostsDialog.security")}),r(Be,{isLazy:!0,placement:"right",children:[e(Te,{children:e(He,{})}),e(fe,{children:r(We,{p:2,children:[e(Le,{}),e(Ue,{}),e(i,{fontSize:"xs",pr:5,children:c("hostsDialog.security.info")})]})})]})]}),e(_0,{size:"sm",...s.register(o+"."+n+".security"),children:dt.map(me=>e("option",{value:me.value,children:me.title},me.value))})]}),r(z,{height:"66px",children:[e(F,{display:"flex",pb:1,alignItems:"center",gap:1,justifyContent:"space-between",m:"0",children:e("span",{children:c("hostsDialog.alpn")})}),e(_0,{size:"sm",...s.register(o+"."+n+".alpn"),children:ct.map(me=>e("option",{value:me.value,children:me.title},me.value))})]}),r(z,{height:"66px",children:[e(F,{display:"flex",pb:1,alignItems:"center",gap:1,justifyContent:"space-between",m:"0",children:e("span",{children:c("hostsDialog.fingerprint")})}),e(_0,{size:"sm",...s.register(o+"."+n+".fingerprint"),children:gt.map(me=>e("option",{value:me.value,children:me.title},me.value))})]}),r(z,{isInvalid:!!(h&&((cr=h[n])==null?void 0:cr.fragment_setting)),children:[r(F,{display:"flex",pb:1,alignItems:"center",gap:1,justifyContent:"space-between",m:"0",children:[e("span",{children:c("hostsDialog.fragment")}),r(Be,{isLazy:!0,placement:"right",children:[e(Te,{children:e(He,{})}),e(fe,{children:r(We,{p:2,children:[e(Le,{}),e(Ue,{}),e(i,{fontSize:"xs",pr:5,children:c("hostsDialog.fragment.info")}),e(i,{fontSize:"xs",pr:5,pt:2,pb:1,children:c("hostsDialog.fragment.info.examples")}),e(i,{fontSize:"xs",pr:5,children:"100-200,10-20,tlshello"}),e(i,{fontSize:"xs",pr:5,children:"100-200,10-20,1-3"}),e(i,{fontSize:"xs",pr:5,pt:"3",children:c("hostsDialog.fragment.info.attention")})]})})]})]}),e(or,{size:"sm",borderRadius:"20px",placeholder:"Fragment settings by pattern",...s.register(o+"."+n+".fragment_setting")}),h&&((Qe=h[n])==null?void 0:Qe.fragment_setting)&&e(Ee,{children:(Ze=(gr=h[n])==null?void 0:gr.fragment_setting)==null?void 0:Ze.message})]}),r(z,{isInvalid:!!(h&&((Xe=h[n])==null?void 0:Xe.noise_setting)),children:[r(F,{display:"flex",pb:1,alignItems:"center",gap:1,justifyContent:"space-between",m:"0",children:[e("span",{children:c("hostsDialog.noise")}),r(Be,{isLazy:!0,placement:"right",children:[e(Te,{children:e(He,{})}),e(fe,{children:r(We,{p:2,children:[e(Le,{}),e(Ue,{}),e(i,{fontSize:"xs",pr:5,children:c("hostsDialog.noise.info")}),e(i,{fontSize:"xs",pr:5,pt:2,pb:1,children:c("hostsDialog.noise.info.examples")}),e(i,{fontSize:"xs",pr:5,children:"rand:10-20,10-20"}),e(i,{fontSize:"xs",pr:5,children:"rand:10-20,10-20&base64:7nQBAAABAAAAAAAABnQtcmluZwZtc2VkZ2UDbmV0AAABAAE=,10-25"}),e(i,{fontSize:"xs",pr:5,pt:"3",children:c("hostsDialog.noise.info.attention")})]})})]})]}),e(or,{size:"sm",borderRadius:"20px",placeholder:"Noise settings by pattern",...s.register(o+"."+n+".noise_setting")}),h&&((Je=h[n])==null?void 0:Je.noise_setting)&&e(Ee,{children:(er=(Ke=h[n])==null?void 0:Ke.noise_setting)==null?void 0:er.message})]}),r(z,{isInvalid:!!(h&&((rr=h[n])==null?void 0:rr.use_sni_as_host)),children:[e(xr,{...s.register(o+"."+n+".use_sni_as_host"),children:e(F,{children:c("hostsDialog.useSniAsHost")})}),h&&((E=h[n])==null?void 0:E.use_sni_as_host)&&e(Ee,{children:(Q=(O=h[n])==null?void 0:O.use_sni_as_host)==null?void 0:Q.message})]}),e(z,{isInvalid:!!(h&&((Ce=h[n])==null?void 0:Ce.allowinsecure)),children:r(xr,{...s.register(o+"."+n+".allowinsecure"),name:o+"."+n+".allowinsecure",children:[e(F,{children:c("hostsDialog.allowinsecure")}),h&&((Ae=h[n])==null?void 0:Ae.allowinsecure)&&e(Ee,{children:(te=(je=h[n])==null?void 0:je.allowinsecure)==null?void 0:te.message})]})}),r(z,{isInvalid:!!(h&&((Pr=h[n])==null?void 0:Pr.mux_enable)),children:[e(xr,{...s.register(o+"."+n+".mux_enable"),children:e(F,{children:c("hostsDialog.muxEnable")})}),h&&(($r=h[n])==null?void 0:$r.mux_enable)&&e(Ee,{children:(jr=(Or=h[n])==null?void 0:Or.mux_enable)==null?void 0:jr.message})]}),r(z,{isInvalid:!!(h&&((Hr=h[n])==null?void 0:Hr.random_user_agent)),children:[e(xr,{...s.register(o+"."+n+".random_user_agent"),children:e(F,{children:c("hostsDialog.randomUserAgent")})}),h&&((Er=h[n])==null?void 0:Er.random_user_agent)&&e(Ee,{children:(eo=(K0=h[n])==null?void 0:K0.random_user_agent)==null?void 0:eo.message})]})]},n)})]})})]},C.id)},C.id)}),e(q,{variant:"outline",w:"full",size:"sm",color:"",fontWeight:"normal",onClick:R,borderRadius:"20px",border:"1px dashed rgba(255, 255, 255, 0.3)",_hover:{bg:"rgba(255, 255, 255, 0.05)"},children:c("hostsDialog.addHost")})]})})]})},hi=()=>{const{isEditingHosts:o,onEditingHosts:t,refetchUsers:a,inbounds:l}=$(),{isLoading:u,hosts:s,fetchHosts:d,isPostLoading:b,setHosts:p}=bt(),y=pe(),{t:m}=V(),[_,c]=x.exports.useState({});x.exports.useEffect(()=>{o&&d()},[o]);const h=qe({resolver:kr(bi)});x.exports.useEffect(()=>{s&&o&&h.reset(s)},[s]);const R=()=>{c({}),t(!1)},D=C=>{p(C).then(()=>{y({title:m("hostsDialog.savedSuccess"),status:"success",isClosable:!0,position:"top",duration:3e3}),a()}).catch(n=>{var f,v,L,N,Z;(((f=n==null?void 0:n.response)==null?void 0:f.status)===409||((v=n==null?void 0:n.response)==null?void 0:v.status)===400)&&y({title:(N=(L=n.response)==null?void 0:L._data)==null?void 0:N.detail,status:"error",isClosable:!0,position:"top",duration:3e3}),((Z=n==null?void 0:n.response)==null?void 0:Z.status)===422&&Object.keys(n.response._data.detail).forEach(ee=>{y({title:n.response._data.detail[ee]+" ("+ee+")",status:"error",isClosable:!0,position:"top",duration:3e3})})})},B=C=>{_[String(C)]?delete _[String(C)]:_[String(C)]={},c({..._})};return r(he,{isOpen:o,onClose:R,children:[e(de,{bg:"blackAlpha.300",backdropFilter:"blur(10px)"}),r(xe,{mx:"3",w:"fit-content",maxW:"3xl",bg:"rgba(30, 35, 50, 0.95)",backdropFilter:"blur(20px) saturate(180%)",borderRadius:"30px",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.37)",_light:{bg:"rgba(255, 255, 255, 0.95)",border:"1px solid rgba(0, 0, 0, 0.1)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.15)"},children:[e(ce,{pt:6,color:"white",_light:{color:"gray.900"},children:e($e,{color:"primary",children:e(gi,{color:"white"})})}),e(ge,{mt:3,bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"full",color:"white",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(0, 0, 0, 0.1)",color:"gray.600",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.08), inset 0 1px 0 rgba(255, 255, 255, 0.5)"},_hover:{bg:"rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.95)"}}}),e(be,{w:"440px",pb:3,pt:3,children:e(Y0,{...h,children:r("form",{onSubmit:h.handleSubmit(D),children:[u&&m("hostsDialog.loading"),!u&&s&&(Object.keys(s).length>0?e(Jr,{w:"full",allowToggle:!0,allowMultiple:!0,index:Object.keys(_).map(C=>parseInt(C)),children:e(I,{w:"full",children:Object.keys(s).map((C,n)=>e(pi,{toggleAccordion:()=>B(n),isOpen:_[String(n)],hostKey:C},C))})}):"No inbound found. Please check your Xray config file."),e(S,{justifyContent:"flex-end",py:2,children:e(q,{variant:"solid",mt:"2",type:"submit",colorScheme:"primary",size:"sm",px:5,isLoading:b,disabled:b,bg:"rgba(102, 126, 234, 0.8)",backdropFilter:"blur(10px)",borderRadius:"30px",border:"1px solid rgba(255, 255, 255, 0.2)",fontSize:"sm",fontWeight:"600",color:"white",boxShadow:"0 4px 15px rgba(102, 126, 234, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.2)",_hover:{bg:"rgba(102, 126, 234, 0.9)",boxShadow:"0 6px 20px rgba(102, 126, 234, 0.5)"},_light:{bg:"rgba(102, 126, 234, 0.9)",_hover:{bg:"rgba(102, 126, 234, 1)"}},children:m("hostsDialog.apply")})})]})})})]})]})},m0=(o,t,a)=>{if(o.response&&o.response._data){if(typeof o.response._data.detail=="string")return t({title:o.response._data.detail,status:"error",isClosable:!0,position:"top",duration:3e3});if(typeof o.response._data.detail=="object"&&a){Object.keys(o.response._data.detail).forEach(l=>a.setError(l,{message:o.response._data.detail[l]}));return}}return t({title:"Something went wrong!",status:"error",isClosable:!0,position:"top",duration:3e3})},f0=(o,t)=>t({title:o,status:"success",isClosable:!0,position:"top",duration:3e3}),pt=({deleteCallback:o})=>{const{deleteNode:t,deletingNode:a,setDeletingNode:l}=sr(),{t:u}=V(),s=pe(),d=Kr(),b=()=>{l(null)},{isLoading:p,mutate:y}=lr(t,{onSuccess:()=>{f0(u("deleteNode.deleteSuccess",{name:a&&a.name}),s),l(null),d.invalidateQueries(Cr),o&&o()},onError:m=>{m0(m,s)}});return r(he,{isCentered:!0,isOpen:!!a,onClose:b,size:"sm",children:[e(de,{bg:"blackAlpha.300",backdropFilter:"blur(10px)"}),r(xe,{mx:"3",bg:"rgba(30, 35, 50, 0.95)",backdropFilter:"blur(20px) saturate(180%)",borderRadius:"30px",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.37)",_light:{bg:"rgba(255, 255, 255, 0.95)",border:"1px solid rgba(0, 0, 0, 0.1)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.15)"},children:[e(ce,{pt:6,color:"white",_light:{color:"gray.900"},children:e($e,{color:"red",children:e(Mr,{})})}),e(ge,{mt:3,bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"full",color:"white",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(0, 0, 0, 0.1)",color:"gray.600",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.08), inset 0 1px 0 rgba(255, 255, 255, 0.5)"},_hover:{bg:"rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.95)"}}}),r(be,{children:[e(i,{fontWeight:"semibold",fontSize:"lg",color:"white",_light:{color:"gray.900"},children:u("deleteNode.title")}),a&&e(i,{mt:1,fontSize:"sm",color:"gray.400",_light:{color:"gray.600"},children:e(ar,{components:{b:e("b",{})},children:u("deleteNode.prompt",{name:a.name})})})]}),r(ve,{display:"flex",borderTop:"1px solid rgba(255, 255, 255, 0.08)",_light:{borderTop:"1px solid rgba(0, 0, 0, 0.08)"},children:[e(w,{as:"button",onClick:b,mr:3,w:"full",bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"30px",px:4,py:2,fontSize:"sm",fontWeight:"500",color:"white",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(0, 0, 0, 0.1)",color:"gray.700",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.08), inset 0 1px 0 rgba(255, 255, 255, 0.5)"},_hover:{bg:"rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.95)"}},textAlign:"center",children:u("cancel")}),r(w,{as:"button",onClick:()=>y(),w:"full",bg:"rgba(229, 62, 62, 0.8)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"30px",px:4,py:2,fontSize:"sm",fontWeight:"600",color:"white",boxShadow:"0 4px 15px rgba(229, 62, 62, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.2)",_hover:{bg:"rgba(229, 62, 62, 0.9)",boxShadow:"0 6px 20px rgba(229, 62, 62, 0.5), inset 0 1px 0 rgba(255, 255, 255, 0.3)"},display:"flex",alignItems:"center",justifyContent:"center",gap:2,children:[p&&e(Ge,{size:"xs"}),u("delete")]})]})]})]})},r0={baseStyle:{strokeWidth:"2px",w:4,h:4}},po=A(Yt,r0),xi=A(qt,r0),ho=A(Gt,r0),xo=A(q0,r0),mi=A(q0,r0),M0=[{title:"No",value:"no_reset"},{title:"Daily",value:"day"},{title:"Weekly",value:"week"},{title:"Monthly",value:"month"},{title:"Annually",value:"year"}],fr={active:{statusColor:"green",bandWidthColor:"primary",icon:po},connected:{statusColor:"green",bandWidthColor:"primary",icon:po},disabled:{statusColor:"gray",bandWidthColor:"gray",icon:xi},expired:{statusColor:"orange",bandWidthColor:"orange",icon:xo},on_hold:{statusColor:"purple",bandWidthColor:"purple",icon:mi},connecting:{statusColor:"orange",bandWidthColor:"orange",icon:xo},limited:{statusColor:"red",bandWidthColor:"red",icon:ho},error:{statusColor:"red",bandWidthColor:"red",icon:ho}},S0=o=>{let t={status:"",time:""};if(o){const a=K.duration(K(o*1e3).utc().diff(K())),l=Math.abs(Math.ceil(a.asDays()));K(o*1e3).utc().isAfter(K().utc())?(t.status="expires",t.time=String(l)):(t.status="expired",t.time=String(l))}return t},ht=({expiryDate:o,status:t,compact:a=!1,showDetail:l=!0,extraText:u})=>{const{t:s}=V(),d=S0(o),b=fr[t].icon;return r(ke,{children:[r(T,{colorScheme:fr[t].statusColor,rounded:"full",display:"inline-flex",px:3,py:1,columnGap:a?1:2,alignItems:"center",children:[e(b,{w:a?3:4}),l&&r(i,{textTransform:"capitalize",fontSize:a?".7rem":".875rem",lineHeight:a?"1rem":"1.25rem",fontWeight:"medium",letterSpacing:"tighter",children:[t&&s(`nodeModal.status.${t}`),u&&`: ${u}`]})]}),l&&o&&e(i,{display:"inline-block",fontSize:"xs",fontWeight:"medium",ml:"2",color:"gray.600",_dark:{color:"gray.400"},children:s(d.status,{time:d.time})})]})};A(Qt,{baseStyle:{w:5,h:5}});const fi=A(Lr,{baseStyle:{w:5,h:5,strokeWidth:2}}),Si=({toggleAccordion:o,node:t})=>{const{updateNode:a,reconnectNode:l,setDeletingNode:u}=sr(),{t:s}=V(),d=Kr(),b=pe(),p=qe({defaultValues:t,resolver:kr(X0)}),y=u.bind(null,t),{isLoading:m,mutate:_}=lr(a,{onSuccess:()=>{f0("Node updated successfully",b),d.invalidateQueries(Cr)},onError:D=>{m0(D,b,p)}}),{isLoading:c,mutate:h}=lr(l.bind(null,t),{onSuccess:()=>{d.invalidateQueries(Cr)}}),R=c?"connecting":t.status?t.status:"error";return r(Ir,{bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"20px",mb:2,color:"white",_light:{bg:"rgba(255, 255, 255, 0.6)",border:"1px solid rgba(0, 0, 0, 0.1)",color:"gray.800"},p:1,w:"full",children:[r(Br,{px:2,borderRadius:"15px",onClick:o,_hover:{bg:"rgba(255, 255, 255, 0.05)"},children:[r(S,{w:"full",justifyContent:"space-between",pr:2,children:[e(i,{as:"span",fontWeight:"medium",fontSize:"sm",flex:"1",textAlign:"left",children:t.name}),r(S,{children:[t.xray_version&&e(T,{rounded:"full",display:"inline-flex",px:3,py:1,bg:"rgba(59, 130, 246, 0.15)",color:"blue.300",border:"1px solid rgba(59, 130, 246, 0.3)",_light:{bg:"rgba(59, 130, 246, 0.1)",color:"blue.600",borderColor:"rgba(59, 130, 246, 0.2)"},children:r(i,{textTransform:"capitalize",fontSize:"0.7rem",fontWeight:"medium",letterSpacing:"tighter",children:["Xray ",t.xray_version]})}),t.status&&e(ht,{status:R,compact:!0})]})]}),e(F0,{})]}),r(Tr,{px:4,py:4,children:[R==="error"&&e(Zr,{status:"error",size:"xs",bg:"rgba(30, 35, 50, 0.8)",backdropFilter:"blur(10px)",borderRadius:"20px",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 4px 15px rgba(0, 0, 0, 0.2)",color:"white",_light:{bg:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(0, 0, 0, 0.1)",color:"gray.800",boxShadow:"0 4px 15px rgba(0, 0, 0, 0.1)"},children:r(w,{children:[r(S,{w:"full",children:[e(t0,{w:4}),e(i,{marginInlineEnd:0,children:t.message})]}),e(S,{justifyContent:"flex-end",w:"full",children:e(q,{size:"sm","aria-label":"reconnect node",leftIcon:e(u0,{}),onClick:()=>h(),disabled:c,bg:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",borderRadius:"30px",border:"1px solid rgba(255, 255, 255, 0.1)",color:"white",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.1)",_hover:{bg:"rgba(255, 255, 255, 0.1)"},_light:{bg:"rgba(255, 255, 255, 0.8)",color:"gray.700",border:"1px solid rgba(0, 0, 0, 0.1)",_hover:{bg:"rgba(255, 255, 255, 0.95)"}},children:s(c?"nodes.reconnecting":"nodes.reconnect")})})]})}),e(xt,{form:p,mutate:_,isLoading:m,submitBtnText:s("nodes.editNode"),btnLeftAdornment:e(G,{label:s("delete"),placement:"top",children:e(P,{size:"sm","aria-label":"delete node",onClick:y,bg:"rgba(239, 68, 68, 0.15)",backdropFilter:"blur(10px)",borderRadius:"full",border:"1px solid rgba(239, 68, 68, 0.3)",color:"red.400",boxShadow:"0 2px 8px rgba(239, 68, 68, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.1)",_hover:{bg:"rgba(239, 68, 68, 0.25)",boxShadow:"0 4px 12px rgba(239, 68, 68, 0.3)"},_light:{bg:"rgba(239, 68, 68, 0.1)",color:"red.600",border:"1px solid rgba(239, 68, 68, 0.2)",_hover:{bg:"rgba(239, 68, 68, 0.15)"}},children:e(Mr,{})})})})]})]})},wi=({toggleAccordion:o,resetAccordions:t})=>{const a=pe(),{t:l}=V(),u=Kr(),{addNode:s}=sr(),d=qe({resolver:kr(X0),defaultValues:{...L0(),add_as_new_host:!1}}),{isLoading:b,mutate:p}=lr(s,{onSuccess:()=>{f0(l("nodes.addNodeSuccess",{name:d.getValues("name")}),a),u.invalidateQueries(Cr),d.reset(),t()},onError:y=>{m0(y,a,d)}});return r(Ir,{bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"20px",mb:2,color:"white",_light:{bg:"rgba(255, 255, 255, 0.6)",border:"1px solid rgba(0, 0, 0, 0.1)",color:"gray.800"},p:1,w:"full",children:[e(Br,{px:2,borderRadius:"15px",onClick:o,_hover:{bg:"rgba(255, 255, 255, 0.05)"},children:r(i,{as:"span",fontWeight:"medium",fontSize:"sm",flex:"1",textAlign:"left",display:"flex",gap:1,children:[e(fi,{display:"inline-block"})," ",e("span",{children:l("nodes.addNewMarzbanNode")})]})}),e(Tr,{px:4,py:4,children:e(xt,{form:d,mutate:p,isLoading:b,submitBtnText:l("nodes.addNode"),btnProps:{variant:"solid"},addAsHost:!0})})]})},xt=({form:o,mutate:t,isLoading:a,submitBtnText:l,btnProps:u={},btnLeftAdornment:s,addAsHost:d=!1})=>{const{t:b}=V(),[p,y]=x.exports.useState(!1),{data:m,isLoading:_}=g0({queryKey:"node-settings",queryFn:()=>j("/node/settings")});function c(h){if(document.body.createTextRange){const R=document.body.createTextRange();R.moveToElementText(h),R.select()}else if(window.getSelection){const R=window.getSelection(),D=document.createRange();D.selectNodeContents(h),R.removeAllRanges(),R.addRange(D)}else console.warn("Could not select text in node: Unsupported browser.")}return e("form",{onSubmit:o.handleSubmit(h=>t(h)),children:r(I,{w:"full",spacing:4,align:"stretch",children:[m&&m.certificate&&e(Zr,{status:"info",alignItems:"start",bg:"rgba(30, 35, 50, 0.8)",backdropFilter:"blur(10px)",borderRadius:"20px",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 4px 15px rgba(0, 0, 0, 0.2)",color:"white",_light:{bg:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(0, 0, 0, 0.1)",color:"gray.800",boxShadow:"0 4px 15px rgba(0, 0, 0, 0.1)"},children:r(Go,{display:"flex",flexDirection:"column",overflow:"hidden",children:[e("span",{children:b("nodes.connection-hint")}),r(S,{justify:"end",py:2,children:[e(q,{as:"a",size:"xs",download:"ssl_client_cert.pem",href:URL.createObjectURL(new Blob([m.certificate],{type:"text/plain"})),bg:"rgba(102, 126, 234, 0.8)",backdropFilter:"blur(10px)",borderRadius:"20px",border:"1px solid rgba(255, 255, 255, 0.2)",color:"white",fontSize:"xs",px:3,boxShadow:"0 2px 8px rgba(102, 126, 234, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.2)",_hover:{bg:"rgba(102, 126, 234, 0.9)",boxShadow:"0 4px 12px rgba(102, 126, 234, 0.4)"},_light:{bg:"rgba(102, 126, 234, 0.9)",_hover:{bg:"rgba(102, 126, 234, 1)"}},children:b("nodes.download-certificate")}),e(G,{placement:"top",label:b("nodes.show-certificate"),children:e(P,{"aria-label":b("nodes.show-certificate"),onClick:y.bind(null,!p),size:"xs",bg:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",borderRadius:"full",border:"1px solid rgba(255, 255, 255, 0.1)",color:"white",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.1)",_hover:{bg:"rgba(255, 255, 255, 0.1)"},_light:{bg:"rgba(255, 255, 255, 0.8)",color:"gray.700",border:"1px solid rgba(0, 0, 0, 0.1)",_hover:{bg:"rgba(255, 255, 255, 0.95)"}},children:p?e(Xt,{width:"15px"}):e(Zt,{width:"15px"})})})]}),e(Qo,{in:p,animateOpacity:!0,children:e(i,{bg:"rgba(0, 0, 0, 0.2)",_dark:{bg:"rgba(0, 0, 0, 0.2)"},_light:{bg:"rgba(255, 255, 255, 0.4)"},rounded:"md",p:"2",lineHeight:"1.2",fontSize:"10px",fontFamily:"Courier",whiteSpace:"pre",overflow:"auto",onClick:h=>{c(h.target)},children:m.certificate})})]})}),r(le,{columns:{base:1,md:2},spacing:4,children:[r(z,{children:[e(F,{fontSize:"sm",mb:1,children:b("nodes.nodeName")}),e(Y,{size:"md",placeholder:"Marzban-S2",...o.register("name"),borderRadius:"20px",bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.7)",border:"1px solid rgba(0, 0, 0, 0.1)"},_focus:{borderColor:"blue.400",boxShadow:"0 0 0 1px blue.400"}})]}),e(z,{display:"flex",alignItems:"flex-end",children:e(se,{name:"status",control:o.control,render:({field:h})=>r(S,{w:"full",justify:"space-between",children:[e(F,{fontSize:"sm",mb:0,children:b("usersTable.status")}),e(Se,{colorScheme:"green",isChecked:h.value!=="disabled",onChange:R=>{R.target.checked?h.onChange("connecting"):h.onChange("disabled")}})]})})}),r(z,{children:[e(F,{fontSize:"sm",mb:1,children:b("nodes.nodeAddress")}),e(Y,{size:"md",placeholder:"51.20.12.13",...o.register("address"),borderRadius:"20px",bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.7)",border:"1px solid rgba(0, 0, 0, 0.1)"},_focus:{borderColor:"blue.400",boxShadow:"0 0 0 1px blue.400"}})]}),r(z,{children:[e(F,{fontSize:"sm",mb:1,children:b("nodes.nodePort")}),e(Y,{size:"md",placeholder:"62050",...o.register("port"),borderRadius:"20px",bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.7)",border:"1px solid rgba(0, 0, 0, 0.1)"},_focus:{borderColor:"blue.400",boxShadow:"0 0 0 1px blue.400"}})]}),r(z,{children:[e(F,{fontSize:"sm",mb:1,children:b("nodes.nodeAPIPort")}),e(Y,{size:"md",placeholder:"62051",...o.register("api_port"),borderRadius:"20px",bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.7)",border:"1px solid rgba(0, 0, 0, 0.1)"},_focus:{borderColor:"blue.400",boxShadow:"0 0 0 1px blue.400"}})]}),r(z,{children:[e(F,{fontSize:"sm",mb:1,children:b("nodes.usageCoefficient")}),e(Y,{size:"md",placeholder:"1",...o.register("usage_coefficient"),borderRadius:"20px",bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.7)",border:"1px solid rgba(0, 0, 0, 0.1)"},_focus:{borderColor:"blue.400",boxShadow:"0 0 0 1px blue.400"}})]})]}),d&&e(z,{py:1,children:e(xr,{...o.register("add_as_new_host"),children:e(F,{m:0,children:b("nodes.addHostForEveryInbound")})})}),r(S,{w:"full",justify:"flex-end",pt:2,children:[s,e(q,{mr:2,px:5,py:2,bg:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)",color:"white",borderRadius:"30px",_hover:{bg:"rgba(255, 255, 255, 0.1)"},_light:{bg:"rgba(255, 255, 255, 0.8)",color:"gray.700",border:"1px solid rgba(0, 0, 0, 0.1)",_hover:{bg:"rgba(255, 255, 255, 0.95)"}},onClick:()=>o.reset(),children:b("cancel")}),e(q,{type:"submit",px:5,py:2,isLoading:a,bg:"rgba(102, 126, 234, 0.8)",backdropFilter:"blur(10px)",borderRadius:"30px",border:"1px solid rgba(255, 255, 255, 0.2)",fontSize:"sm",fontWeight:"600",color:"white",boxShadow:"0 4px 15px rgba(102, 126, 234, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.2)",_hover:{bg:"rgba(102, 126, 234, 0.9)",boxShadow:"0 6px 20px rgba(102, 126, 234, 0.5)"},_light:{bg:"rgba(102, 126, 234, 0.9)",_hover:{bg:"rgba(102, 126, 234, 1)"}},...u,children:l})]})]})})},_i=()=>{const{isEditingNodes:o,onEditingNodes:t}=$(),{t:a}=V(),[l,u]=x.exports.useState({}),{data:s,isLoading:d}=x0(),b=()=>{u({}),t(!1)},p=y=>{l[String(y)]?delete l[String(y)]:l[String(y)]={},u({...l})};return r(ke,{children:[r(he,{isOpen:o,onClose:b,children:[e(de,{backdropFilter:"blur(10px)",bg:"rgba(0, 0, 0, 0.4)"}),r(xe,{mx:"3",maxW:"900px",minW:"800px",bg:"rgba(30, 35, 50, 0.95)",backdropFilter:"blur(20px) saturate(180%)",borderRadius:"30px",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.37)",_light:{bg:"rgba(255, 255, 255, 0.95)",border:"1px solid rgba(0, 0, 0, 0.1)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.15)"},children:[e(ce,{pt:6,fontSize:"lg",fontWeight:"bold",color:"white",_light:{color:"gray.900"},children:a("nodes.title")}),e(ge,{mt:3,bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"full",color:"white",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(0, 0, 0, 0.1)",color:"gray.600",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.08), inset 0 1px 0 rgba(255, 255, 255, 0.5)"},_hover:{bg:"rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.95)"}}}),r(be,{pb:4,children:[d&&"loading...",e(Jr,{w:"full",allowToggle:!0,index:Object.keys(l).map(y=>parseInt(y)),children:r(I,{w:"full",children:[!d&&s&&s.map((y,m)=>e(Si,{toggleAccordion:()=>p(m),node:y},y.name)),e(wi,{toggleAccordion:()=>p((s||[]).length),resetAccordions:()=>u({})})]})})]})]})]}),e(pt,{deleteCallback:()=>u({})})]})};function yi(o){const t=360/o,a=90,l=47,u=[];for(let s=0;s<o;s++){const d=s*t%360+140,b=Ci(d,a,l);u.push(b)}return u}function Ci(o,t,a){o/=360,t/=100,a/=100;let l,u,s;if(t===0)l=u=s=a;else{const b=(m,_,c)=>(c<0&&(c+=1),c>1&&(c-=1),c<.16666666666666666?m+(_-m)*6*c:c<.5?_:c<.6666666666666666?m+(_-m)*(.6666666666666666-c)*6:m),p=a<.5?a*(1+t):a+t-a*t,y=2*a-p;l=Math.round(b(y,p,o+1/3)*255),u=Math.round(b(y,p,o)*255),s=Math.round(b(y,p,o-1/3)*255)}const d=b=>{const p=b.toString(16);return p.length===1?"0"+p:p};return`#${d(l)}${d(u)}${d(s)}`}const mo=({border:o,...t})=>{const{getInputProps:a,getRadioProps:l}=ea(t),u=mr({base:"xs",md:"sm"});return r(w,{as:"label",children:[e("input",{...a()}),e(w,{...l(),minW:"48px",w:"full",h:"full",textAlign:"center",cursor:"pointer",fontSize:u,borderWidth:o?"1px":"0px",borderRadius:"15px",bg:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",transition:"all 0.2s",_light:{bg:"rgba(255, 255, 255, 0.5)"},_hover:{bg:"rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.7)"}},_checked:{bg:"primary.500",color:"white",borderColor:"primary.500",boxShadow:"0 0 10px rgba(99, 102, 241, 0.3)"},_focus:{boxShadow:"outline"},px:3,py:1,children:t.children})]})},mt=({onChange:o,defaultValue:t,...a})=>{const{t:l,i18n:u}=V();nr();const s=mr({base:["7h","1d","3d","1w"],md:["7h","1d","3d","1w","1m","3m"]}),d={h:"hour",d:"day",w:"week",m:"month",y:"year"},b=mr({base:[{title:"hours",options:["1h","3h","6h","12h"]},{title:"days",options:["1d","2d","3d","4d"]},{title:"weeks",options:["1w","2w","3w","4w"]},{title:"months",options:["1m","2m","3m","6m"]}],md:[{title:"hours",options:["1h","2h","3h","6h","8h","12h"]},{title:"days",options:["1d","2d","3d","4d","5d","6d"]},{title:"weeks",options:["1w","2w","3w","4w"]},{title:"months",options:["1m","2m","3m","6m","8m"]}]}),{getRootProps:p,getRadioProps:y,setValue:m}=Jt({name:"filter",defaultValue:t,onChange:H=>{if(H==="custom")return;h(),s.indexOf(H)>=0?(B(l("userDialog.custom")),n(!1)):(B(l("userDialog.custom")+` (${H})`),n(!0));const g=Number(H.substring(0,H.length-1)),U=d[H[H.length-1]];o(H,{start:K().utc().subtract(g,U).format("YYYY-MM-DDTHH:00:00")})}}),{isOpen:_,onOpen:c,onClose:h}=yr(),R=x.exports.useRef(null);Kt({ref:R,handler:h});const[D,B]=x.exports.useState(l("userDialog.custom")),[C,n]=x.exports.useState(!1),[f,v]=x.exports.useState(0),L=mr({base:1,md:2}),N=mr({base:"xs",md:"sm"}),[Z,ee]=x.exports.useState(null),[W,ae]=x.exports.useState(null),ne=H=>{const[g,U]=H;W&&!U?(ee(null),ae(null)):(ee(g),ae(U),g&&U&&(h(),o("custom",{start:K(g).format("YYYY-MM-DDT00:00:00"),end:K(U).format("YYYY-MM-DDT23:59:59")})))};return r(I,{...a,children:[f==0&&r(le,{...p(),gap:1,display:"flex",borderWidth:"1px",borderRadius:"20px",borderColor:"rgba(255, 255, 255, 0.1)",bg:"rgba(255, 255, 255, 0.03)",backdropFilter:"blur(10px)",p:1,_light:{borderColor:"rgba(0, 0, 0, 0.1)",bg:"rgba(255, 255, 255, 0.5)"},minW:{base:"320px",md:"400px"},children:[s.map(H=>e(mo,{...y({value:H}),children:H},H)),e(w,{onClick:()=>{ee(null),ae(null),c()},cursor:"pointer",borderRadius:"15px",w:"full",fontSize:N,px:3,py:1,bg:C?"primary.500":"rgba(255, 255, 255, 0.05)",color:C?"white":"unset",boxShadow:C?"0 0 10px rgba(99, 102, 241, 0.3)":"none",transition:"all 0.2s",_hover:{bg:C?"primary.500":"rgba(255, 255, 255, 0.1)"},_light:{bg:C?"primary.500":"rgba(255, 255, 255, 0.5)",_hover:{bg:C?"primary.500":"rgba(255, 255, 255, 0.7)"}},borderColor:C?"primary.500":"unset",children:r(S,{children:[e(i,{children:D}),e(Fr,{as:oo,boxSize:"18px"})]})})]}),f==1&&r(S,{onClick:c,cursor:"pointer",fontSize:N,borderRadius:"20px",px:3,py:1,minW:{base:"320px",md:"400px"},borderWidth:"1px",borderColor:"rgba(255, 255, 255, 0.1)",bg:"rgba(255, 255, 255, 0.03)",backdropFilter:"blur(10px)",_light:{borderColor:"rgba(0, 0, 0, 0.1)",bg:"rgba(255, 255, 255, 0.5)"},children:[e(i,{w:"full",color:Z?"unset":"gray.500",children:Z?K(Z).format("YYYY-MM-DD (00:00)"):l("userDialog.startDate")}),e(Fr,{as:Zo,boxSize:"18px"}),e(i,{w:"full",color:W?"unset":"gray.500",children:W?K(W).format("YYYY-MM-DD (23:59)"):l("userDialog.endDate")}),e(Fr,{as:oo,boxSize:"18px"})]}),e(I,{ref:R,marginTop:"40px !important",borderRadius:"20px",borderWidth:"1px",borderColor:"rgba(255, 255, 255, 0.1)",position:"absolute",zIndex:"1",backgroundColor:"rgba(30, 35, 50, 0.95)",backdropFilter:"blur(20px)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)",_light:{backgroundColor:"rgba(255, 255, 255, 0.95)",borderColor:"rgba(0, 0, 0, 0.1)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)"},display:_?"unset":"none",children:r(b0,{onChange:H=>v(H),children:[r(G0,{children:[e(Wr,{fontSize:N,children:l("userDialog.relative")}),e(Wr,{fontSize:N,children:l("userDialog.absolute")})]}),r(p0,{children:[e(ir,{children:b.map(H=>e(I,{alignItems:"start",pl:2,pr:2,children:r(S,{justifyItems:"flex-start",mb:4,children:[e(i,{fontSize:N,minW:"60px",children:l("userDialog."+H.title)}),H.options.map(g=>e(mo,{border:!0,...y({value:g}),children:g},g+".custom"))]})},H.title))}),e(ir,{className:"datepicker-panel",children:e(I,{children:e(Xo,{locale:u.language.toLocaleLowerCase(),selected:Z,onChange:ne,startDate:Z,endDate:W,selectsRange:!0,maxDate:new Date,monthsShown:L,peekNextMonth:!1,inline:!0})})})]})]})})]})};function d0(o,t,a=[],l=[]){const u=Re(a.reduce((s,d)=>s+=d,0));return{series:a,options:{labels:l,chart:{width:"100%",height:"100%",type:"donut",animations:{enabled:!1}},title:{text:`${t}${u}`,align:"center",style:{fontWeight:"var(--chakra-fontWeights-medium)",color:o==="dark"?"var(--chakra-colors-gray-300)":void 0}},legend:{position:"bottom",labels:{colors:o==="dark"?"#CBD5E0":void 0,useSeriesColors:!1}},stroke:{width:1,colors:void 0},dataLabels:{formatter:(s,{seriesIndex:d,w:b})=>Re(b.config.series[d],1)},tooltip:{custom:({series:s,seriesIndex:d,dataPointIndex:b,w:p})=>{const y=Re(s[d],1),m=Math.max(s.reduce((c,h)=>c+=h),1),_=Math.round(s[d]/m*1e3)/10+"%";return`
            <div style="
                    background-color: ${p.globals.colors[d]};
                    padding-left:12px;
                    padding-right:12px;
                    padding-top:6px;
                    padding-bottom:6px;
                    font-size:0.725rem;
                  "
            >
              ${p.config.labels[d]}: <b>${_}, ${y}</b>
            </div>
          `}},colors:yi(a.length)}}}const vi=A(j0,{baseStyle:{w:5,h:5}}),ki=()=>{const{isShowingNodesUsage:o,onShowingNodesUsage:t}=$(),{fetchNodesUsage:a}=sr(),{t:l}=V(),[u,s]=x.exports.useState(!1),{colorMode:d}=nr(),b=l("userDialog.total"),[p,y]=x.exports.useState(d0(d,b)),[m,_]=x.exports.useState("1m"),c=D=>{a(D).then(B=>{const C=[],n=[];for(const f in B.usages){const v=B.usages[f];n.push(v.uplink+v.downlink),C.push(v.node_name)}y(d0(d,b,n,C))})};x.exports.useEffect(()=>{o&&c({start:K().utc().subtract(30,"day").format("YYYY-MM-DDTHH:00:00")})},[o]);const h=()=>{t(!1),_("1m")},R=u;return r(he,{isOpen:o,onClose:h,size:"2xl",children:[e(de,{bg:"blackAlpha.300",backdropFilter:"blur(10px)"}),r(xe,{mx:"3",w:"full",children:[e(ce,{pt:6,children:r(S,{gap:2,children:[e($e,{color:"primary",children:e(vi,{color:"white"})}),e(i,{fontWeight:"semibold",fontSize:"lg",children:l("header.nodesUsage")})]})}),e(ge,{mt:3,disabled:R}),e(be,{children:r(I,{gap:4,children:[e(mt,{defaultValue:m,onChange:(D,B)=>{_(D),c(B)}}),e(w,{justifySelf:"center",w:"full",maxW:"300px",mt:"4",children:e(x.exports.Suspense,{fallback:e(O0,{isIndeterminate:!0}),children:e(Jo,{options:p.options,series:p.series,type:"donut",height:"500px"})})})]})}),e(ve,{mt:"3"})]})]})},fo=A(ra),Ei=A(Zo,{baseStyle:{w:6,h:6,color:"gray.600",_dark:{color:"white"}}}),Di=A(oa,{baseStyle:{w:6,h:6,color:"gray.600",_dark:{color:"white"}}}),zi=A(Ko,{baseStyle:{w:5,h:5}}),Ri=()=>{const{QRcodeLinks:o,setQRCode:t,setSubLink:a,subscribeUrl:l}=$(),u=o!==null,[s,d]=x.exports.useState(0),{t:b}=V(),p=()=>{t(null),a(null)},y=String(l).startsWith("/")?window.location.origin+l:String(l);return r(he,{isOpen:u,onClose:p,children:[e(de,{bg:"blackAlpha.300",backdropFilter:"blur(10px)"}),r(xe,{mx:"3",w:"fit-content",maxW:"3xl",bg:"rgba(30, 35, 50, 0.95)",backdropFilter:"blur(20px) saturate(180%)",borderRadius:"30px",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.37)",_light:{bg:"rgba(255, 255, 255, 0.95)",border:"1px solid rgba(0, 0, 0, 0.1)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.15)"},children:[e(ce,{pt:6,color:"white",_light:{color:"gray.900"},children:e($e,{color:"primary",children:e(zi,{color:"white"})})}),e(ge,{mt:3,bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"full",color:"white",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(0, 0, 0, 0.1)",color:"gray.600",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.08), inset 0 1px 0 rgba(255, 255, 255, 0.5)"},_hover:{bg:"rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.95)"}}}),o&&r(be,{gap:{base:"20px",lg:"50px"},pr:{lg:"60px"},px:{base:"50px"},display:"flex",justifyContent:"center",flexDirection:{base:"column",lg:"row"},children:[l&&r(I,{children:[e(fo,{mx:"auto",size:300,p:"2",level:"L",includeMargin:!1,value:y,bg:"white"}),e(i,{display:"block",textAlign:"center",pb:3,mt:1,children:b("qrcodeDialog.sublink")})]}),r(w,{w:"300px",children:[e(ta,{centerPadding:"0px",centerMode:!0,slidesToShow:1,slidesToScroll:1,dots:!1,afterChange:d,onInit:()=>d(0),nextArrow:e(P,{size:"sm",position:"absolute",display:"flex !important",_before:{content:'""'},"aria-label":"next",mr:"-4",bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"full",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(0, 0, 0, 0.1)",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.08), inset 0 1px 0 rgba(255, 255, 255, 0.5)"},_hover:{bg:"rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.95)"}},children:e(Ei,{})}),prevArrow:e(P,{size:"sm",position:"absolute",display:"flex !important",_before:{content:'""'},"aria-label":"prev",ml:"-4",bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"full",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(0, 0, 0, 0.1)",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.08), inset 0 1px 0 rgba(255, 255, 255, 0.5)"},_hover:{bg:"rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.95)"}},children:e(Di,{})}),children:o.map((m,_)=>e(S,{children:e(fo,{mx:"auto",size:300,p:"2",level:"L",includeMargin:!1,value:m,bg:"white"})},_))}),r(i,{display:"block",textAlign:"center",pb:3,mt:1,children:[s+1," / ",o.length]})]})]})]})]})},Fi=A(aa,{baseStyle:{w:5,h:5}}),Ai=()=>{const[o,t]=x.exports.useState(!1),{isResetingAllUsage:a,onResetAllUsage:l,resetAllUsage:u}=$(),{t:s}=V(),d=pe(),b=()=>{l(!1)},p=()=>{t(!0),u().then(()=>{d({title:s("resetAllUsage.success"),status:"success",isClosable:!0,position:"top",duration:3e3})}).catch(()=>{d({title:s("resetAllUsage.error"),status:"error",isClosable:!0,position:"top",duration:3e3})}).finally(()=>{t(!1)})};return r(he,{isCentered:!0,isOpen:a,onClose:b,size:"sm",children:[e(de,{bg:"blackAlpha.300",backdropFilter:"blur(10px)"}),r(xe,{mx:"3",bg:"rgba(30, 35, 50, 0.95)",backdropFilter:"blur(20px) saturate(180%)",borderRadius:"30px",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.37)",_light:{bg:"rgba(255, 255, 255, 0.95)",border:"1px solid rgba(0, 0, 0, 0.1)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.15)"},children:[e(ce,{pt:6,color:"white",_light:{color:"gray.900"},children:e($e,{color:"red",children:e(Fi,{})})}),e(ge,{mt:3,bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"full",color:"white",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(0, 0, 0, 0.1)",color:"gray.600",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.08), inset 0 1px 0 rgba(255, 255, 255, 0.5)"},_hover:{bg:"rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.95)"}}}),r(be,{children:[e(i,{fontWeight:"semibold",fontSize:"lg",color:"white",_light:{color:"gray.900"},children:s("resetAllUsage.title")}),a&&e(i,{mt:1,fontSize:"sm",color:"gray.400",_light:{color:"gray.600"},children:s("resetAllUsage.prompt")})]}),r(ve,{display:"flex",borderTop:"1px solid rgba(255, 255, 255, 0.08)",_light:{borderTop:"1px solid rgba(0, 0, 0, 0.08)"},children:[e(q,{size:"sm",onClick:b,mr:3,w:"full",variant:"outline",bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"30px",color:"white",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(0, 0, 0, 0.1)",color:"gray.700",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.08), inset 0 1px 0 rgba(255, 255, 255, 0.5)"},_hover:{bg:"rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.95)"}},children:s("cancel")}),e(q,{size:"sm",w:"full",colorScheme:"red",onClick:p,leftIcon:o?e(Ge,{size:"xs"}):void 0,bg:"rgba(229, 62, 62, 0.8)",backdropFilter:"blur(10px)",borderRadius:"30px",border:"1px solid rgba(255, 255, 255, 0.2)",color:"white",boxShadow:"0 4px 15px rgba(229, 62, 62, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.2)",_hover:{bg:"rgba(229, 62, 62, 0.9)",boxShadow:"0 6px 20px rgba(229, 62, 62, 0.5)"},_light:{bg:"rgba(229, 62, 62, 0.9)",_hover:{bg:"rgba(229, 62, 62, 1)"}},children:s("reset")})]})]})]})},Ii=A(Ye,{baseStyle:{w:5,h:5}}),Bi=()=>{const[o,t]=x.exports.useState(!1),{resetUsageUser:a,resetDataUsage:l}=$(),{t:u}=V(),s=pe(),d=()=>{$.setState({resetUsageUser:null})},b=()=>{a&&(t(!0),l(a).then(()=>{s({title:u("resetUserUsage.success",{username:a.username}),status:"success",isClosable:!0,position:"top",duration:3e3})}).catch(()=>{s({title:u("resetUserUsage.error"),status:"error",isClosable:!0,position:"top",duration:3e3})}).finally(()=>{t(!1)}))};return r(he,{isCentered:!0,isOpen:!!a,onClose:d,size:"sm",children:[e(de,{bg:"blackAlpha.300",backdropFilter:"blur(10px)"}),r(xe,{mx:"3",bg:"rgba(30, 35, 50, 0.95)",backdropFilter:"blur(20px) saturate(180%)",borderRadius:"30px",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.37)",_light:{bg:"rgba(255, 255, 255, 0.95)",border:"1px solid rgba(0, 0, 0, 0.1)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.15)"},children:[e(ce,{pt:6,color:"white",_light:{color:"gray.900"},children:e($e,{color:"blue",children:e(Ii,{})})}),e(ge,{mt:3,bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"full",color:"white",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(0, 0, 0, 0.1)",color:"gray.600",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.08), inset 0 1px 0 rgba(255, 255, 255, 0.5)"},_hover:{bg:"rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.95)"}}}),r(be,{children:[e(i,{fontWeight:"semibold",fontSize:"lg",color:"white",_light:{color:"gray.900"},children:u("resetUserUsage.title")}),a&&e(i,{mt:1,fontSize:"sm",color:"gray.400",_light:{color:"gray.600"},children:e(ar,{components:{b:e("b",{})},children:u("resetUserUsage.prompt",{username:a.username})})})]}),r(ve,{display:"flex",borderTop:"1px solid rgba(255, 255, 255, 0.08)",_light:{borderTop:"1px solid rgba(0, 0, 0, 0.08)"},children:[e(q,{size:"sm",onClick:d,mr:3,w:"full",variant:"outline",bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"30px",color:"white",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(0, 0, 0, 0.1)",color:"gray.700",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.08), inset 0 1px 0 rgba(255, 255, 255, 0.5)"},_hover:{bg:"rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.95)"}},children:u("cancel")}),e(q,{size:"sm",w:"full",colorScheme:"blue",onClick:b,leftIcon:o?e(Ge,{size:"xs"}):void 0,bg:"rgba(66, 153, 225, 0.8)",backdropFilter:"blur(10px)",borderRadius:"30px",border:"1px solid rgba(255, 255, 255, 0.2)",color:"white",boxShadow:"0 4px 15px rgba(66, 153, 225, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.2)",_hover:{bg:"rgba(66, 153, 225, 0.9)",boxShadow:"0 6px 20px rgba(66, 153, 225, 0.5)"},_light:{bg:"rgba(66, 153, 225, 0.9)",_hover:{bg:"rgba(66, 153, 225, 1)"}},children:u("reset")})]})]})]})},Ti=A(Ye,{baseStyle:{w:5,h:5}}),Wi=()=>{const[o,t]=x.exports.useState(!1),{revokeSubscriptionUser:a,revokeSubscription:l}=$(),{t:u}=V(),s=pe(),d=()=>{$.setState({revokeSubscriptionUser:null})},b=()=>{a&&(t(!0),l(a).then(()=>{s({title:u("revokeUserSub.success",{username:a.username}),status:"success",isClosable:!0,position:"top",duration:3e3})}).catch(()=>{s({title:u("revokeUserSub.error"),status:"error",isClosable:!0,position:"top",duration:3e3})}).finally(()=>{t(!1)}))};return r(he,{isCentered:!0,isOpen:!!a,onClose:d,size:"sm",children:[e(de,{bg:"blackAlpha.300",backdropFilter:"blur(10px)"}),r(xe,{mx:"3",children:[e(ce,{pt:6,children:e($e,{color:"blue",children:e(Ti,{})})}),e(ge,{mt:3}),r(be,{children:[e(i,{fontWeight:"semibold",fontSize:"lg",children:u("revokeUserSub.title")}),a&&e(i,{mt:1,fontSize:"sm",_dark:{color:"gray.400"},color:"gray.600",children:e(ar,{components:{b:e("b",{})},children:u("revokeUserSub.prompt",{username:a.username})})})]}),r(ve,{display:"flex",children:[e(q,{size:"sm",onClick:d,mr:3,w:"full",variant:"outline",children:u("cancel")}),e(q,{size:"sm",w:"full",colorScheme:"blue",onClick:b,leftIcon:o?e(Ge,{size:"xs"}):void 0,children:u("revoke")})]})]})]})},Li=A(Mo,{baseStyle:{strokeWidth:"2px",w:5,h:5}}),Ui=({inbound:o,...t})=>{const{getCheckboxProps:a,getInputProps:l,getLabelProps:u,htmlProps:s}=rt(t),d=l();return r(w,{as:"label",children:[e("input",{...d}),r(w,{w:"fll",position:"relative",...s,cursor:"pointer",borderRadius:"12px",border:"none",bg:"rgba(255, 255, 255, 0.04)",transition:"all 0.2s",_light:{bg:"rgba(255, 255, 255, 0.5)"},_hover:{bg:"rgba(255, 255, 255, 0.08)",_light:{bg:"rgba(255, 255, 255, 0.7)"}},display:"flex",alignItems:"center",justifyContent:"space-between",overflow:"hidden",_checked:{bg:"rgba(72, 187, 120, 0.12)",boxShadow:"none",fontWeight:"medium",_light:{bg:"rgba(72, 187, 120, 0.1)",boxShadow:"none"},"& p":{opacity:1}},__css:{"& p":{opacity:.8}},textTransform:"capitalize",px:3,py:2,fontWeight:"medium",...a(),children:[e(xr,{size:"sm",w:"full",maxW:"full",color:"gray.700",_dark:{color:"gray.300"},textTransform:"uppercase",colorScheme:"primary",className:"inbound-item",isChecked:d.checked,pointerEvents:"none",flexGrow:1,children:e(S,{justify:"space-between",w:"full",maxW:"calc(100% - 20px)",spacing:0,gap:2,overflow:"hidden",children:r(i,{isTruncated:!0,...u(),fontSize:"xs",children:[o.tag," ",r(i,{as:"span",children:["(",o.network,")"]})]})})}),o.tls&&o.tls!="none"&&e(T,{fontSize:"xs",opacity:".8",size:"xs",children:o.tls})]})]})},Mi=({disabled:o,title:t,description:a,toggleAccordion:l,isSelected:u,...s})=>{var n;const d=Ur(),{inbounds:b}=$(),{getCheckboxProps:p,getInputProps:y,getLabelProps:m,htmlProps:_}=rt(s),c=y(),[h]=ot({name:[`inbounds.${t}`],control:d.control}),{getCheckboxProps:R}=et({value:h,onChange:f=>{if(d.setValue(`inbounds.${t}`,f),f.length===0){const v=d.getValues("selected_proxies");d.setValue("selected_proxies",v.filter(L=>L!==t)),l()}}}),D=h&&u&&($.getState().inbounds.get(t)||[]).length!==h.length,B=($.getState().inbounds.get(t)||[]).length>0,C=!u&&!B;return r(Ir,{isDisabled:!B,borderRadius:"16px",border:"none",overflow:"hidden",bg:C?"rgba(255, 255, 255, 0.02)":u?"rgba(72, 187, 120, 0.1)":"rgba(255, 255, 255, 0.04)",boxShadow:"none",transition:"all 0.2s ease",_light:{bg:C?"rgba(0, 0, 0, 0.02)":u?"rgba(72, 187, 120, 0.08)":"rgba(255, 255, 255, 0.6)",boxShadow:"none"},_checked:{bg:"rgba(72, 187, 120, 0.12)",boxShadow:"none",_light:{bg:"rgba(72, 187, 120, 0.1)",boxShadow:"none"}},...p(),children:[r(w,{as:C?"span":"label",position:"relative",children:[D&&e(w,{position:"absolute",w:"2",h:"2",bg:"yellow.500",top:"-1",right:"-1",rounded:"full",zIndex:999}),e("input",{...c}),r(w,{w:"fll",position:"relative",..._,borderRadius:"md",cursor:C?"not-allowed":"pointer",_checked:{fontWeight:"medium",_dark:{bg:"gray.750",borderColor:"transparent"},"& > svg":{opacity:1,"&.checked":{display:"block"},"&.unchecked":{display:"none"}},"& p":{opacity:1}},__css:{"& > svg":{opacity:.3,"&.checked":{display:"none"},"&.unchecked":{display:"block"}},"& p":{opacity:.8}},textTransform:"capitalize",px:3,py:2,fontWeight:"medium",...p(),children:[e(Br,{display:c.checked&&B?"block":"none",as:"span",className:"checked",color:"primary.200",position:"absolute",right:"3",top:"3",w:"auto",p:0,onClick:l,children:e(P,{size:"sm","aria-label":"inbound settings",children:e(Li,{})})}),e(i,{fontSize:"sm",color:C?"gray.500":"white",_light:{color:C?"gray.400":"gray.700"},...m(),children:t}),e(i,{fontWeight:"medium",color:C?"gray.500":"gray.400",_light:{color:C?"gray.400":"gray.600"},fontSize:"xs",children:a})]})]}),e(Tr,{px:3,pb:3,roundedBottom:"16px",pt:3,bg:"transparent",children:r(I,{w:"full",rowGap:2,borderRadius:"12px",border:"none",bg:"rgba(255, 255, 255, 0.03)",pl:3,pr:3,pt:1.5,pb:2,_light:{bg:"rgba(255, 255, 255, 0.4)"},children:[r(I,{alignItems:"flex-start",w:"full",children:[e(i,{fontSize:"sm",children:ue("inbound")}),e(le,{gap:2,alignItems:"flex-start",w:"full",columns:1,spacing:1,children:(b.get(t)||[]).map(f=>e(Ui,{...R({value:f.tag}),inbound:f},f.tag))})]}),t==="vmess"&&u&&e(I,{alignItems:"flex-start",w:"full",children:r(z,{height:"66px",children:[e(i,{fontSize:"sm",pb:1,children:"ID"}),e(Y,{fontSize:"xs",size:"sm",borderRadius:"20px",pl:2,pr:2,placeholder:ue("userDialog.generatedByDefault"),...d.register("proxies.vmess.id")})]})}),t==="vless"&&u&&r(I,{alignItems:"flex-start",w:"full",children:[r(z,{height:"66px",children:[e(i,{fontSize:"sm",pb:1,children:"ID"}),e(Y,{fontSize:"xs",size:"sm",borderRadius:"20px",pl:2,pr:2,placeholder:ue("userDialog.generatedByDefault"),...d.register("proxies.vless.id")})]}),r(z,{height:"66px",children:[e(i,{fontSize:"sm",pb:1,children:"Flow"}),r(Sr,{children:[e(wr,{as:q,size:"sm",w:"full",textAlign:"left",fontWeight:"normal",fontSize:"xs",borderRadius:"20px",bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",color:"white",boxShadow:"inset 0 1px 0 rgba(255, 255, 255, 0.05)",_light:{bg:"rgba(255, 255, 255, 0.7)",color:"gray.800",border:"1px solid rgba(0, 0, 0, 0.1)",boxShadow:"inset 0 1px 0 rgba(255, 255, 255, 0.5)"},_hover:{bg:"rgba(255, 255, 255, 0.08)",_light:{bg:"rgba(255, 255, 255, 0.8)"}},rightIcon:e(A.span,{fontSize:"xs",opacity:.6,children:"\u25BC"}),children:d.watch("proxies.vless.flow")||((n=go[0])==null?void 0:n.title)||"Select Flow"}),e(fe,{children:e(_r,{bg:"rgba(26, 32, 44, 0.98)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"16px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",py:2,_light:{bg:"rgba(255, 255, 255, 0.98)",border:"1px solid rgba(0, 0, 0, 0.1)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.15)"},zIndex:9999,children:go.map(f=>e(_e,{bg:d.watch("proxies.vless.flow")===f.value?"linear-gradient(135deg, rgba(102, 126, 234, 0.3), rgba(128, 90, 213, 0.3))":"transparent",color:"white",fontSize:"xs",_hover:{bg:"linear-gradient(135deg, rgba(102, 126, 234, 0.3), rgba(128, 90, 213, 0.3))"},_light:{color:"gray.800",bg:d.watch("proxies.vless.flow")===f.value?"linear-gradient(135deg, rgba(102, 126, 234, 0.2), rgba(128, 90, 213, 0.2))":"transparent",_hover:{bg:"linear-gradient(135deg, rgba(102, 126, 234, 0.15), rgba(128, 90, 213, 0.15))"}},borderRadius:"8px",mx:2,onClick:()=>d.setValue("proxies.vless.flow",f.value),children:f.title},f.title))})})]})]})]}),t==="trojan"&&u&&e(I,{alignItems:"flex-start",w:"full",children:r(z,{height:"66px",children:[e(i,{fontSize:"sm",pb:1,children:ue("password")}),e(Y,{fontSize:"xs",size:"sm",borderRadius:"20px",pl:2,pr:2,placeholder:ue("userDialog.generatedByDefault"),...d.register("proxies.trojan.password")})]})}),t==="shadowsocks"&&u&&r(I,{alignItems:"flex-start",w:"full",children:[r(z,{height:"66px",children:[e(i,{fontSize:"sm",pb:1,children:ue("password")}),e(Y,{fontSize:"xs",size:"sm",borderRadius:"20px",pl:2,pr:2,placeholder:ue("userDialog.generatedByDefault"),...d.register("proxies.shadowsocks.password")})]}),r(z,{height:"66px",children:[e(i,{fontSize:"sm",pb:1,children:ue("userDialog.method")}),r(Sr,{children:[e(wr,{as:q,size:"sm",w:"full",textAlign:"left",fontWeight:"normal",fontSize:"xs",borderRadius:"20px",bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",color:"white",boxShadow:"inset 0 1px 0 rgba(255, 255, 255, 0.05)",_light:{bg:"rgba(255, 255, 255, 0.7)",color:"gray.800",border:"1px solid rgba(0, 0, 0, 0.1)",boxShadow:"inset 0 1px 0 rgba(255, 255, 255, 0.5)"},_hover:{bg:"rgba(255, 255, 255, 0.08)",_light:{bg:"rgba(255, 255, 255, 0.8)"}},rightIcon:e(A.span,{fontSize:"xs",opacity:.6,children:"\u25BC"}),children:d.watch("proxies.shadowsocks.method")||bo[0]||"Select Method"}),e(fe,{children:e(_r,{bg:"rgba(26, 32, 44, 0.98)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"16px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",py:2,maxH:"250px",overflowY:"auto",_light:{bg:"rgba(255, 255, 255, 0.98)",border:"1px solid rgba(0, 0, 0, 0.1)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.15)"},zIndex:9999,children:bo.map(f=>e(_e,{bg:d.watch("proxies.shadowsocks.method")===f?"linear-gradient(135deg, rgba(102, 126, 234, 0.3), rgba(128, 90, 213, 0.3))":"transparent",color:"white",fontSize:"xs",_hover:{bg:"linear-gradient(135deg, rgba(102, 126, 234, 0.3), rgba(128, 90, 213, 0.3))"},_light:{color:"gray.800",bg:d.watch("proxies.shadowsocks.method")===f?"linear-gradient(135deg, rgba(102, 126, 234, 0.2), rgba(128, 90, 213, 0.2))":"transparent",_hover:{bg:"linear-gradient(135deg, rgba(102, 126, 234, 0.15), rgba(128, 90, 213, 0.15))"}},borderRadius:"8px",mx:2,onClick:()=>d.setValue("proxies.shadowsocks.method",f),children:f},f))})})]})]})]})]})})]})},Ni=x.exports.forwardRef(({name:o,list:t,onChange:a,disabled:l,...u},s)=>{const d=Ur(),[b,p]=x.exports.useState([]),y=_=>{b.includes(_)?b.splice(b.indexOf(_),1):b.push(_),p([...b])},{getCheckboxProps:m}=et({value:u.value,onChange:_=>{var h;const c=_.filter(R=>!u.value.includes(R));c[0]&&d.setValue(`inbounds.${c[0]}`,(h=$.getState().inbounds.get(c[0]))==null?void 0:h.map(R=>R.tag)),p(b.filter(R=>_.find(D=>D===t[R].title))),a({target:{value:_,name:o}})}});return e(Jr,{allowToggle:!0,index:b,children:e(le,{ref:s,gap:2,alignItems:"flex-start",columns:1,spacing:1,children:t.map((_,c)=>e(Mi,{toggleAccordion:y.bind(null,c),disabled:l,title:_.title,description:_.description,isSelected:!!u.value.find(h=>h===_.title),...m({value:_.title})},_.title))})})}),Pi=A(Lr,{baseStyle:{w:5,h:5}}),$i=A(h0,{baseStyle:{w:5,h:5}}),Oi=A(j0,{baseStyle:{w:5,h:5}}),ji=o=>({...o,data_limit:o.data_limit?Number((o.data_limit/1073741824).toFixed(5)):o.data_limit,on_hold_expire_duration:o.on_hold_expire_duration?Number(o.on_hold_expire_duration/(24*60*60)):o.on_hold_expire_duration,selected_proxies:Object.keys(o.proxies)}),y0=()=>{const o=Object.fromEntries($.getState().inbounds),t={};for(const a in o)t[a]=o[a].map(l=>l.tag);return{selected_proxies:Object.keys(o),data_limit:null,expire:null,username:"",telegram_id:null,data_limit_reset_strategy:"no_reset",status:"active",on_hold_expire_duration:null,note:"",tariff_id:null,inbounds:t,proxies:{vless:{id:"",flow:""},vmess:{id:""},trojan:{password:""},shadowsocks:{password:"",method:"chacha20-ietf-poly1305"}}}},Hi=(o,t)=>{const a=o.reduce((l,u)=>({...l,[u]:{}}),{});return t&&o.forEach(l=>{t[l]&&(a[l]=t[l])}),a},Vr={username:k.string().min(1,{message:"Required"}),telegram_id:k.union([k.number(),k.string().transform(o=>o===""?null:parseInt(o)),k.null()]).optional(),tariff_id:k.union([k.number().min(1,{message:"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0430\u0440\u0438\u0444"}),k.null()]).optional(),selected_proxies:k.array(k.string()).refine(o=>o.length>0,{message:"userDialog.selectOneProtocol"}),note:k.string().nullable(),proxies:k.record(k.string(),k.record(k.string(),k.any())).transform(o=>{const t=(a,l)=>{a&&a[l]===""&&delete a[l]};return t(o.vmess,"id"),t(o.vless,"id"),t(o.trojan,"password"),t(o.shadowsocks,"password"),t(o.shadowsocks,"method"),o}),data_limit:k.string().min(0).or(k.number()).nullable().transform(o=>o?Number((parseFloat(String(o))*1073741824).toFixed(5)):0),expire:k.number().nullable(),data_limit_reset_strategy:k.string(),inbounds:k.record(k.string(),k.array(k.string())).transform(o=>(Object.keys(o).forEach(t=>{var a;Array.isArray(o[t])&&!((a=o[t])!=null&&a.length)&&delete o[t]}),o))},Vi=k.discriminatedUnion("status",[k.object({status:k.literal("active"),...Vr}),k.object({status:k.literal("disabled"),...Vr}),k.object({status:k.literal("limited"),...Vr}),k.object({status:k.literal("expired"),...Vr}),k.object({status:k.literal("on_hold"),on_hold_expire_duration:k.coerce.number().min(.1,"Required").transform(o=>o*(24*60*60)),...Vr})]),Yi=()=>{var Ze,Xe,Je,Ke,er,rr;const{editingUser:o,isCreatingNewUser:t,onCreateUser:a,editUser:l,fetchUserUsage:u,onEditingUser:s,createUser:d,onDeletingUser:b}=$(),p=!!o,y=t||p,[m,_]=x.exports.useState(!1),[c,h]=x.exports.useState(""),[R,D]=x.exports.useState([]),[B,C]=x.exports.useState(!1),n=pe(),{t:f,i18n:v}=V(),{colorMode:L}=nr(),[N,Z]=x.exports.useState(!1),ee=()=>{Z(E=>!E)},W=qe({defaultValues:y0(),resolver:kr(Vi)});x.exports.useEffect(()=>$.subscribe(E=>E.inbounds,()=>{W.reset(y0())}),[]),x.exports.useEffect(()=>{y&&(C(!0),j("/tariffs/?enabled_only=true").then(E=>D(E)).catch(E=>console.error("Failed to load tariffs:",E)).finally(()=>C(!1)))},[y]);const[ae,ne]=ot({control:W.control,name:["data_limit","status"]}),H=f("userDialog.total"),[g,U]=x.exports.useState(d0(L,H)),[M,X]=x.exports.useState("1m"),oe=E=>{u(o,E).then(O=>{const Q=[],Ce=[];for(const Ae in O.usages)Ce.push(O.usages[Ae].used_traffic),Q.push(O.usages[Ae].node_name);U(d0(L,H,Ce,Q))})};x.exports.useEffect(()=>{o&&(W.reset(ji(o)),oe({start:K().utc().subtract(30,"day").format("YYYY-MM-DDTHH:00:00")}))},[o]);const Fe=E=>{if(!p&&(!E.tariff_id||E.tariff_id<1)){W.setError("tariff_id",{type:"manual",message:"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0430\u0440\u0438\u0444"});return}_(!0);const O={edited:l,created:d},Q=p?"edited":"created";h(null);const{selected_proxies:Ce,...Ae}=E;let je={...Ae,data_limit:E.data_limit,proxies:Hi(Ce,E.proxies),data_limit_reset_strategy:E.data_limit&&E.data_limit>0?E.data_limit_reset_strategy:"no_reset",status:E.status==="active"||E.status==="disabled"||E.status==="on_hold"?E.status:"active"};O[Q](je).then(()=>{n({title:f(p?"userDialog.userEdited":"userDialog.userCreated",{username:E.username}),status:"success",isClosable:!0,position:"top",duration:3e3}),ye()}).catch(te=>{var Pr,$r,Or,jr,Hr;(((Pr=te==null?void 0:te.response)==null?void 0:Pr.status)===409||(($r=te==null?void 0:te.response)==null?void 0:$r.status)===400)&&h((jr=(Or=te==null?void 0:te.response)==null?void 0:Or._data)==null?void 0:jr.detail),((Hr=te==null?void 0:te.response)==null?void 0:Hr.status)===422&&Object.keys(te.response._data.detail).forEach(Er=>{h(te==null?void 0:te.response._data.detail[Er]),W.setError(Er,{type:"custom",message:te.response._data.detail[Er]})})}).finally(()=>{_(!1)})},ye=()=>{W.reset(y0()),a(!1),s(null),h(null),Z(!1),X("1m")},ur=()=>{$.setState({resetUsageUser:o})},dr=()=>{$.setState({revokeSubscriptionUser:o})},ie=m,Oe=ne==="on_hold",[cr,Qe]=x.exports.useState(!1),gr=()=>{Qe(!0);let E="";const O="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",Q=O.length;let Ce=0;for(;Ce<6;)E+=O.charAt(Math.floor(Math.random()*Q)),Ce+=1;return E};return r(he,{isOpen:y,onClose:ye,size:"2xl",children:[e(de,{bg:"blackAlpha.300",backdropFilter:"blur(10px)"}),e(Y0,{...W,children:e(xe,{mx:"3",bg:"rgba(30, 35, 50, 0.95)",backdropFilter:"blur(20px) saturate(180%)",borderRadius:"30px",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.37)",_light:{bg:"rgba(255, 255, 255, 0.95)",border:"1px solid rgba(0, 0, 0, 0.1)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.15)"},children:r("form",{onSubmit:W.handleSubmit(Fe),children:[e(ce,{pt:6,color:"white",_light:{color:"gray.900"},children:r(S,{gap:2,children:[e($e,{color:"primary",children:p?e($i,{color:"white"}):e(Pi,{color:"white"})}),e(i,{fontWeight:"semibold",fontSize:"lg",children:f(p?"userDialog.editUserTitle":"createNewUser")})]})}),e(ge,{mt:3,disabled:ie,bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"full",color:"white",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(0, 0, 0, 0.1)",color:"gray.600",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.08), inset 0 1px 0 rgba(255, 255, 255, 0.5)"},_hover:{bg:"rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.95)"}}}),r(be,{children:[r(No,{templateColumns:{base:"repeat(1, 1fr)",md:"repeat(2, 1fr)"},gap:3,children:[e(Gr,{children:r(I,{justifyContent:"space-between",children:[r(qr,{flexDirection:"column",gridAutoRows:"min-content",w:"full",children:[e(qr,{flexDirection:"row",w:"full",gap:2,children:r(z,{mb:"10px",children:[e(F,{children:r(qr,{gap:2,alignItems:"center",children:[f("username"),!p&&e(u0,{cursor:"pointer",className:vr({"animate-spin":cr}),onClick:()=>{const E=gr();W.setValue("username",E),setTimeout(()=>{Qe(!1)},350)}})]})}),r(S,{children:[e(hr,{size:"sm",type:"text",borderRadius:"20px",error:(Ze=W.formState.errors.username)==null?void 0:Ze.message,disabled:ie||p,...W.register("username")}),p&&e(S,{px:1,children:e(se,{name:"status",control:W.control,render:({field:E})=>e(G,{placement:"top",label:"status: "+f(`status.${E.value}`),textTransform:"capitalize",children:e(w,{display:"flex",alignItems:"center",children:e(Se,{colorScheme:"primary",isChecked:E.value==="active",onChange:O=>{O.target.checked?E.onChange("active"):E.onChange("disabled")}})})})})})]})]})}),r(z,{mb:"10px",children:[e(F,{children:"Telegram ID"}),e(hr,{size:"sm",type:"text",placeholder:"123456789",borderRadius:"20px",error:(Xe=W.formState.errors.telegram_id)==null?void 0:Xe.message,disabled:ie,...W.register("telegram_id")}),e(to,{fontSize:"xs",color:"gray.500",children:"ID \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F \u0432 Telegram (\u043D\u0435\u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u043E)"})]}),r(qr,{gap:3,mb:"10px",alignItems:"flex-end",children:[r(z,{flex:"1",children:[e(F,{children:"\u0422\u0430\u0440\u0438\u0444"}),e(se,{control:W.control,name:"tariff_id",render:({field:E})=>{const O=R.find(Q=>Q.id===E.value);return r(Sr,{children:[e(wr,{as:q,size:"sm",w:"full",textAlign:"left",fontWeight:"normal",borderRadius:"20px",bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",color:"white",boxShadow:"inset 0 1px 0 rgba(255, 255, 255, 0.05)",_light:{bg:"rgba(255, 255, 255, 0.7)",color:"gray.800",border:"1px solid rgba(0, 0, 0, 0.1)",boxShadow:"inset 0 1px 0 rgba(255, 255, 255, 0.5)"},_hover:{bg:"rgba(255, 255, 255, 0.08)",_light:{bg:"rgba(255, 255, 255, 0.8)"}},_active:{bg:"rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.85)"}},isDisabled:ie||B,rightIcon:e(A.span,{fontSize:"xs",opacity:.6,children:"\u25BC"}),children:O?`${O.name} - ${O.price} \u20BD`:"F&F"}),e(fe,{children:r(_r,{bg:"rgba(26, 32, 44, 0.98)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"16px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",py:2,_light:{bg:"rgba(255, 255, 255, 0.98)",border:"1px solid rgba(0, 0, 0, 0.1)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.15)"},zIndex:9999,children:[e(_e,{bg:"transparent",color:"gray.400",_hover:{bg:"linear-gradient(135deg, rgba(102, 126, 234, 0.3), rgba(128, 90, 213, 0.3))",color:"white"},_light:{color:"gray.500",_hover:{bg:"linear-gradient(135deg, rgba(102, 126, 234, 0.15), rgba(128, 90, 213, 0.15))",color:"gray.800"}},borderRadius:"8px",mx:2,onClick:()=>{E.onChange(null),W.setValue("expire",null),W.setValue("data_limit",0)},children:"F&F"}),R.map(Q=>r(_e,{bg:E.value===Q.id?"linear-gradient(135deg, rgba(102, 126, 234, 0.3), rgba(128, 90, 213, 0.3))":"transparent",color:"white",_hover:{bg:"linear-gradient(135deg, rgba(102, 126, 234, 0.3), rgba(128, 90, 213, 0.3))"},_light:{color:"gray.800",bg:E.value===Q.id?"linear-gradient(135deg, rgba(102, 126, 234, 0.2), rgba(128, 90, 213, 0.2))":"transparent",_hover:{bg:"linear-gradient(135deg, rgba(102, 126, 234, 0.15), rgba(128, 90, 213, 0.15))"}},borderRadius:"8px",mx:2,onClick:()=>E.onChange(Q.id),children:[Q.name," - ",Q.price," \u20BD (",Q.durationDays," \u0434\u043D., ",Q.unlimitedTraffic?"\u221E":`${(Q.trafficLimit/1073741824).toFixed(0)} GB`,")"]},Q.id))]})})]})}}),W.formState.errors.tariff_id&&e(we,{children:W.formState.errors.tariff_id.message})]}),!p&&e(se,{name:"status",control:W.control,render:({field:E})=>{const O=E.value;return e(G,{label:f("userDialog.onHold"),placement:"top",children:e(w,{display:"flex",alignItems:"center",py:2,children:e(Se,{colorScheme:"orange",size:"sm",isChecked:O==="on_hold",onChange:Q=>{Q.target.checked?E.onChange("on_hold"):E.onChange("active")}})})})}})]}),r(z,{mb:"10px",children:[e(F,{children:f("userDialog.dataLimit")}),e(se,{control:W.control,name:"data_limit",render:({field:E})=>{var O;return e(hr,{endAdornment:"GB",type:"number",size:"sm",borderRadius:"20px",onChange:E.onChange,disabled:ie,error:(O=W.formState.errors.data_limit)==null?void 0:O.message,value:E.value?String(E.value):""})}})]}),e(Qo,{in:!!(ae&&ae>0),animateOpacity:!0,style:{width:"100%"},children:r(z,{height:"66px",children:[e(F,{children:f("userDialog.periodicUsageReset")}),e(se,{control:W.control,name:"data_limit_reset_strategy",render:({field:E})=>e(Pe,{size:"sm",borderRadius:"20px",...E,disabled:ie,bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.7)",border:"1px solid rgba(0, 0, 0, 0.1)"},_disabled:{bg:"gray.600",_light:{bg:"gray.100"}},sx:{option:{bg:"rgba(30, 35, 50, 0.98)",color:"white",_light:{bg:"white",color:"gray.800"}}},children:M0.map(O=>e("option",{value:O.value,children:f("userDialog.resetStrategy"+O.title)},O.value))})})]})}),r(z,{mb:"10px",children:[e(F,{children:f(Oe?"userDialog.onHoldExpireDuration":"userDialog.expiryDate")}),Oe&&e(se,{control:W.control,name:"on_hold_expire_duration",render:({field:E})=>{var O;return e(hr,{endAdornment:"Days",type:"number",size:"sm",borderRadius:"20px",onChange:Q=>{W.setValue("expire",null),E.onChange({target:{value:Q}})},disabled:ie,error:(O=W.formState.errors.on_hold_expire_duration)==null?void 0:O.message,value:E.value?String(E.value):""})}}),!Oe&&e(se,{name:"expire",control:W.control,render:({field:E})=>{var Ae;function O(je){return K(K(je*1e3).utc()).toDate()}const{status:Q,time:Ce}=S0(E.value);return r(ke,{children:[e(Xo,{locale:v.language.toLocaleLowerCase(),dateFormat:f("dateFormat"),minDate:new Date,selected:E.value?O(E.value):void 0,onChange:je=>{W.setValue("on_hold_expire_duration",null),E.onChange({target:{value:je?K(K(je).set("hour",23).set("minute",59).set("second",59)).utc().valueOf()/1e3:0,name:"expire"}})},customInput:e(hr,{size:"sm",type:"text",borderRadius:"20px",clearable:!0,disabled:ie,error:(Ae=W.formState.errors.expire)==null?void 0:Ae.message})}),E.value?e(to,{children:f(Q,{time:Ce})}):""]})}})]}),r(z,{mb:"10px",isInvalid:!!W.formState.errors.note,children:[e(F,{children:f("userDialog.note")}),e(tt,{...W.register("note"),borderRadius:"16px",bg:"rgba(255, 255, 255, 0.03)",border:"1px solid rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.6)",border:"1px solid rgba(0, 0, 0, 0.1)"},_focus:{borderColor:"primary.500",boxShadow:"0 0 0 1px var(--chakra-colors-primary-500)"}}),e(we,{children:(Ke=(Je=W.formState.errors)==null?void 0:Je.note)==null?void 0:Ke.message})]})]}),c&&r(Zr,{status:"error",display:{base:"none",md:"flex"},children:[e(t0,{}),c]})]})}),e(Gr,{children:r(z,{isInvalid:!!((er=W.formState.errors.selected_proxies)!=null&&er.message),children:[e(F,{children:f("userDialog.protocols")}),e(se,{control:W.control,name:"selected_proxies",render:({field:E})=>e(Ni,{list:[{title:"vmess",description:f("userDialog.vmessDesc")},{title:"vless",description:f("userDialog.vlessDesc")},{title:"trojan",description:f("userDialog.trojanDesc")},{title:"shadowsocks",description:f("userDialog.shadowsocksDesc")}],disabled:ie,...E})}),e(we,{children:f((rr=W.formState.errors.selected_proxies)==null?void 0:rr.message)})]})}),p&&N&&e(Gr,{pt:6,colSpan:{base:1,md:2},children:r(I,{gap:4,children:[e(mt,{defaultValue:M,onChange:(E,O)=>{X(E),oe(O)}}),e(w,{width:{base:"100%",md:"70%"},justifySelf:"center",children:e(Jo,{options:g.options,series:g.series,type:"donut"})})]})})]}),c&&r(Zr,{mt:"3",status:"error",display:{base:"flex",md:"none"},children:[e(t0,{}),c]})]}),e(ve,{mt:"3",borderTop:"1px solid rgba(255, 255, 255, 0.08)",_light:{borderTop:"1px solid rgba(0, 0, 0, 0.08)"},children:r(S,{justifyContent:"space-between",w:"full",gap:3,flexDirection:{base:"column",sm:"row"},children:[e(S,{justifyContent:"flex-start",w:{base:"full",sm:"unset"},children:p&&r(ke,{children:[e(G,{label:f("delete"),placement:"top",children:e(P,{"aria-label":"Delete",size:"sm",bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"full",color:"red.400",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(0, 0, 0, 0.1)",color:"red.500",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.08), inset 0 1px 0 rgba(255, 255, 255, 0.5)"},_hover:{bg:"rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.95)"}},onClick:()=>{b(o),ye()},children:e(Mr,{})})}),e(G,{label:f("userDialog.usage"),placement:"top",children:e(P,{"aria-label":"usage",size:"sm",bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"full",color:"white",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(0, 0, 0, 0.1)",color:"gray.600",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.08), inset 0 1px 0 rgba(255, 255, 255, 0.5)"},_hover:{bg:"rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.95)"}},onClick:ee,children:e(Oi,{})})}),e(w,{as:"button",type:"button",onClick:ur,bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"30px",px:4,py:2,fontSize:"sm",color:"white",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(0, 0, 0, 0.1)",color:"gray.700",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.08), inset 0 1px 0 rgba(255, 255, 255, 0.5)"},_hover:{bg:"rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.95)"}},children:f("userDialog.resetUsage")}),e(w,{as:"button",type:"button",onClick:dr,bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"30px",px:4,py:2,fontSize:"sm",color:"white",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(0, 0, 0, 0.1)",color:"gray.700",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.08), inset 0 1px 0 rgba(255, 255, 255, 0.5)"},_hover:{bg:"rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.95)"}},children:f("userDialog.revokeSubscription")})]})}),e(S,{w:"full",maxW:{md:"50%",base:"full"},justify:"end",children:r(w,{as:"button",type:"submit",bg:"rgba(102, 126, 234, 0.8)",borderRadius:"30px",border:"1px solid rgba(255, 255, 255, 0.2)",px:6,py:2.5,fontSize:"sm",fontWeight:"600",color:"white",boxShadow:"0 4px 15px rgba(102, 126, 234, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.2)",opacity:ie?.5:1,cursor:ie?"not-allowed":"pointer",_hover:ie?{}:{bg:"rgba(102, 126, 234, 0.9)",boxShadow:"0 6px 20px rgba(102, 126, 234, 0.5), inset 0 1px 0 rgba(255, 255, 255, 0.3)"},display:"flex",alignItems:"center",gap:2,children:[m&&e(Ge,{size:"xs"}),f(p?"userDialog.editUser":"createUser")]})})]})})]})})})]})},qi="modulepreload",Gi=function(o){return"/dashboard/"+o},So={},Qi=function(t,a,l){if(!a||a.length===0)return t();const u=document.getElementsByTagName("link");return Promise.all(a.map(s=>{if(s=Gi(s),s in So)return;So[s]=!0;const d=s.endsWith(".css"),b=d?'[rel="stylesheet"]':"";if(!!l)for(let m=u.length-1;m>=0;m--){const _=u[m];if(_.href===s&&(!d||_.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${b}`))return;const y=document.createElement("link");if(y.rel=d?"stylesheet":qi,d||(y.as="script",y.crossOrigin=""),y.href=s,document.head.appendChild(y),d)return new Promise((m,_)=>{y.addEventListener("load",m),y.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>t())},ze=({variant:o="default",elevated:t=!1,children:a,...l})=>e(w,{...{default:{bg:"rgba(255, 255, 255, 0.08)",borderColor:"rgba(255, 255, 255, 0.18)"},light:{bg:"rgba(255, 255, 255, 0.15)",borderColor:"rgba(255, 255, 255, 0.25)"},dark:{bg:"rgba(0, 0, 0, 0.2)",borderColor:"rgba(255, 255, 255, 0.08)"},accent:{bg:"rgba(102, 126, 234, 0.1)",borderColor:"rgba(102, 126, 234, 0.3)"}}[o],backdropFilter:"blur(20px) saturate(180%)",boxShadow:t?`
            0 12px 48px 0 rgba(31, 38, 135, 0.5),
            inset 0 2px 4px rgba(255, 255, 255, 0.15),
            inset 0 -2px 4px rgba(0, 0, 0, 0.1)
          `:`
            0 8px 32px 0 rgba(31, 38, 135, 0.37),
            inset 0 2px 4px rgba(255, 255, 255, 0.1),
            inset 0 -2px 4px rgba(0, 0, 0, 0.1)
          `,borderRadius:"24px",borderWidth:"1px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",...l,children:a}),J0=({candyVariant:o="primary",children:t,...a})=>{const l={primary:"#667eea",success:"#4facfe",warning:"#fa709a",danger:"#ff6b6b",secondary:"#f093fb"},u={primary:"rgba(102, 126, 234, 0.4)",success:"rgba(79, 172, 254, 0.4)",warning:"rgba(250, 112, 154, 0.4)",danger:"rgba(255, 107, 107, 0.4)",secondary:"rgba(240, 147, 251, 0.4)"};return e(q,{bg:l[o],color:"white",boxShadow:`
        0 4px 15px 0 ${u[o]},
        inset 0 -2px 8px rgba(0, 0, 0, 0.2),
        inset 0 2px 8px rgba(255, 255, 255, 0.2)
      `,borderRadius:"16px",border:"2px solid rgba(255, 255, 255, 0.2)",fontWeight:"600",h:"48px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",_hover:{transform:"translateY(-2px)",boxShadow:`
          0 6px 20px 0 ${u[o]},
          inset 0 -2px 8px rgba(0, 0, 0, 0.2),
          inset 0 2px 8px rgba(255, 255, 255, 0.3)
        `},_active:{transform:"translateY(0)",boxShadow:`
          0 2px 10px 0 ${u[o]},
          inset 0 2px 8px rgba(0, 0, 0, 0.3)
        `},...a,children:t})},Zi=o=>x.exports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","data-name":"Layer 1",width:782.04441,height:701.88002,viewBox:"0 0 782.04441 701.88002",xmlnsXlink:"http://www.w3.org/1999/xlink",...o},x.exports.createElement("path",{d:"M609.48783,100.59015l-25.44631,6.56209L270.53735,187.9987,245.091,194.56079A48.17927,48.17927,0,0,0,210.508,253.17865L320.849,681.05606a48.17924,48.17924,0,0,0,58.61776,34.58317l.06572-.01695,364.26536-93.93675.06572-.01695a48.17923,48.17923,0,0,0,34.58309-58.6178l-110.341-427.87741A48.17928,48.17928,0,0,0,609.48783,100.59015Z",transform:"translate(-208.9778 -99.05999)",fill:"#f2f2f2"}),x.exports.createElement("path",{d:"M612.94784,114.00532l-30.13945,7.77236L278.68955,200.20385l-30.139,7.77223a34.30949,34.30949,0,0,0-24.6275,41.74308l110.341,427.87741a34.30946,34.30946,0,0,0,41.7431,24.62736l.06572-.01695,364.26536-93.93674.06619-.01707a34.30935,34.30935,0,0,0,24.627-41.7429l-110.341-427.87741A34.30938,34.30938,0,0,0,612.94784,114.00532Z",transform:"translate(-208.9778 -99.05999)",fill:"#fff"}),x.exports.createElement("path",{d:"M590.19,252.56327,405.917,300.08359a8.01411,8.01411,0,0,1-4.00241-15.52046l184.273-47.52033A8.01412,8.01412,0,0,1,590.19,252.56327Z",transform:"translate(-208.9778 -99.05999)",fill:"#f2f2f2"}),x.exports.createElement("path",{d:"M628.955,270.49906,412.671,326.27437a8.01411,8.01411,0,1,1-4.00241-15.52046l216.284-55.77531a8.01411,8.01411,0,0,1,4.00242,15.52046Z",transform:"translate(-208.9778 -99.05999)",fill:"#f2f2f2"}),x.exports.createElement("path",{d:"M620.45825,369.93676l-184.273,47.52032a8.01411,8.01411,0,1,1-4.00242-15.52046l184.273-47.52032a8.01411,8.01411,0,1,1,4.00241,15.52046Z",transform:"translate(-208.9778 -99.05999)",fill:"#f2f2f2"}),x.exports.createElement("path",{d:"M659.22329,387.87255l-216.284,55.77531a8.01411,8.01411,0,1,1-4.00242-15.52046l216.284-55.77531a8.01411,8.01411,0,0,1,4.00242,15.52046Z",transform:"translate(-208.9778 -99.05999)",fill:"#f2f2f2"}),x.exports.createElement("path",{d:"M650.72653,487.31025l-184.273,47.52033a8.01412,8.01412,0,0,1-4.00242-15.52047l184.273-47.52032a8.01411,8.01411,0,0,1,4.00242,15.52046Z",transform:"translate(-208.9778 -99.05999)",fill:"#f2f2f2"}),x.exports.createElement("path",{d:"M689.49156,505.246l-216.284,55.77532a8.01412,8.01412,0,1,1-4.00241-15.52047l216.284-55.77531a8.01411,8.01411,0,0,1,4.00242,15.52046Z",transform:"translate(-208.9778 -99.05999)",fill:"#f2f2f2"}),x.exports.createElement("path",{d:"M374.45884,348.80871l-65.21246,16.817a3.847,3.847,0,0,1-4.68062-2.76146L289.5963,304.81607a3.847,3.847,0,0,1,2.76145-4.68061l65.21247-16.817a3.847,3.847,0,0,1,4.68061,2.76145l14.96947,58.04817A3.847,3.847,0,0,1,374.45884,348.80871Z",transform:"translate(-208.9778 -99.05999)",fill:"#e6e6e6"}),x.exports.createElement("path",{d:"M404.72712,466.1822l-65.21247,16.817a3.847,3.847,0,0,1-4.68062-2.76146l-14.96946-58.04816A3.847,3.847,0,0,1,322.626,417.509l65.21246-16.817a3.847,3.847,0,0,1,4.68062,2.76145l14.96946,58.04817A3.847,3.847,0,0,1,404.72712,466.1822Z",transform:"translate(-208.9778 -99.05999)",fill:"#e6e6e6"}),x.exports.createElement("path",{d:"M434.99539,583.55569l-65.21246,16.817a3.847,3.847,0,0,1-4.68062-2.76145l-14.96946-58.04817a3.847,3.847,0,0,1,2.76145-4.68062l65.21247-16.817a3.847,3.847,0,0,1,4.68061,2.76146l14.96947,58.04816A3.847,3.847,0,0,1,434.99539,583.55569Z",transform:"translate(-208.9778 -99.05999)",fill:"#e6e6e6"}),x.exports.createElement("path",{d:"M863.63647,209.0517H487.31811a48.17928,48.17928,0,0,0-48.125,48.12512V699.05261a48.17924,48.17924,0,0,0,48.125,48.12507H863.63647a48.17924,48.17924,0,0,0,48.125-48.12507V257.17682A48.17928,48.17928,0,0,0,863.63647,209.0517Z",transform:"translate(-208.9778 -99.05999)",fill:"#e6e6e6"}),x.exports.createElement("path",{d:"M863.637,222.90589H487.31811a34.30948,34.30948,0,0,0-34.271,34.27093V699.05261a34.30947,34.30947,0,0,0,34.271,34.27088H863.637a34.30936,34.30936,0,0,0,34.27051-34.27088V257.17682A34.30937,34.30937,0,0,0,863.637,222.90589Z",transform:"translate(-208.9778 -99.05999)",fill:"#fff"}),x.exports.createElement("circle",{cx:694.19401,cy:614.02963,r:87.85039,fill:"#3182CE"}),x.exports.createElement("path",{d:"M945.18722,701.63087H914.63056V671.07421a11.45875,11.45875,0,0,0-22.9175,0v30.55666H861.1564a11.45875,11.45875,0,0,0,0,22.9175h30.55666V755.105a11.45875,11.45875,0,1,0,22.9175,0V724.54837h30.55666a11.45875,11.45875,0,0,0,0-22.9175Z",transform:"translate(-208.9778 -99.05999)",fill:"#fff"}),x.exports.createElement("path",{d:"M807.00068,465.71551H616.699a8.01412,8.01412,0,1,1,0-16.02823H807.00068a8.01412,8.01412,0,0,1,0,16.02823Z",transform:"translate(-208.9778 -99.05999)",fill:"#e6e6e6"}),x.exports.createElement("path",{d:"M840.05889,492.76314H616.699a8.01412,8.01412,0,1,1,0-16.02823H840.05889a8.01411,8.01411,0,1,1,0,16.02823Z",transform:"translate(-208.9778 -99.05999)",fill:"#e6e6e6"}),x.exports.createElement("path",{d:"M807.00068,586.929H616.699a8.01412,8.01412,0,1,1,0-16.02823H807.00068a8.01411,8.01411,0,0,1,0,16.02823Z",transform:"translate(-208.9778 -99.05999)",fill:"#e6e6e6"}),x.exports.createElement("path",{d:"M840.05889,613.97661H616.699a8.01412,8.01412,0,1,1,0-16.02823H840.05889a8.01412,8.01412,0,1,1,0,16.02823Z",transform:"translate(-208.9778 -99.05999)",fill:"#e6e6e6"}),x.exports.createElement("path",{d:"M574.07028,505.04162H506.72434a3.847,3.847,0,0,1-3.84278-3.84278V441.25158a3.847,3.847,0,0,1,3.84278-3.84278h67.34594a3.847,3.847,0,0,1,3.84278,3.84278v59.94726A3.847,3.847,0,0,1,574.07028,505.04162Z",transform:"translate(-208.9778 -99.05999)",fill:"#e6e6e6"}),x.exports.createElement("path",{d:"M574.07028,626.25509H506.72434a3.847,3.847,0,0,1-3.84278-3.84278V562.46505a3.847,3.847,0,0,1,3.84278-3.84278h67.34594a3.847,3.847,0,0,1,3.84278,3.84278v59.94726A3.847,3.847,0,0,1,574.07028,626.25509Z",transform:"translate(-208.9778 -99.05999)",fill:"#e6e6e6"}),x.exports.createElement("path",{d:"M807.21185,330.781H666.91017a8.01411,8.01411,0,0,1,0-16.02823H807.21185a8.01411,8.01411,0,0,1,0,16.02823Z",transform:"translate(-208.9778 -99.05999)",fill:"#ccc"}),x.exports.createElement("path",{d:"M840.27007,357.82862H666.91017a8.01411,8.01411,0,1,1,0-16.02822h173.3599a8.01411,8.01411,0,0,1,0,16.02822Z",transform:"translate(-208.9778 -99.05999)",fill:"#ccc"}),x.exports.createElement("path",{d:"M635.85911,390.6071H506.51316a3.847,3.847,0,0,1-3.84277-3.84277V285.81706a3.847,3.847,0,0,1,3.84277-3.84277H635.85911a3.847,3.847,0,0,1,3.84277,3.84277V386.76433A3.847,3.847,0,0,1,635.85911,390.6071Z",transform:"translate(-208.9778 -99.05999)",fill:"#ccc"})),Xi=o=>{if(!o)return null;const t=new Date(`${o}Z`);return Math.floor(t.getTime()/1e3)},wo=({lastOnline:o})=>{const t=Math.floor(Date.now()/1e3),a=Xi(o);return!o||a===null?e(w,{border:"1px solid",borderColor:"gray.400",_dark:{borderColor:"gray.600"},className:"circle"}):t-a<=60?e(w,{bg:"green.400",_dark:{bg:"green.400"},boxShadow:"0 0 8px rgba(72, 187, 120, 0.6), 0 0 16px rgba(72, 187, 120, 0.3)",className:"circle pulse green"}):e(w,{bg:"gray.400",_dark:{bg:"gray.600"},className:"circle"})},Ji=o=>{if(!o)return null;const t=new Date(o+"Z");return Math.floor(t.getTime()/1e3)},_o=({lastOnline:o})=>{const t=Math.floor(Date.now()/1e3),a=Ji(o),l=a?t-a:null,u=a?S0(a):{status:"",time:"Not Connected Yet"};return e(i,{display:"inline-block",fontSize:"xs",fontWeight:"medium",ml:"2",color:"gray.600",_dark:{color:"gray.400"},children:l&&l<=60?"Online":l?`${u.time} ago`:u.time})},Ki=A(ia,{baseStyle:{w:4,h:4}}),el=A(la,{baseStyle:{w:4,h:4}}),yo=5;function rl(o,t,a){if(a<yo)throw new Error(`Must allow at least ${yo} page items`);if(a%2===0)throw new Error("Must allow odd number of page items");if(o<a)return[...new Array(o).keys()];const l=Math.max(0,Math.min(o-a,t-Math.floor(a/2))),u=new Array(a);for(let s=0;s<a;s+=1)u[s]=s+l;return u[0]>0&&(u[0]=0,u[1]="prev-more"),u[u.length-1]<o-1&&(u[u.length-1]=o-1,u[u.length-2]="next-more"),u}const ol=()=>{const{filters:o,onFilterChange:t,users:{total:a}}=$(),{limit:l,offset:u}=o,s=(u||0)/(l||1),d=Math.ceil(a/(l||1)),b=rl(d,s,7),p=_=>{t({...o,offset:_*l})},y=_=>{t({...o,limit:parseInt(_.target.value)}),$a(_.target.value)},{t:m}=V();return r(S,{justifyContent:"space-between",py:4,px:4,w:"full",display:"flex",columnGap:{lg:4,md:0},rowGap:{md:0,base:4},flexDirection:{md:"row",base:"column"},borderTop:"1px solid rgba(255, 255, 255, 0.08)",_light:{borderTop:"1px solid rgba(0, 0, 0, 0.08)"},children:[e(w,{order:{base:2,md:1},children:r(S,{children:[r(Pe,{minW:"60px",value:l,onChange:y,size:"sm",borderRadius:"12px",bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",color:"white",_light:{bg:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(0, 0, 0, 0.1)",color:"gray.900"},_focus:{border:"1px solid rgba(102, 126, 234, 0.5)",boxShadow:"0 0 0 1px rgba(102, 126, 234, 0.3)"},children:[e("option",{children:"10"}),e("option",{children:"20"}),e("option",{children:"30"})]}),e(i,{whiteSpace:"nowrap",fontSize:"sm",color:"gray.400",_light:{color:"gray.600"},children:m("itemsPerPage")})]})}),r(S,{spacing:1,order:{base:1,md:2},children:[r(w,{as:"button",onClick:s>0&&d>0?p.bind(null,s-1):void 0,opacity:s===0||d===0?.4:1,cursor:s===0||d===0?"not-allowed":"pointer",bg:"rgba(255, 255, 255, 0.05)",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.1)",px:3,py:1.5,fontSize:"sm",color:"white",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:1,_hover:s===0||d===0?{}:{bg:"rgba(255, 255, 255, 0.1)"},_light:{bg:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(0, 0, 0, 0.1)",color:"gray.700",_hover:s===0||d===0?{}:{bg:"rgba(255, 255, 255, 0.95)"}},children:[e(Ki,{}),m("previous")]}),b.map(_=>typeof _=="string"?e(w,{px:3,py:1.5,fontSize:"sm",color:"gray.400",children:"..."},_):e(w,{as:"button",onClick:p.bind(null,_),bg:_===s?"rgba(102, 126, 234, 0.8)":"rgba(255, 255, 255, 0.05)",borderRadius:"12px",border:"1px solid",borderColor:_===s?"rgba(102, 126, 234, 0.5)":"rgba(255, 255, 255, 0.1)",px:3,py:1.5,fontSize:"sm",fontWeight:_===s?"600":"normal",color:"white",transition:"all 0.2s ease",_hover:{bg:_===s?"rgba(102, 126, 234, 0.9)":"rgba(255, 255, 255, 0.1)"},_light:{bg:_===s?"rgba(102, 126, 234, 0.8)":"rgba(255, 255, 255, 0.8)",border:"1px solid",borderColor:_===s?"rgba(102, 126, 234, 0.5)":"rgba(0, 0, 0, 0.1)",color:_===s?"white":"gray.700"},children:_+1},_)),r(w,{as:"button",onClick:s+1<d&&d>0?p.bind(null,s+1):void 0,opacity:s+1===d||d===0?.4:1,cursor:s+1===d||d===0?"not-allowed":"pointer",bg:"rgba(255, 255, 255, 0.05)",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.1)",px:3,py:1.5,fontSize:"sm",color:"white",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:1,_hover:s+1===d||d===0?{}:{bg:"rgba(255, 255, 255, 0.1)"},_light:{bg:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(0, 0, 0, 0.1)",color:"gray.700",_hover:s+1===d||d===0?{}:{bg:"rgba(255, 255, 255, 0.95)"}},children:[m("next"),e(el,{})]})]})]})},C0=({expiryDate:o,status:t,compact:a=!1,showDetail:l=!0,extraText:u})=>{const{t:s}=V(),d=S0(o),b=fr[t].icon;return r(ke,{children:[r(T,{colorScheme:fr[t].statusColor,rounded:"full",display:"inline-flex",px:3,py:1,columnGap:a?1:2,alignItems:"center",backdropFilter:"blur(8px)",border:"1px solid",borderColor:"rgba(255, 255, 255, 0.1)",_light:{borderColor:"rgba(0, 0, 0, 0.08)"},children:[e(b,{w:a?3:4}),l&&r(i,{textTransform:"capitalize",fontSize:a?".7rem":".875rem",lineHeight:a?"1rem":"1.25rem",fontWeight:"medium",letterSpacing:"tighter",children:[t&&s(`status.${t}`),u&&`: ${u}`]})]}),l&&o&&e(i,{display:"inline-block",fontSize:"xs",fontWeight:"medium",ml:"2",color:"gray.600",_dark:{color:"gray.400"},children:s(d.status,{time:d.time})})]})},tl=A(Zi),Nr={baseStyle:{w:{base:4,md:5},h:{base:4,md:5}}},al=A(na,Nr),il=A(Q0,Nr),Co=A(sa,Nr),ll=A(Vo,Nr),nl=A(Ko,Nr),sl=A(h0,Nr),ul=A(Q0,{baseStyle:{width:"15px",height:"15px"}}),dl=o=>{for(var t=0;t<M0.length;t++){const a=M0[t];if(a.value==o)return a.title}return"No"},vo=o=>{const{used:t,total:a,dataLimitResetStrategy:l,totalUsedTraffic:u}=o,s=a===0||a===null,d=!s&&t/a*100>=100,b=s?100:Math.min(t/a*100,100);return e(S,{justifyContent:"space-between",fontSize:"sm",fontWeight:"medium",color:d?"red.400":"gray.300",_dark:{color:d?"red.400":"gray.300"},_light:{color:d?"red.500":"gray.600"},children:r(i,{children:[Re(t),e(i,{as:"span",color:"gray.500",mx:1,children:"/"}),s?e(i,{as:"span",fontFamily:"system-ui",children:"\u221E"}):e(i,{as:"span",children:Re(a)}),!s&&r(i,{as:"span",color:d?"red.400":"primary.400",ml:2,fontSize:"xs",children:["(",b.toFixed(0),"%)"]})]})})},cl=o=>{const{used:t,total:a,dataLimitResetStrategy:l,totalUsedTraffic:u,...s}=o,d=a===0||a===null,b=!d&&t/a*100>=100;return r(ke,{children:[e(ua,{orientation:"horizontal",value:d?100:Math.min(t/a*100,100),colorScheme:b?"red":"primary",...s,children:e(da,{h:"8px",borderRadius:"full",bg:"rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(0, 0, 0, 0.08)"},children:e(ca,{borderRadius:"full",boxShadow:b?"0 0 8px rgba(245, 101, 101, 0.5)":"0 0 8px rgba(128, 90, 213, 0.4)"})})}),r(S,{justifyContent:"space-between",fontSize:"xs",fontWeight:"medium",color:"gray.600",_dark:{color:"gray.400"},children:[r(i,{children:[Re(t)," /"," ",d?e(i,{as:"span",fontFamily:"system-ui",children:"\u221E"}):Re(a)+(l&&l!=="no_reset"?" "+ue("userDialog.resetStrategy"+dl(l)):"")]}),r(i,{children:[ue("usersTable.total"),": ",Re(u)]})]})]})},Yr=({sort:o,column:t})=>o.includes(t)?e(ul,{transform:o.startsWith("-")?void 0:"rotate(180deg)"}):null,gl=o=>{const{filters:t,users:{users:a},users:l,onEditingUser:u,onFilterChange:s}=$(),{t:d}=V(),[b,p]=x.exports.useState([]),[y,m]=x.exports.useState(void 0),_=mr({base:120,lg:72})||72,[c,h]=x.exports.useState(`${_}px`),R=mr({base:!1,md:!0});x.exports.useEffect(()=>{const v=()=>{const L=document.querySelectorAll("#filters")[0];L&&h(`${L.offsetHeight}px`)};return v(),window.addEventListener("scroll",v),()=>window.removeEventListener("scroll",v)},[]),x.exports.useEffect(()=>{Qi(()=>Promise.resolve().then(()=>Wa),void 0).then(({fetch:v})=>{v("/tariffs/").then(L=>p(L)).catch(L=>console.error("Failed to load tariffs:",L))})},[]);const D=a.length!==l.total,B=v=>{if(!v)return"-";const L=b.find(N=>N.id===v);return L?L.name:`ID: ${v}`},C=v=>{let L=t.sort;L.includes(v)?L.startsWith("-")?L="-created_at":L="-"+v:L=v,s({sort:L})},n=v=>{s({status:v.target.value.length>0?v.target.value:void 0})},f=v=>{m(v===y?void 0:v)};return e(w,{bg:"rgba(255, 255, 255, 0.03)",backdropFilter:"blur(20px) saturate(180%)",borderRadius:"30px",border:"1px solid rgba(255, 255, 255, 0.08)",boxShadow:"0 8px 32px 0 rgba(31, 38, 135, 0.15)",overflow:"hidden",_light:{bg:"rgba(255, 255, 255, 0.7)",border:"1px solid rgba(0, 0, 0, 0.08)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.08)"},children:r(w,{id:"users-table",overflowX:{base:"unset",md:"unset"},children:[e(w,{display:{base:"block",md:"none"},children:e(Jr,{allowMultiple:!0,index:y,children:r(a0,{orientation:"vertical",...o,variant:"unstyled",children:[e(i0,{position:"relative",bg:"rgba(102, 126, 234, 0.2)",_light:{bg:"rgba(102, 126, 234, 0.15)"},children:r(De,{children:[e(re,{minW:"120px",pl:4,pr:4,cursor:"pointer",onClick:C.bind(null,"username"),color:"rgba(255, 255, 255, 0.8)",_light:{color:"gray.700"},borderBottom:"1px solid rgba(255, 255, 255, 0.1)",children:r(S,{children:[e("span",{children:d("users")}),e(Yr,{sort:t.sort,column:"username"})]})}),e(re,{minW:"50px",pl:0,pr:0,w:"140px",cursor:"pointer",color:"rgba(255, 255, 255, 0.8)",_light:{color:"gray.700"},children:r(S,{spacing:0,position:"relative",children:[r(i,{position:"absolute",userSelect:"none",pointerEvents:"none",zIndex:1,w:"100%",children:[d("usersTable.status"),t.status?": "+t.status:""]}),r(Pe,{value:t.sort,fontSize:"xs",fontWeight:"extrabold",textTransform:"uppercase",cursor:"pointer",p:0,border:0,h:"auto",w:"auto",icon:e(ke,{}),_focusVisible:{border:"0 !important"},onChange:n,sx:{option:{bg:"rgba(30, 40, 55, 0.98)",backdropFilter:"blur(20px)",color:"white",py:"8px",px:"12px",fontSize:"sm",fontWeight:"medium",textTransform:"uppercase",letterSpacing:"0.02em",_hover:{bg:"rgba(102, 126, 234, 0.3)"},_light:{bg:"rgba(255, 255, 255, 0.98)",color:"gray.700",_hover:{bg:"rgba(102, 126, 234, 0.15)"}}}},children:[e("option",{}),e("option",{children:"active"}),e("option",{children:"on_hold"}),e("option",{children:"disabled"}),e("option",{children:"limited"}),e("option",{children:"expired"})]})]})}),e(re,{minW:"100px",cursor:"pointer",pr:0,onClick:C.bind(null,"used_traffic"),children:r(S,{children:[e("span",{children:d("usersTable.dataUsage")}),e(Yr,{sort:t.sort,column:"used_traffic"})]})}),e(re,{minW:"32px",w:"32px",p:0,cursor:"pointer"})]})}),e(l0,{children:!R&&(a==null?void 0:a.map((v,L)=>r(x.exports.Fragment,{children:[r(De,{onClick:f.bind(null,L),cursor:"pointer",children:[e(J,{borderBottom:0,minW:"100px",pl:4,pr:4,maxW:"calc(100vw - 50px - 32px - 100px - 48px)",children:r("div",{className:"flex-status",children:[e(wo,{lastOnline:v.online_at}),e(i,{isTruncated:!0,children:v.username})]})}),e(J,{borderBottom:0,minW:"50px",pl:0,pr:0,children:e(C0,{compact:!0,showDetail:!1,expiryDate:v.expire,status:v.status})}),e(J,{borderBottom:0,minW:"100px",pr:0,children:e(vo,{totalUsedTraffic:v.lifetime_used_traffic,dataLimitResetStrategy:v.data_limit_reset_strategy,used:v.used_traffic,total:v.data_limit,colorScheme:fr[v.status].bandWidthColor})}),e(J,{p:0,borderBottom:0,w:"32px",minW:"32px",children:e(il,{color:"gray.600",_dark:{color:"gray.400"},transition:"transform .2s ease-out",transform:y===L?"rotate(180deg)":"0deg"})})]}),e(De,{className:"collapsible",onClick:f.bind(null,L),children:e(J,{p:0,colSpan:4,children:r(Ir,{border:0,children:[e(Br,{display:"none"}),e(Tr,{border:0,cursor:"pointer",px:6,py:3,children:r(I,{justifyContent:"space-between",spacing:"4",children:[r(I,{alignItems:"flex-start",w:"full",spacing:-1,children:[e(i,{textTransform:"capitalize",fontSize:"xs",fontWeight:"bold",color:"gray.600",_dark:{color:"gray.400"},children:"\u0422\u0430\u0440\u0438\u0444"}),e(i,{fontSize:"sm",fontWeight:"medium",children:B(v.tariff_id)})]}),r(I,{alignItems:"flex-start",w:"full",spacing:-1,children:[e(i,{textTransform:"capitalize",fontSize:"xs",fontWeight:"bold",color:"gray.600",_dark:{color:"gray.400"},children:d("usersTable.dataUsage")}),e(w,{width:"full",minW:"230px",children:e(cl,{totalUsedTraffic:v.lifetime_used_traffic,dataLimitResetStrategy:v.data_limit_reset_strategy,used:v.used_traffic,total:v.data_limit,colorScheme:fr[v.status].bandWidthColor})})]}),r(S,{w:"full",justifyContent:"space-between",children:[r(w,{width:"full",children:[e(C0,{compact:!0,expiryDate:v.expire,status:v.status}),e(_o,{lastOnline:v.online_at})]}),r(S,{children:[e(ko,{user:v}),e(G,{label:d("userDialog.editUser"),placement:"top",children:e(P,{"aria-label":"Edit user",bg:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"full",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.1)",color:"white",w:{base:"32px",md:"40px"},h:{base:"32px",md:"40px"},minW:"unset",p:0,_light:{bg:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(0, 0, 0, 0.1)",color:"gray.600",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.08), inset 0 1px 0 rgba(255, 255, 255, 0.5)"},_hover:{bg:"rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.95)"}},onClick:N=>{N.stopPropagation(),u(v)},children:e(sl,{})})})]})]})]})})]})})})]},v.username)))})]})})}),r(a0,{orientation:"vertical",display:{base:"none",md:"table"},variant:"unstyled",...o,children:[e(i0,{position:"relative",bg:"linear-gradient(135deg, rgba(102, 126, 234, 0.12) 0%, rgba(128, 90, 213, 0.12) 100%)",backdropFilter:"blur(10px)",_light:{bg:"linear-gradient(135deg, rgba(102, 126, 234, 0.08) 0%, rgba(128, 90, 213, 0.08) 100%)"},children:r(De,{children:[e(re,{minW:"140px",cursor:"pointer",onClick:C.bind(null,"username"),color:"rgba(255, 255, 255, 0.7)",fontSize:"xs",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em",py:3,borderBottom:"1px solid rgba(255, 255, 255, 0.1)",_light:{color:"gray.600",borderBottom:"1px solid rgba(0, 0, 0, 0.1)"},children:r(S,{children:[e("span",{children:d("username")}),e(Yr,{sort:t.sort,column:"username"})]})}),e(re,{width:"400px",minW:"150px",cursor:"pointer",color:"rgba(255, 255, 255, 0.7)",fontSize:"xs",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em",py:3,_light:{color:"gray.600"},children:r(S,{position:"relative",gap:"5px",children:[r(i,{userSelect:"none",pointerEvents:"none",zIndex:1,children:[d("usersTable.status"),t.status?": "+t.status:""]}),e(i,{children:"/"}),e(Yr,{sort:t.sort,column:"expire"}),e(S,{onClick:C.bind(null,"expire"),children:e(i,{children:"Sort by expire"})}),r(Pe,{fontSize:"xs",fontWeight:"extrabold",textTransform:"uppercase",cursor:"pointer",position:"absolute",p:0,left:"-40px",border:0,h:"auto",w:"auto",icon:e(ke,{}),color:"transparent",bg:"transparent",display:"none",_focusVisible:{border:"0 !important",outline:"none"},sx:{option:{bg:"rgba(30, 40, 55, 0.98)",backdropFilter:"blur(20px)",color:"white",py:"8px",px:"12px",fontSize:"sm",fontWeight:"medium",textTransform:"uppercase",letterSpacing:"0.02em",_hover:{bg:"rgba(102, 126, 234, 0.3)"},_light:{bg:"rgba(255, 255, 255, 0.98)",color:"gray.700",_hover:{bg:"rgba(102, 126, 234, 0.15)"}}}},value:t.sort,onChange:n,children:[e("option",{}),e("option",{children:"active"}),e("option",{children:"on_hold"}),e("option",{children:"disabled"}),e("option",{children:"limited"}),e("option",{children:"expired"})]})]})}),e(re,{width:"180px",minW:"120px",cursor:"pointer",onClick:C.bind(null,"used_traffic"),color:"rgba(255, 255, 255, 0.7)",fontSize:"xs",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em",py:3,_light:{color:"gray.600"},children:r(S,{children:[e("span",{children:d("usersTable.dataUsage")}),e(Yr,{sort:t.sort,column:"used_traffic"})]})}),e(re,{width:"120px",minW:"100px",color:"rgba(255, 255, 255, 0.7)",fontSize:"xs",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em",py:3,_light:{color:"gray.600"},children:"\u0422\u0430\u0440\u0438\u0444"}),e(re,{width:"200px",minW:"180px"})]})}),r(l0,{children:[R&&(a==null?void 0:a.map((v,L)=>r(De,{className:vr("interactive",{"last-row":L===a.length-1}),onClick:()=>u(v),cursor:"pointer",transition:"all 0.25s ease",_hover:{bg:"rgba(255, 255, 255, 0.08)",transform:"translateX(4px)",_light:{bg:"rgba(0, 0, 0, 0.03)"}},borderBottom:"1px solid rgba(255, 255, 255, 0.06)",_light:{borderBottom:"1px solid rgba(0, 0, 0, 0.06)"},children:[e(J,{minW:"140px",children:r("div",{className:"flex-status",children:[e(wo,{lastOnline:v.online_at}),v.username,e(_o,{lastOnline:v.online_at})]})}),e(J,{width:"400px",minW:"150px",children:e(C0,{expiryDate:v.expire,status:v.status})}),e(J,{width:"180px",minW:"120px",children:e(vo,{totalUsedTraffic:v.lifetime_used_traffic,dataLimitResetStrategy:v.data_limit_reset_strategy,used:v.used_traffic,total:v.data_limit,colorScheme:fr[v.status].bandWidthColor})}),e(J,{width:"120px",minW:"100px",children:e(i,{fontSize:"sm",fontWeight:"medium",children:B(v.tariff_id)})}),e(J,{width:"200px",minW:"180px",children:e(ko,{user:v})})]},v.username))),a.length==0&&e(De,{children:e(J,{colSpan:5,children:e(bl,{isFiltered:D})})})]})]}),e(ol,{})]})})},ko=({user:o})=>{const{setQRCode:t,setSubLink:a}=$(),l=o.links.join(`\r
`),[u,s]=x.exports.useState([-1,!1]);return x.exports.useEffect(()=>{u[1]&&setTimeout(()=>{s([-1,!1])},1e3)},[u]),r(S,{justifyContent:"flex-end",onClick:d=>{d.preventDefault(),d.stopPropagation()},children:[e(ao,{text:o.subscription_url.startsWith("/")?window.location.origin+o.subscription_url:o.subscription_url,onCopy:()=>{s([0,!0])},children:e("div",{children:e(G,{label:u[0]==0&&u[1]?ue("usersTable.copied"):ue("usersTable.copyLink"),placement:"top",children:e(P,{"aria-label":"copy subscription link",bg:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"full",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.1)",color:"white",w:{base:"32px",md:"40px"},h:{base:"32px",md:"40px"},minW:"unset",p:0,_light:{bg:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(0, 0, 0, 0.1)",color:"gray.600",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.08), inset 0 1px 0 rgba(255, 255, 255, 0.5)"},_hover:{bg:"rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.95)"}},children:u[0]==0&&u[1]?e(Co,{}):e(ll,{})})})})}),e(ao,{text:l,onCopy:()=>{s([1,!0])},children:e("div",{children:e(G,{label:u[0]==1&&u[1]?ue("usersTable.copied"):ue("usersTable.copyConfigs"),placement:"top",children:e(P,{"aria-label":"copy configs",bg:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"full",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.1)",color:"white",w:{base:"32px",md:"40px"},h:{base:"32px",md:"40px"},minW:"unset",p:0,_light:{bg:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(0, 0, 0, 0.1)",color:"gray.600",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.08), inset 0 1px 0 rgba(255, 255, 255, 0.5)"},_hover:{bg:"rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.95)"}},children:u[0]==1&&u[1]?e(Co,{}):e(al,{})})})})}),e(G,{label:"QR Code",placement:"top",children:e(P,{"aria-label":"qr code",bg:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"full",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.1)",color:"white",w:{base:"32px",md:"40px"},h:{base:"32px",md:"40px"},minW:"unset",p:0,_light:{bg:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(0, 0, 0, 0.1)",color:"gray.600",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.08), inset 0 1px 0 rgba(255, 255, 255, 0.5)"},_hover:{bg:"rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.95)"}},onClick:()=>{t(o.links),a(o.subscription_url)},children:e(nl,{})})})]})},bl=({isFiltered:o})=>{const{onCreateUser:t}=$();return r(w,{padding:"5",py:"8",display:"flex",alignItems:"center",flexDirection:"column",gap:4,w:"full",children:[e(tl,{maxHeight:"200px",maxWidth:"200px",_dark:{'path[fill="#fff"]':{fill:"gray.800"},'path[fill="#f2f2f2"], path[fill="#e6e6e6"], path[fill="#ccc"]':{fill:"gray.700"},'circle[fill="#3182CE"]':{fill:"primary.300"}},_light:{'path[fill="#f2f2f2"], path[fill="#e6e6e6"], path[fill="#ccc"]':{fill:"gray.300"},'circle[fill="#3182CE"]':{fill:"primary.500"}}}),e(i,{fontWeight:"medium",color:"gray.600",_dark:{color:"gray.400"},children:o?ue("usersTable.noUserMatched"):ue("usersTable.noUser")}),!o&&e(J0,{variant:"primary",size:"md",onClick:()=>t(!0),children:ue("createUser")})]})},Ie="/api/balancer",Ve=Ao.create({baseURL:""}),tr={proxies:{getAll:()=>Ve(`${Ie}/proxies`),getById:o=>Ve(`${Ie}/proxies/${o}`),create:o=>Ve(`${Ie}/proxies`,{method:"POST",body:o}),update:(o,t)=>Ve(`${Ie}/proxies/${o}`,{method:"PUT",body:t}),delete:o=>Ve(`${Ie}/proxies/${o}`,{method:"DELETE"}),toggle:(o,t)=>Ve(`${Ie}/proxies/${o}/toggle`,{method:"POST",body:{enabled:t}}),test:o=>Ve(`${Ie}/proxies/${o}/test`,{method:"POST"}),testAll:()=>Ve(`${Ie}/proxies/test-all`,{method:"POST"})},stats:{get:()=>Ve(`${Ie}/stats`)},logs:{stream:()=>`${Ie}/logs/stream`}},pl=A(at,{baseStyle:{w:7,h:7}}),hl=A(ga,{baseStyle:{w:7,h:7}}),xl=A(Ye,{baseStyle:{w:7,h:7}}),ml=A(ba,{baseStyle:{w:7,h:7}}),fl=A(Ye,{baseStyle:{w:4,h:4}}),Sl=()=>{const[o,t]=x.exports.useState([]),[a,l]=x.exports.useState(null),[u,s]=x.exports.useState(!0),[d,b]=x.exports.useState(!1),{isOpen:p,onOpen:y,onClose:m}=yr(),{isOpen:_,onOpen:c,onClose:h}=yr(),R=pe(),[D,B]=x.exports.useState(null),[C,n]=x.exports.useState({name:"",protocol:"socks5",host:"",port:"",username:"",password:"",priority:"1",maxConnections:"100"}),[f,v]=x.exports.useState({id:0,name:"",protocol:"socks5",host:"",port:"",username:"",password:"",priority:"1",maxConnections:"100"});o.filter(g=>["socks5","http","https"].includes(g.protocol.toLowerCase())),o.filter(g=>["shadowsocks","ss","vless","vmess","trojan"].includes(g.protocol.toLowerCase())),x.exports.useEffect(()=>{N();const g=setInterval(()=>N(!0),5e3),U=setInterval(()=>L(),1e4);return()=>{clearInterval(g),clearInterval(U)}},[]);const L=async()=>{try{await tr.proxies.testAll(),await N(!0)}catch(g){console.error("[BalancerDashboard] Error testing all proxies:",g)}},N=async(g=!1)=>{try{g?b(!0):s(!0),console.log("[BalancerDashboard] Loading data..."),console.log("[BalancerDashboard] API endpoint: /balancer-api/proxies");const U=await tr.proxies.getAll(),M=await tr.stats.get();console.log("[BalancerDashboard] Raw proxies response:",U),console.log("[BalancerDashboard] Raw stats response:",M);const X=Array.isArray(U)?U:U.data||[],oe=M.data||M;console.log("[BalancerDashboard] Final proxies count:",X.length),console.log("[BalancerDashboard] Final stats:",oe),t(X),l(oe)}catch(U){console.error("[BalancerDashboard] Error loading data:",U),console.error("[BalancerDashboard] Error details:",JSON.stringify(U,null,2))}finally{s(!1),b(!1)}},Z=async g=>{try{const U=o.find(M=>M.id===g);if(!U)return;await tr.proxies.toggle(g,!U.enabled),R({title:"\u0423\u0441\u043F\u0435\u0448\u043D\u043E",description:`\u041F\u0440\u043E\u043A\u0441\u0438 ${U.enabled?"\u0432\u044B\u043A\u043B\u044E\u0447\u0435\u043D":"\u0432\u043A\u043B\u044E\u0447\u0435\u043D"}`,status:"success",duration:2e3,isClosable:!0}),N()}catch(U){console.error("Error toggling proxy:",U),R({title:"\u041E\u0448\u0438\u0431\u043A\u0430",description:"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0438\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u0441\u0442\u0430\u0442\u0443\u0441 \u043F\u0440\u043E\u043A\u0441\u0438",status:"error",duration:3e3,isClosable:!0})}},ee=async g=>{if(!!window.confirm("\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043F\u0440\u043E\u043A\u0441\u0438?"))try{await tr.proxies.delete(g),R({title:"\u0423\u0441\u043F\u0435\u0448\u043D\u043E",description:"\u041F\u0440\u043E\u043A\u0441\u0438 \u0443\u0434\u0430\u043B\u0435\u043D",status:"success",duration:2e3,isClosable:!0}),N()}catch(U){console.error("Error deleting proxy:",U),R({title:"\u041E\u0448\u0438\u0431\u043A\u0430",description:"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u043F\u0440\u043E\u043A\u0441\u0438",status:"error",duration:3e3,isClosable:!0})}},W=async g=>{try{B(g.toString());const U=await tr.proxies.test(g);B(null),U.success?R({title:"\u041F\u0440\u043E\u043A\u0441\u0438 \u0440\u0430\u0431\u043E\u0442\u0430\u0435\u0442",description:`\u0412\u0440\u0435\u043C\u044F \u043E\u0442\u043A\u043B\u0438\u043A\u0430: ${U.responseTime}ms`,status:"success",duration:3e3,isClosable:!0}):R({title:"\u041F\u0440\u043E\u043A\u0441\u0438 \u043D\u0435 \u0440\u0430\u0431\u043E\u0442\u0430\u0435\u0442",description:U.error||"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043F\u043E\u0434\u043A\u043B\u044E\u0447\u0438\u0442\u044C\u0441\u044F",status:"error",duration:5e3,isClosable:!0}),N()}catch(U){console.error("Error testing proxy:",U),B(null),R({title:"\u041E\u0448\u0438\u0431\u043A\u0430",description:"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043F\u0440\u043E\u0442\u0435\u0441\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u043F\u0440\u043E\u043A\u0441\u0438",status:"error",duration:3e3,isClosable:!0})}},ae=async()=>{try{await tr.proxies.create({name:C.name,protocol:C.protocol,host:C.host,port:parseInt(C.port),username:C.username||void 0,password:C.password||void 0,priority:parseInt(C.priority),maxConnections:parseInt(C.maxConnections)}),m(),n({name:"",protocol:"socks5",host:"",port:"",username:"",password:"",priority:"1",maxConnections:"100"}),N()}catch(g){console.error("Error adding proxy:",g),R({title:"\u041E\u0448\u0438\u0431\u043A\u0430",description:"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0434\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043F\u0440\u043E\u043A\u0441\u0438",status:"error",duration:3e3,isClosable:!0})}},ne=g=>{var U,M;v({id:g.id,name:g.name,protocol:g.protocol,host:g.host,port:g.port.toString(),username:g.username||"",password:g.password||"",priority:((U=g.priority)==null?void 0:U.toString())||"1",maxConnections:((M=g.maxConnections)==null?void 0:M.toString())||"100"}),c()},H=async()=>{try{await tr.proxies.update(f.id,{name:f.name,protocol:f.protocol,host:f.host,port:parseInt(f.port),username:f.username,password:f.password,priority:parseInt(f.priority),maxConnections:parseInt(f.maxConnections)}),R({title:"\u0423\u0441\u043F\u0435\u0448\u043D\u043E",description:"\u041F\u0440\u043E\u043A\u0441\u0438 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D",status:"success",duration:3e3,isClosable:!0}),h(),N()}catch(g){console.error("Error updating proxy:",g),R({title:"\u041E\u0448\u0438\u0431\u043A\u0430",description:"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043E\u0431\u043D\u043E\u0432\u0438\u0442\u044C \u043F\u0440\u043E\u043A\u0441\u0438",status:"error",duration:3e3,isClosable:!0})}};return u?e(w,{display:"flex",justifyContent:"center",alignItems:"center",minH:"400px",children:e(Ge,{size:"xl",color:"blue.500"})}):r(I,{spacing:6,align:"stretch",children:[a&&r(le,{columns:{base:1,md:2,lg:4},spacing:3,w:"full",children:[e(w,{bg:"rgba(255, 255, 255, 0.03)",backdropFilter:"blur(20px) saturate(180%)",p:4,borderRadius:"24px",border:"1px solid rgba(255, 255, 255, 0.08)",boxShadow:"0 8px 32px 0 rgba(31, 38, 135, 0.15), inset 0 1px 2px rgba(255, 255, 255, 0.1)",transition:"all 0.3s ease",_light:{bg:"rgba(255, 255, 255, 0.7)",border:"1px solid rgba(0, 0, 0, 0.08)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.08), inset 0 1px 2px rgba(255, 255, 255, 0.9)"},children:r(S,{spacing:3,align:"center",children:[e(w,{color:"rgba(255, 255, 255, 0.7)",_light:{color:"rgba(0, 0, 0, 0.6)"},children:e(pl,{})}),r(I,{align:"start",spacing:0,children:[e(i,{fontSize:"xs",color:"rgba(255, 255, 255, 0.5)",_light:{color:"rgba(0, 0, 0, 0.5)"},fontWeight:"medium",textTransform:"uppercase",letterSpacing:"wider",children:"\u0412\u0441\u0435\u0433\u043E \u043F\u0440\u043E\u043A\u0441\u0438"}),e(S,{spacing:2,align:"baseline",children:e(i,{fontSize:"2xl",fontWeight:"bold",color:"white",_light:{color:"gray.900"},children:a.totalProxies})})]})]})}),e(w,{bg:"rgba(255, 255, 255, 0.03)",backdropFilter:"blur(20px) saturate(180%)",p:4,borderRadius:"24px",border:"1px solid rgba(255, 255, 255, 0.08)",boxShadow:"0 8px 32px 0 rgba(31, 38, 135, 0.15), inset 0 1px 2px rgba(255, 255, 255, 0.1)",transition:"all 0.3s ease",_light:{bg:"rgba(255, 255, 255, 0.7)",border:"1px solid rgba(0, 0, 0, 0.08)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.08), inset 0 1px 2px rgba(255, 255, 255, 0.9)"},children:r(S,{spacing:3,align:"center",children:[e(w,{color:"rgba(255, 255, 255, 0.7)",_light:{color:"rgba(0, 0, 0, 0.6)"},children:e(ml,{})}),r(I,{align:"start",spacing:0,children:[e(i,{fontSize:"xs",color:"rgba(255, 255, 255, 0.5)",_light:{color:"rgba(0, 0, 0, 0.5)"},fontWeight:"medium",textTransform:"uppercase",letterSpacing:"wider",children:"\u0410\u043A\u0442\u0438\u0432\u043D\u044B\u0435"}),e(S,{spacing:2,align:"baseline",children:e(i,{fontSize:"2xl",fontWeight:"bold",color:"white",_light:{color:"gray.900"},children:a.activeProxies})})]})]})}),e(w,{bg:"rgba(255, 255, 255, 0.03)",backdropFilter:"blur(20px) saturate(180%)",p:4,borderRadius:"24px",border:"1px solid rgba(255, 255, 255, 0.08)",boxShadow:"0 8px 32px 0 rgba(31, 38, 135, 0.15), inset 0 1px 2px rgba(255, 255, 255, 0.1)",transition:"all 0.3s ease",_light:{bg:"rgba(255, 255, 255, 0.7)",border:"1px solid rgba(0, 0, 0, 0.08)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.08), inset 0 1px 2px rgba(255, 255, 255, 0.9)"},children:r(S,{spacing:3,align:"center",children:[e(w,{color:"rgba(255, 255, 255, 0.7)",_light:{color:"rgba(0, 0, 0, 0.6)"},children:e(xl,{})}),r(I,{align:"start",spacing:0,children:[e(i,{fontSize:"xs",color:"rgba(255, 255, 255, 0.5)",_light:{color:"rgba(0, 0, 0, 0.5)"},fontWeight:"medium",textTransform:"uppercase",letterSpacing:"wider",children:"\u041F\u043E\u0434\u043A\u043B\u044E\u0447\u0435\u043D\u0438\u044F"}),r(S,{spacing:2,align:"baseline",children:[e(i,{fontSize:"2xl",fontWeight:"bold",color:"white",_light:{color:"gray.900"},children:a.activeConnections}),r(i,{fontSize:"xs",color:"rgba(255, 255, 255, 0.5)",_light:{color:"rgba(0, 0, 0, 0.5)"},children:["\u0412\u0441\u0435\u0433\u043E: ",a.totalConnections]})]})]})]})}),e(w,{bg:"rgba(255, 255, 255, 0.03)",backdropFilter:"blur(20px) saturate(180%)",p:4,borderRadius:"24px",border:"1px solid rgba(255, 255, 255, 0.08)",boxShadow:"0 8px 32px 0 rgba(31, 38, 135, 0.15), inset 0 1px 2px rgba(255, 255, 255, 0.1)",transition:"all 0.3s ease",_light:{bg:"rgba(255, 255, 255, 0.7)",border:"1px solid rgba(0, 0, 0, 0.08)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.08), inset 0 1px 2px rgba(255, 255, 255, 0.9)"},children:r(S,{spacing:3,align:"center",children:[e(w,{color:"rgba(255, 255, 255, 0.7)",_light:{color:"rgba(0, 0, 0, 0.6)"},children:e(hl,{})}),r(I,{align:"start",spacing:0,children:[e(i,{fontSize:"xs",color:"rgba(255, 255, 255, 0.5)",_light:{color:"rgba(0, 0, 0, 0.5)"},fontWeight:"medium",textTransform:"uppercase",letterSpacing:"wider",children:"\u0423\u0441\u043F\u0435\u0448\u043D\u043E\u0441\u0442\u044C"}),e(S,{spacing:2,align:"baseline",children:r(i,{fontSize:"2xl",fontWeight:"bold",color:"white",_light:{color:"gray.900"},children:[a.successRate!=null?a.successRate.toFixed(1):"0","%"]})})]})]})})]}),e(I,{spacing:6,align:"stretch",children:r(w,{children:[r(S,{justify:"space-between",mb:3,children:[e(S,{spacing:3,children:e(i,{fontSize:"xl",fontWeight:"bold",color:"white",_light:{color:"gray.800"},children:"\u041F\u0440\u043E\u043A\u0441\u0438"})}),r(S,{spacing:2,children:[e(G,{label:"\u041E\u0431\u043D\u043E\u0432\u0438\u0442\u044C",children:e(w,{bg:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",borderRadius:"full",border:"1px solid rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(0, 0, 0, 0.1)",boxShadow:"0 4px 15px rgba(0, 0, 0, 0.15), inset 0 1px 2px rgba(255, 255, 255, 1)"},display:"flex",alignItems:"center",justifyContent:"center",minW:"44px",minH:"44px",boxShadow:"inset 0 1px 2px rgba(255, 255, 255, 0.2), 0 2px 6px rgba(0, 0, 0, 0.1)",children:e(P,{"aria-label":"Refresh",disabled:d,onClick:()=>N(),variant:"ghost",size:"sm",borderRadius:"full",color:"white",_light:{color:"gray.500"},minW:"auto",h:"auto",children:e(fl,{className:vr({"animate-spin":d})})})})}),e(q,{leftIcon:e($o,{}),onClick:y,bg:"rgba(102, 126, 234, 0.8)",backdropFilter:"blur(10px)",borderRadius:"30px",border:"1px solid rgba(255, 255, 255, 0.2)",px:"5",py:"2.5",fontSize:"sm",fontWeight:"600",color:"white",boxShadow:"0 4px 15px rgba(102, 126, 234, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.2)",_hover:{bg:"rgba(102, 126, 234, 0.9)",boxShadow:"0 6px 20px rgba(102, 126, 234, 0.5)"},_light:{bg:"rgba(102, 126, 234, 0.9)",_hover:{bg:"rgba(102, 126, 234, 1)"}},children:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"})]})]}),e(V0,{below:"md",children:e(w,{overflowX:"auto",borderRadius:"30px",bg:"rgba(255, 255, 255, 0.03)",backdropFilter:"blur(20px) saturate(180%)",border:"1px solid rgba(255, 255, 255, 0.08)",css:{"&::-webkit-scrollbar":{width:"4px",height:"4px"},"&::-webkit-scrollbar-track":{width:"6px",height:"6px"},"&::-webkit-scrollbar-thumb":{background:"rgba(255, 255, 255, 0.1)",borderRadius:"24px"}},_light:{bg:"white",border:"1px solid",borderColor:"gray.200",boxShadow:"sm"},children:e(w,{children:r(a0,{variant:"unstyled",size:"md",children:[e(i0,{bg:"linear-gradient(135deg, rgba(102, 126, 234, 0.12) 0%, rgba(128, 90, 213, 0.12) 100%)",backdropFilter:"blur(10px)",_light:{bg:"linear-gradient(135deg, rgba(102, 126, 234, 0.08) 0%, rgba(128, 90, 213, 0.08) 100%)"},children:r(De,{children:[e(re,{color:"rgba(255, 255, 255, 0.7)",fontSize:"xs",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em",py:3,borderBottom:"1px solid rgba(255, 255, 255, 0.1)",_light:{color:"gray.600",borderBottom:"1px solid rgba(0, 0, 0, 0.1)"},pl:4,children:"\u0421\u0442\u0430\u0442\u0443\u0441"}),e(re,{color:"rgba(255, 255, 255, 0.7)",fontSize:"xs",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em",py:3,borderBottom:"1px solid rgba(255, 255, 255, 0.1)",_light:{color:"gray.600",borderBottom:"1px solid rgba(0, 0, 0, 0.1)"},children:"\u0418\u043C\u044F / \u0410\u0434\u0440\u0435\u0441"}),e(re,{color:"rgba(255, 255, 255, 0.7)",fontSize:"xs",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em",py:3,borderBottom:"1px solid rgba(255, 255, 255, 0.1)",_light:{color:"gray.600",borderBottom:"1px solid rgba(0, 0, 0, 0.1)"},children:"\u0417\u0434\u043E\u0440\u043E\u0432\u044C\u0435"}),e(re,{color:"rgba(255, 255, 255, 0.7)",fontSize:"xs",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em",py:3,borderBottom:"1px solid rgba(255, 255, 255, 0.1)",_light:{color:"gray.600",borderBottom:"1px solid rgba(0, 0, 0, 0.1)"},children:"\u041F\u043E\u0434\u043A\u043B\u044E\u0447\u0435\u043D\u0438\u044F"}),e(re,{color:"rgba(255, 255, 255, 0.7)",fontSize:"xs",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em",py:3,borderBottom:"1px solid rgba(255, 255, 255, 0.1)",_light:{color:"gray.600",borderBottom:"1px solid rgba(0, 0, 0, 0.1)"},textAlign:"right"})]})}),e(l0,{children:o.map(g=>r(De,{transition:"all 0.25s ease",_hover:{bg:"rgba(255, 255, 255, 0.08)",_light:{bg:"rgba(0, 0, 0, 0.03)"}},borderBottom:"1px solid rgba(255, 255, 255, 0.06)",_light:{borderBottom:"1px solid rgba(0, 0, 0, 0.06)"},children:[e(J,{py:4,borderBottom:0,pl:4,children:e(Se,{size:"md",colorScheme:"green",isChecked:g.enabled,onChange:()=>Z(g.id)})}),e(J,{py:4,borderBottom:0,children:r(I,{align:"start",spacing:1,children:[r(S,{spacing:2,children:[e(i,{fontWeight:"semibold",fontSize:"md",color:"white",_light:{color:"gray.800"},children:g.name}),e(T,{bg:"rgba(59, 130, 246, 0.2)",color:"blue.300",fontSize:"2xs",px:2,py:.5,borderRadius:"md",border:"1px solid rgba(59, 130, 246, 0.3)",_light:{bg:"rgba(59, 130, 246, 0.15)",color:"blue.600"},children:g.protocol.toUpperCase()}),r(T,{bg:"rgba(168, 85, 247, 0.2)",color:"purple.300",fontSize:"2xs",px:2,py:.5,borderRadius:"md",border:"1px solid rgba(168, 85, 247, 0.3)",_light:{bg:"rgba(168, 85, 247, 0.15)",color:"purple.600"},children:["P",g.priority]})]}),r(i,{fontSize:"sm",color:"rgba(255, 255, 255, 0.6)",_light:{color:"gray.500"},children:[g.host,":",g.port]})]})}),e(J,{py:4,borderBottom:0,children:g.avgResponseTime?r(i,{fontSize:"sm",fontWeight:"medium",color:g.avgResponseTime<100?"green.400":g.avgResponseTime<300?"yellow.400":"red.400",_light:{color:g.avgResponseTime<100?"green.600":g.avgResponseTime<300?"yellow.600":"red.600"},children:[Math.round(g.avgResponseTime),"ms"]}):e(i,{fontSize:"sm",color:"rgba(255, 255, 255, 0.4)",_light:{color:"gray.400"},children:"N/A"})}),e(J,{py:4,borderBottom:0,children:r(I,{align:"start",spacing:1,children:[r(i,{fontSize:"sm",fontWeight:"medium",color:"white",_light:{color:"gray.800"},children:[g.activeConnections||0," / ",g.totalConnections||0]}),g.totalConnections>0&&e(I0,{value:g.activeConnections/g.totalConnections*100,size:"sm",colorScheme:"blue",borderRadius:"full",w:"80px"})]})}),e(J,{py:4,textAlign:"right",borderBottom:0,children:r(Sr,{children:[e(wr,{as:P,icon:e(pa,{}),w:"40px",h:"40px",minW:"unset",p:0,bg:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)",color:"white",borderRadius:"full",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.1)",_hover:{bg:"rgba(255, 255, 255, 0.1)"},_light:{bg:"rgba(255, 255, 255, 0.8)",color:"gray.700",border:"1px solid rgba(0, 0, 0, 0.1)",_hover:{bg:"rgba(255, 255, 255, 0.95)"}},"aria-label":"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044F"}),r(_r,{bg:"rgba(30, 41, 59, 0.95)",backdropFilter:"blur(40px) saturate(180%)",border:"1px solid rgba(255, 255, 255, 0.08)",borderRadius:"20px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)",_light:{bg:"rgba(255, 255, 255, 0.95)",border:"1px solid rgba(0, 0, 0, 0.08)"},children:[e(_e,{icon:e(io,{}),onClick:()=>W(g.id),isDisabled:D===g.id.toString(),bg:"transparent",color:"white",_hover:{bg:"rgba(255, 255, 255, 0.1)"},_light:{color:"gray.700",_hover:{bg:"rgba(0, 0, 0, 0.05)"}},children:"\u041F\u0440\u043E\u0432\u0435\u0440\u0438\u0442\u044C"}),e(_e,{icon:e(n0,{}),onClick:()=>ne(g),bg:"transparent",color:"white",_hover:{bg:"rgba(255, 255, 255, 0.1)"},_light:{color:"gray.700",_hover:{bg:"rgba(0, 0, 0, 0.05)"}},children:"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C"}),e(_e,{icon:e(s0,{}),onClick:()=>ee(g.id),color:"red.500",children:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C"})]})]})})]},g.id))})]})})})}),e(H0,{below:"md",children:e(le,{columns:1,spacing:3,children:o.map(g=>r(w,{bg:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(20px) saturate(180%)",borderRadius:"20px",border:"1px solid rgba(255, 255, 255, 0.1)",p:5,boxShadow:"0 4px 15px rgba(0, 0, 0, 0.2)",transition:"all 0.2s",_hover:{bg:"rgba(255, 255, 255, 0.08)",boxShadow:"0 6px 20px rgba(0, 0, 0, 0.3)"},_light:{bg:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(0, 0, 0, 0.1)",boxShadow:"0 4px 15px rgba(0, 0, 0, 0.1)",_hover:{bg:"rgba(255, 255, 255, 0.95)",boxShadow:"0 6px 20px rgba(0, 0, 0, 0.15)"}},children:[r(qr,{justify:"space-between",align:"center",mb:4,children:[r(S,{spacing:3,children:[e(Se,{size:"md",colorScheme:"green",isChecked:g.enabled,onChange:()=>Z(g.id)}),e(T,{colorScheme:g.enabled?"green":"gray",fontSize:"sm",px:3,py:1.5,borderRadius:"full",bg:g.enabled?"rgba(34, 197, 94, 0.15)":"rgba(255, 255, 255, 0.1)",color:g.enabled?"green.300":"gray.400",border:"1px solid",borderColor:g.enabled?"rgba(34, 197, 94, 0.3)":"rgba(255, 255, 255, 0.2)",_light:{bg:g.enabled?"rgba(34, 197, 94, 0.1)":"rgba(0, 0, 0, 0.05)",color:g.enabled?"green.600":"gray.600",borderColor:g.enabled?"rgba(34, 197, 94, 0.2)":"rgba(0, 0, 0, 0.1)"},children:g.enabled?"\u0412\u041A\u041B":"\u0412\u042B\u041A\u041B"})]}),r(S,{spacing:2,children:[e(G,{label:"\u041F\u0440\u043E\u0432\u0435\u0440\u0438\u0442\u044C",children:e(P,{"aria-label":"Test",icon:e(io,{}),size:"sm",bg:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)",color:"white",borderRadius:"full",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.1)",_hover:{bg:"rgba(255, 255, 255, 0.1)"},_light:{bg:"rgba(255, 255, 255, 0.8)",color:"gray.700",border:"1px solid rgba(0, 0, 0, 0.1)",_hover:{bg:"rgba(255, 255, 255, 0.95)"}},onClick:()=>W(g.id),isLoading:D===g.id.toString()})}),e(G,{label:"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C",children:e(P,{"aria-label":"Edit",icon:e(n0,{}),size:"sm",bg:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)",color:"white",borderRadius:"full",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.1)",_hover:{bg:"rgba(255, 255, 255, 0.1)"},_light:{bg:"rgba(255, 255, 255, 0.8)",color:"gray.700",border:"1px solid rgba(0, 0, 0, 0.1)",_hover:{bg:"rgba(255, 255, 255, 0.95)"}},onClick:()=>ne(g)})}),e(G,{label:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C",children:e(P,{"aria-label":"Delete",icon:e(s0,{}),size:"sm",bg:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)",color:"white",borderRadius:"full",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.1)",_hover:{bg:"rgba(255, 255, 255, 0.1)"},_light:{bg:"rgba(255, 255, 255, 0.8)",color:"gray.700",border:"1px solid rgba(0, 0, 0, 0.1)",_hover:{bg:"rgba(255, 255, 255, 0.95)"}},onClick:()=>ee(g.id)})})]})]}),r(I,{align:"stretch",spacing:3,children:[e(S,{justify:"space-between",children:e(i,{fontSize:"lg",fontWeight:"bold",color:"white",_light:{color:"gray.800"},children:g.name})}),r(S,{spacing:2,children:[e(T,{fontSize:"sm",px:3,py:1,borderRadius:"full",bg:"rgba(59, 130, 246, 0.15)",color:"blue.300",border:"1px solid rgba(59, 130, 246, 0.3)",_light:{bg:"rgba(59, 130, 246, 0.1)",color:"blue.600",borderColor:"rgba(59, 130, 246, 0.2)"},children:g.protocol.toUpperCase()}),r(T,{fontSize:"sm",px:3,py:1,borderRadius:"full",bg:"rgba(168, 85, 247, 0.15)",color:"purple.300",border:"1px solid rgba(168, 85, 247, 0.3)",_light:{bg:"rgba(168, 85, 247, 0.1)",color:"purple.600",borderColor:"rgba(168, 85, 247, 0.2)"},children:["P",g.priority]})]}),r(i,{fontSize:"md",color:"gray.400",_light:{color:"gray.600"},children:[g.host,":",g.port]}),r(w,{mt:2,pt:3,borderTopWidth:"1px",borderColor:"rgba(255, 255, 255, 0.1)",_light:{borderColor:"rgba(0, 0, 0, 0.1)"},children:[r(S,{justify:"space-between",fontSize:"sm",children:[e(i,{color:"gray.400",_light:{color:"gray.600"},children:"\u041F\u043E\u0434\u043A\u043B\u044E\u0447\u0435\u043D\u0438\u044F:"}),r(i,{fontWeight:"medium",color:"white",_light:{color:"gray.800"},children:[g.activeConnections||0," / ",g.totalConnections||0]})]}),g.totalConnections>0&&e(I0,{value:g.activeConnections/g.totalConnections*100,size:"sm",colorScheme:"blue",borderRadius:"full",mt:2,bg:"rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(0, 0, 0, 0.1)"}})]})]})]},g.id))})})]})}),r(he,{isOpen:p,onClose:m,size:"lg",children:[e(de,{backdropFilter:"blur(10px)",bg:"rgba(0, 0, 0, 0.4)"}),r(xe,{mx:"3",bg:"rgba(30, 35, 50, 0.95)",backdropFilter:"blur(20px) saturate(180%)",borderRadius:"30px",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.37)",_light:{bg:"rgba(255, 255, 255, 0.95)",border:"1px solid rgba(0, 0, 0, 0.1)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.15)"},children:[e(ce,{pt:6,fontSize:"lg",fontWeight:"bold",color:"white",_light:{color:"gray.900"},children:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043F\u0440\u043E\u043A\u0441\u0438"}),e(ge,{mt:3,bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"full",color:"white",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(0, 0, 0, 0.1)",color:"gray.600",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.08), inset 0 1px 0 rgba(255, 255, 255, 0.5)"},_hover:{bg:"rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.95)"}}}),e(be,{pb:4,children:r(I,{spacing:3,children:[r(z,{isRequired:!0,children:[e(F,{fontSize:"sm",mb:1,children:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435"}),e(Y,{value:C.name,onChange:g=>n({...C,name:g.target.value}),placeholder:"\u041C\u043E\u0439 \u043F\u0440\u043E\u043A\u0441\u0438",size:"md",borderRadius:"20px",bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.7)",border:"1px solid rgba(0, 0, 0, 0.1)"},_focus:{borderColor:"blue.400",boxShadow:"0 0 0 1px blue.400"}})]}),r(z,{isRequired:!0,children:[e(F,{fontSize:"sm",mb:1,children:"\u041F\u0440\u043E\u0442\u043E\u043A\u043E\u043B"}),r(Pe,{value:C.protocol,onChange:g=>n({...C,protocol:g.target.value}),size:"md",borderRadius:"20px",bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.7)",border:"1px solid rgba(0, 0, 0, 0.1)"},sx:{option:{bg:"rgba(30, 35, 50, 0.98)",color:"white",_light:{bg:"white",color:"gray.800"}}},children:[e("option",{value:"socks5",children:"SOCKS5"}),e("option",{value:"http",children:"HTTP"}),e("option",{value:"https",children:"HTTPS"})]})]}),r(S,{width:"100%",spacing:3,children:[r(z,{isRequired:!0,children:[e(F,{fontSize:"sm",mb:1,children:"\u0425\u043E\u0441\u0442"}),e(Y,{value:C.host,onChange:g=>n({...C,host:g.target.value}),placeholder:"127.0.0.1",size:"md",borderRadius:"20px",bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.7)",border:"1px solid rgba(0, 0, 0, 0.1)"},_focus:{borderColor:"blue.400",boxShadow:"0 0 0 1px blue.400"}})]}),r(z,{isRequired:!0,width:"30%",children:[e(F,{fontSize:"sm",mb:1,children:"\u041F\u043E\u0440\u0442"}),e(Y,{type:"number",value:C.port,onChange:g=>n({...C,port:g.target.value}),placeholder:"1080",size:"md",borderRadius:"20px",bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.7)",border:"1px solid rgba(0, 0, 0, 0.1)"},_focus:{borderColor:"blue.400",boxShadow:"0 0 0 1px blue.400"}})]})]}),r(S,{width:"100%",spacing:3,children:[r(z,{children:[e(F,{fontSize:"sm",mb:1,children:"\u041B\u043E\u0433\u0438\u043D"}),e(Y,{value:C.username,onChange:g=>n({...C,username:g.target.value}),size:"md",borderRadius:"20px",placeholder:"\u043D\u0435\u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u043E",bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.7)",border:"1px solid rgba(0, 0, 0, 0.1)"},_focus:{borderColor:"blue.400",boxShadow:"0 0 0 1px blue.400"}})]}),r(z,{children:[e(F,{fontSize:"sm",mb:1,children:"\u041F\u0430\u0440\u043E\u043B\u044C"}),e(Y,{type:"password",value:C.password,onChange:g=>n({...C,password:g.target.value}),size:"md",borderRadius:"20px",placeholder:"\u043D\u0435\u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u043E",bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.7)",border:"1px solid rgba(0, 0, 0, 0.1)"},_focus:{borderColor:"blue.400",boxShadow:"0 0 0 1px blue.400"}})]})]}),r(z,{isRequired:!0,children:[e(F,{fontSize:"sm",mb:1,children:"\u041F\u0440\u0438\u043E\u0440\u0438\u0442\u0435\u0442"}),e(Y,{type:"number",value:C.priority,onChange:g=>n({...C,priority:g.target.value}),placeholder:"1",size:"md",borderRadius:"20px",bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.7)",border:"1px solid rgba(0, 0, 0, 0.1)"},_focus:{borderColor:"blue.400",boxShadow:"0 0 0 1px blue.400"}})]}),r(z,{isRequired:!0,children:[e(F,{fontSize:"sm",mb:1,children:"\u041C\u0430\u043A\u0441. \u043F\u043E\u0434\u043A\u043B\u044E\u0447\u0435\u043D\u0438\u0439"}),e(Y,{type:"number",value:C.maxConnections,onChange:g=>n({...C,maxConnections:g.target.value}),placeholder:"100",size:"md",borderRadius:"20px",bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.7)",border:"1px solid rgba(0, 0, 0, 0.1)"},_focus:{borderColor:"blue.400",boxShadow:"0 0 0 1px blue.400"}})]})]})}),r(ve,{children:[e(q,{mr:2,onClick:m,bg:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)",color:"white",borderRadius:"30px",px:5,py:2,_hover:{bg:"rgba(255, 255, 255, 0.1)"},_light:{bg:"rgba(255, 255, 255, 0.8)",color:"gray.700",border:"1px solid rgba(0, 0, 0, 0.1)",_hover:{bg:"rgba(255, 255, 255, 0.95)"}},children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),e(q,{onClick:ae,bg:"rgba(102, 126, 234, 0.8)",backdropFilter:"blur(10px)",borderRadius:"30px",border:"1px solid rgba(255, 255, 255, 0.2)",px:5,py:2,color:"white",boxShadow:"0 4px 15px rgba(102, 126, 234, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.2)",_hover:{bg:"rgba(102, 126, 234, 0.9)",boxShadow:"0 6px 20px rgba(102, 126, 234, 0.5)"},_light:{bg:"rgba(102, 126, 234, 0.9)",_hover:{bg:"rgba(102, 126, 234, 1)"}},children:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"})]})]})]}),r(he,{isOpen:_,onClose:h,size:"4xl",children:[e(de,{backdropFilter:"blur(10px)",bg:"rgba(0, 0, 0, 0.4)"}),r(xe,{mx:"3",bg:"rgba(30, 35, 50, 0.95)",backdropFilter:"blur(20px) saturate(180%)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"30px",maxW:"900px",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.37)",_light:{bg:"rgba(255, 255, 255, 0.95)",border:"1px solid rgba(0, 0, 0, 0.1)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.15)"},children:[e(ce,{pt:6,fontSize:"lg",fontWeight:"bold",color:"white",_light:{color:"gray.900"},children:"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u043F\u0440\u043E\u043A\u0441\u0438"}),e(ge,{mt:3,bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"full",color:"white",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(0, 0, 0, 0.1)",color:"gray.600",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.08), inset 0 1px 0 rgba(255, 255, 255, 0.5)"},_hover:{bg:"rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.95)"}}}),e(be,{pb:4,children:r(le,{columns:{base:1,md:2},spacing:4,children:[r(z,{children:[e(F,{fontSize:"sm",mb:1,children:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435"}),e(Y,{value:f.name,onChange:g=>v({...f,name:g.target.value}),placeholder:"\u0418\u043C\u044F \u043F\u0440\u043E\u043A\u0441\u0438",size:"md",borderRadius:"20px",bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.7)",border:"1px solid rgba(0, 0, 0, 0.1)"},_focus:{borderColor:"blue.400",boxShadow:"0 0 0 1px blue.400"}})]}),r(z,{children:[e(F,{fontSize:"sm",mb:1,children:"\u041F\u0440\u043E\u0442\u043E\u043A\u043E\u043B"}),r(Pe,{value:f.protocol,onChange:g=>v({...f,protocol:g.target.value}),size:"md",borderRadius:"20px",bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.7)",border:"1px solid rgba(0, 0, 0, 0.1)"},sx:{option:{bg:"rgba(30, 35, 50, 0.98)",color:"white",_light:{bg:"white",color:"gray.800"}}},children:[e("option",{value:"socks5",children:"SOCKS5"}),e("option",{value:"http",children:"HTTP"}),e("option",{value:"https",children:"HTTPS"}),e("option",{value:"vless",children:"VLESS"}),e("option",{value:"vmess",children:"VMESS"}),e("option",{value:"trojan",children:"Trojan"}),e("option",{value:"shadowsocks",children:"Shadowsocks"})]})]}),r(z,{children:[e(F,{fontSize:"sm",mb:1,children:"\u0425\u043E\u0441\u0442"}),e(Y,{value:f.host,onChange:g=>v({...f,host:g.target.value}),placeholder:"127.0.0.1",size:"md",borderRadius:"20px",bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.7)",border:"1px solid rgba(0, 0, 0, 0.1)"},_focus:{borderColor:"blue.400",boxShadow:"0 0 0 1px blue.400"}})]}),r(z,{children:[e(F,{fontSize:"sm",mb:1,children:"\u041F\u043E\u0440\u0442"}),e(Y,{value:f.port,onChange:g=>v({...f,port:g.target.value}),placeholder:"1080",type:"number",size:"md",borderRadius:"20px",bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.7)",border:"1px solid rgba(0, 0, 0, 0.1)"},_focus:{borderColor:"blue.400",boxShadow:"0 0 0 1px blue.400"}})]}),r(z,{children:[e(F,{fontSize:"sm",mb:1,children:"\u041B\u043E\u0433\u0438\u043D"}),e(Y,{value:f.username,onChange:g=>v({...f,username:g.target.value}),placeholder:"\u043D\u0435\u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u043E",size:"md",borderRadius:"20px",bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.7)",border:"1px solid rgba(0, 0, 0, 0.1)"},_focus:{borderColor:"blue.400",boxShadow:"0 0 0 1px blue.400"}})]}),r(z,{children:[e(F,{fontSize:"sm",mb:1,children:"\u041F\u0430\u0440\u043E\u043B\u044C"}),e(Y,{value:f.password,onChange:g=>v({...f,password:g.target.value}),type:"password",placeholder:"\u043D\u0435\u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u043E",size:"md",borderRadius:"20px",bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.7)",border:"1px solid rgba(0, 0, 0, 0.1)"},_focus:{borderColor:"blue.400",boxShadow:"0 0 0 1px blue.400"}})]}),r(z,{children:[e(F,{fontSize:"sm",mb:1,children:"\u041F\u0440\u0438\u043E\u0440\u0438\u0442\u0435\u0442"}),e(Y,{value:f.priority,onChange:g=>v({...f,priority:g.target.value}),placeholder:"1",type:"number",size:"md",borderRadius:"20px",bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.7)",border:"1px solid rgba(0, 0, 0, 0.1)"},_focus:{borderColor:"blue.400",boxShadow:"0 0 0 1px blue.400"}})]}),r(z,{children:[e(F,{fontSize:"sm",mb:1,children:"\u041C\u0430\u043A\u0441. \u043F\u043E\u0434\u043A\u043B\u044E\u0447\u0435\u043D\u0438\u0439"}),e(Y,{value:f.maxConnections,onChange:g=>v({...f,maxConnections:g.target.value}),placeholder:"100",type:"number",size:"md",borderRadius:"20px",bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.7)",border:"1px solid rgba(0, 0, 0, 0.1)"},_focus:{borderColor:"blue.400",boxShadow:"0 0 0 1px blue.400"}})]})]})}),r(ve,{children:[e(q,{mr:2,onClick:h,bg:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)",color:"white",borderRadius:"30px",px:5,py:2,_hover:{bg:"rgba(255, 255, 255, 0.1)"},_light:{bg:"rgba(255, 255, 255, 0.8)",color:"gray.700",border:"1px solid rgba(0, 0, 0, 0.1)",_hover:{bg:"rgba(255, 255, 255, 0.95)"}},children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),e(q,{onClick:H,bg:"rgba(102, 126, 234, 0.8)",backdropFilter:"blur(10px)",borderRadius:"30px",border:"1px solid rgba(255, 255, 255, 0.2)",px:5,py:2,color:"white",boxShadow:"0 4px 15px rgba(102, 126, 234, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.2)",_hover:{bg:"rgba(102, 126, 234, 0.9)",boxShadow:"0 6px 20px rgba(102, 126, 234, 0.5)"},_light:{bg:"rgba(102, 126, 234, 0.9)",_hover:{bg:"rgba(102, 126, 234, 1)"}},children:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C"})]})]})]})]})},wl=()=>{const[o,t]=x.exports.useState([]),[a,l]=x.exports.useState([]),[u,s]=x.exports.useState(!1),[d,b]=x.exports.useState(!0),[p,y]=x.exports.useState(""),[m,_]=x.exports.useState(!1),c=x.exports.useRef(null),h=x.exports.useRef(null);Ne("rgba(255, 255, 255, 0.8)","rgba(26, 32, 44, 0.6)"),Ne("gray.900","gray.950"),Ne("gray.100","gray.700"),Ne("white","gray.700"),x.exports.useEffect(()=>(R(),()=>{h.current&&h.current.close()}),[]),x.exports.useEffect(()=>{d&&c.current&&(c.current.scrollTop=c.current.scrollHeight)},[o,a,d]);const R=()=>{const n=new EventSource("http://localhost:9000/api/logs/stream");n.onopen=()=>{s(!0)},n.addEventListener("connection",f=>{if(!m){const v=JSON.parse(f.data);t(L=>[...L.slice(-99),v])}}),n.addEventListener("error_log",f=>{if(!m){const v=JSON.parse(f.data);l(L=>[...L.slice(-99),v])}}),n.onerror=()=>{s(!1),n.close(),setTimeout(R,5e3)},h.current=n},D=o.filter(n=>JSON.stringify(n).toLowerCase().includes(p.toLowerCase())),B=a.filter(n=>JSON.stringify(n).toLowerCase().includes(p.toLowerCase())),C=n=>{n==="connection"?t([]):l([])};return e(w,{bg:"rgba(30, 35, 50, 0.7)",backdropFilter:"blur(20px) saturate(180%)",borderRadius:"30px",border:"1px solid rgba(255, 255, 255, 0.08)",overflow:"hidden",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.37)",minH:"600px",_light:{bg:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(0, 0, 0, 0.1)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.15)"},children:r(I,{spacing:0,align:"stretch",children:[r(S,{justify:"space-between",p:6,borderBottom:"1px solid rgba(255, 255, 255, 0.1)",_light:{borderBottom:"1px solid rgba(0, 0, 0, 0.1)"},children:[r(S,{spacing:4,children:[e(i,{fontSize:"2xl",fontWeight:"bold",color:"white",_light:{color:"gray.800"},children:"\u041B\u043E\u0433\u0438 \u0431\u0430\u043B\u0430\u043D\u0441\u0435\u0440\u0430"}),e(T,{colorScheme:u?"green":"red",fontSize:"xs",px:3,py:1,borderRadius:"full",fontWeight:"semibold",children:u?"\u041F\u043E\u0434\u043A\u043B\u044E\u0447\u0435\u043D\u043E":"\u041E\u0442\u043A\u043B\u044E\u0447\u0435\u043D\u043E"})]}),r(S,{spacing:4,children:[r(S,{spacing:2,children:[e(i,{fontSize:"sm",fontWeight:"medium",color:"gray.400",_light:{color:"gray.600"},children:"\u0410\u0432\u0442\u043E-\u043F\u0440\u043E\u043A\u0440\u0443\u0442\u043A\u0430"}),e(Se,{isChecked:d,onChange:n=>b(n.target.checked),colorScheme:"blue"})]}),r(S,{spacing:2,children:[e(i,{fontSize:"sm",fontWeight:"medium",color:"gray.400",_light:{color:"gray.600"},children:"\u041F\u0430\u0443\u0437\u0430"}),e(Se,{isChecked:m,onChange:n=>_(n.target.checked),colorScheme:"orange"})]})]})]}),e(w,{p:4,borderBottom:"1px solid rgba(255, 255, 255, 0.1)",_light:{borderBottom:"1px solid rgba(0, 0, 0, 0.1)"},children:r(Ar,{size:"lg",children:[e(Po,{pointerEvents:"none",children:e(ha,{color:"gray.400"})}),e(Y,{placeholder:"\u0424\u0438\u043B\u044C\u0442\u0440 \u043B\u043E\u0433\u043E\u0432...",value:p,onChange:n=>y(n.target.value),borderRadius:"20px",bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",color:"white",_light:{bg:"rgba(255, 255, 255, 0.7)",border:"1px solid rgba(0, 0, 0, 0.1)",color:"gray.800"},_focus:{borderColor:"blue.400",boxShadow:"0 0 0 1px blue.400"}})]})}),r(b0,{variant:"unstyled",children:[r(S,{spacing:2,px:6,pt:4,pb:2,children:[r(Wr,{borderRadius:"20px",px:6,py:2,fontSize:"sm",fontWeight:"600",transition:"all 0.3s",color:"gray.400",_light:{color:"gray.600"},_selected:{bg:"rgba(255, 255, 255, 0.1)",color:"blue.300",_light:{bg:"white",color:"blue.600",boxShadow:"sm"}},children:["\u041F\u043E\u0434\u043A\u043B\u044E\u0447\u0435\u043D\u0438\u044F (",D.length,")"]}),r(Wr,{borderRadius:"20px",px:6,py:2,fontSize:"sm",fontWeight:"600",transition:"all 0.3s",color:"gray.400",_light:{color:"gray.600"},_selected:{bg:"rgba(255, 255, 255, 0.1)",color:"red.300",_light:{bg:"white",color:"red.600",boxShadow:"sm"}},children:["\u041E\u0448\u0438\u0431\u043A\u0438 (",B.length,")"]})]}),r(p0,{children:[e(ir,{px:6,pb:6,children:r(I,{align:"stretch",spacing:3,children:[e(S,{justify:"flex-end",children:e(q,{size:"sm",colorScheme:"red",variant:"ghost",onClick:()=>C("connection"),borderRadius:"lg",children:"\u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C"})}),e(w,{ref:c,bg:"rgba(0, 0, 0, 0.3)",borderRadius:"xl",border:"1px solid rgba(255, 255, 255, 0.08)",p:4,maxH:"500px",overflowY:"auto",fontFamily:"mono",fontSize:"xs",color:"green.300",css:{"&::-webkit-scrollbar":{width:"8px"},"&::-webkit-scrollbar-track":{background:"transparent"},"&::-webkit-scrollbar-thumb":{background:"rgba(255, 255, 255, 0.2)",borderRadius:"4px"}},children:D.length===0?e(i,{color:"gray.500",textAlign:"center",py:8,children:"\u041D\u0435\u0442 \u043B\u043E\u0433\u043E\u0432 \u043F\u043E\u0434\u043A\u043B\u044E\u0447\u0435\u043D\u0438\u0439"}):D.map((n,f)=>{var v;return e(w,{mb:3,_hover:{bg:"whiteAlpha.100"},p:3,borderRadius:"lg",borderWidth:"1px",borderColor:"whiteAlpha.200",children:r(I,{align:"stretch",spacing:1,children:[r(S,{justify:"space-between",flexWrap:"wrap",children:[r(S,{spacing:3,children:[e(T,{colorScheme:"green",fontSize:"xs",px:2,py:.5,borderRadius:"md",children:((v=n.protocol)==null?void 0:v.toUpperCase())||"SOCKS5"}),e(i,{color:"gray.400",fontSize:"xs",children:new Date(n.timestamp).toLocaleString()})]}),n.duration&&r(T,{colorScheme:"blue",fontSize:"xs",px:2,py:.5,borderRadius:"md",children:[n.duration,"ms"]})]}),r(S,{spacing:2,color:"cyan.300",fontSize:"sm",children:[e(i,{fontWeight:"bold",children:n.clientIp}),e(i,{color:"gray.500",children:"\u2192"}),e(i,{color:"yellow.300",children:n.target||n.destination}),e(i,{color:"gray.500",children:"\u0447\u0435\u0440\u0435\u0437"}),e(i,{color:"green.300",fontWeight:"semibold",children:n.proxy})]}),(n.bytesTransferred||n.dataSize)&&r(S,{spacing:4,fontSize:"xs",color:"gray.400",children:[r(i,{children:[e(i,{as:"span",color:"purple.300",children:"\u0414\u0430\u043D\u043D\u044B\u0435:"})," ",n.bytesTransferred||n.dataSize]}),n.responseTime&&r(i,{children:[e(i,{as:"span",color:"blue.300",children:"\u041E\u0442\u0432\u0435\u0442:"})," ",n.responseTime,"ms"]})]})]})},f)})})]})}),e(ir,{px:6,pb:6,children:r(I,{align:"stretch",spacing:3,children:[e(S,{justify:"flex-end",children:e(q,{size:"sm",colorScheme:"red",variant:"ghost",onClick:()=>C("error"),borderRadius:"lg",children:"\u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C"})}),e(w,{ref:c,bg:"rgba(0, 0, 0, 0.3)",borderRadius:"xl",border:"1px solid rgba(255, 255, 255, 0.08)",p:4,maxH:"500px",overflowY:"auto",fontFamily:"mono",fontSize:"xs",color:"red.300",css:{"&::-webkit-scrollbar":{width:"8px"},"&::-webkit-scrollbar-track":{background:"transparent"},"&::-webkit-scrollbar-thumb":{background:"rgba(255, 255, 255, 0.2)",borderRadius:"4px"}},children:B.length===0?e(i,{color:"gray.500",textAlign:"center",py:8,children:"\u041D\u0435\u0442 \u043E\u0448\u0438\u0431\u043E\u043A"}):B.map((n,f)=>e(w,{mb:3,_hover:{bg:"whiteAlpha.100"},p:3,borderRadius:"lg",borderWidth:"1px",borderColor:"red.900",bg:"red.950",children:r(I,{align:"stretch",spacing:2,children:[r(S,{justify:"space-between",flexWrap:"wrap",children:[r(S,{spacing:3,children:[e(T,{colorScheme:"red",fontSize:"xs",px:2,py:.5,borderRadius:"md",children:"ERROR"}),e(i,{color:"gray.400",fontSize:"xs",children:new Date(n.timestamp).toLocaleString()})]}),n.errorCode&&e(T,{colorScheme:"orange",fontSize:"xs",px:2,py:.5,borderRadius:"md",children:n.errorCode})]}),e(i,{color:"red.300",fontSize:"sm",fontWeight:"semibold",children:n.message||n.error}),n.proxy&&r(S,{spacing:2,fontSize:"xs",children:[e(i,{color:"gray.400",children:"\u041F\u0440\u043E\u043A\u0441\u0438:"}),e(i,{color:"yellow.300",children:n.proxy})]}),n.target&&r(S,{spacing:2,fontSize:"xs",children:[e(i,{color:"gray.400",children:"\u0426\u0435\u043B\u044C:"}),e(i,{color:"cyan.300",children:n.target})]}),n.clientIp&&r(S,{spacing:2,fontSize:"xs",children:[e(i,{color:"gray.400",children:"\u041A\u043B\u0438\u0435\u043D\u0442:"}),e(i,{color:"purple.300",children:n.clientIp})]}),n.stack&&e(w,{mt:2,p:2,bg:"blackAlpha.500",borderRadius:"md",fontSize:"10px",color:"gray.500",maxH:"100px",overflowY:"auto",children:e(i,{whiteSpace:"pre-wrap",children:n.stack})})]})},f))})]})})]})]})]})})},_l=A(Oo,{baseStyle:{w:4,h:4}});A(jo,{baseStyle:{w:4,h:4}});A(Ho,{baseStyle:{w:4,h:4}});const yl=A(h0,{baseStyle:{w:4,h:4}}),Cl=A(Lr,{baseStyle:{w:6,h:6,strokeWidth:2}}),v0=A(Pe,{baseStyle:{field:{bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"20px",color:"white",_light:{bg:"rgba(255, 255, 255, 0.7)",border:"1px solid rgba(0, 0, 0, 0.1)",color:"gray.800"},_focus:{borderColor:"blue.400",boxShadow:"0 0 0 1px blue.400"}},icon:{color:"whiteAlpha.700",_light:{color:"gray.500"}}}}),vl=A(Yo,{baseStyle:{w:5,h:5,cursor:"pointer"}}),Dr=A(hr,{baseStyle:{bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"20px",color:"white",_light:{bg:"rgba(255, 255, 255, 0.7)",border:"1px solid rgba(0, 0, 0, 0.1)",color:"gray.800"},_focus:{borderColor:"blue.400",boxShadow:"0 0 0 1px blue.400"},_placeholder:{color:"whiteAlpha.400",_light:{color:"gray.400"}}}}),o0=k.object({remark:k.string(),address:k.string(),port:k.number().nullable().optional(),sni:k.string(),host:k.string(),path:k.string().optional().nullable(),security:k.string(),alpn:k.string(),fingerprint:k.string(),allowinsecure:k.boolean(),is_disabled:k.boolean(),mux_enable:k.boolean(),fragment_setting:k.string().optional().nullable(),noise_setting:k.string().optional().nullable(),random_user_agent:k.boolean().optional().nullable()}),kl=k.object({VMess:k.array(o0).optional(),VLess:k.array(o0).optional(),Trojan:k.array(o0).optional(),Shadowsocks:k.array(o0).optional()}),El=({hostKey:o,index:t})=>{var u,s,d,b,p,y,m,_,c,h,R,D,B,C,n,f,v,L,N,Z,ee,W,ae,ne,H,g,U,M,X,oe,Fe,ye,ur,dr,ie,Oe,cr,Qe,gr,Ze,Xe,Je,Ke,er,rr;const{t:a}=V(),l=Ur();return r(le,{columns:{base:1,md:2},spacing:4,children:[r(z,{isInvalid:!!((s=(u=l.formState.errors[o])==null?void 0:u[t])!=null&&s.remark),gridColumn:{md:"span 2"},children:[e(F,{ms:"4px",fontSize:"sm",fontWeight:"normal",children:a("hostsDialog.remark")}),r(Ar,{children:[e(Dr,{...l.register(`${o}.${t}.remark`),size:"sm",placeholder:"\u041F\u0440\u0438\u043C\u0435\u0447\u0430\u043D\u0438\u0435"}),e(Qr,{children:r(Be,{isLazy:!0,placement:"right",children:[e(Te,{children:e(w,{mt:"-8px",children:e(vl,{})})}),e(fe,{children:r(We,{children:[e(Le,{}),e(Ue,{}),e(A0,{children:e(w,{fontSize:"xs",children:e(i,{pr:"20px",children:"\u041F\u0440\u0438\u043C\u0435\u0447\u0430\u043D\u0438\u0435 \u043A \u0445\u043E\u0441\u0442\u0443"})})})]})})]})})]}),e(we,{children:(p=(b=(d=l.formState.errors[o])==null?void 0:d[t])==null?void 0:b.remark)==null?void 0:p.message})]}),r(z,{isInvalid:!!((m=(y=l.formState.errors[o])==null?void 0:y[t])!=null&&m.address),children:[e(F,{ms:"4px",fontSize:"sm",fontWeight:"normal",children:"\u0410\u0434\u0440\u0435\u0441"}),e(Dr,{...l.register(`${o}.${t}.address`),size:"sm",placeholder:"\u0410\u0434\u0440\u0435\u0441"}),e(we,{children:(h=(c=(_=l.formState.errors[o])==null?void 0:_[t])==null?void 0:c.address)==null?void 0:h.message})]}),r(z,{isInvalid:!!((D=(R=l.formState.errors[o])==null?void 0:R[t])!=null&&D.port),children:[e(F,{ms:"4px",fontSize:"sm",fontWeight:"normal",children:"\u041F\u043E\u0440\u0442"}),e(se,{control:l.control,name:`${o}.${t}.port`,render:({field:E})=>e(Dr,{...E,onChange:O=>{O.target.value===""?E.onChange(O.target.value):isNaN(Number(O.target.value))||E.onChange(Number(O.target.value))},size:"sm",placeholder:"\u041F\u043E\u0440\u0442"})}),e(we,{children:(n=(C=(B=l.formState.errors[o])==null?void 0:B[t])==null?void 0:C.port)==null?void 0:n.message})]}),r(z,{isInvalid:!!((v=(f=l.formState.errors[o])==null?void 0:f[t])!=null&&v.sni),children:[e(F,{ms:"4px",fontSize:"sm",fontWeight:"normal",children:"SNI"}),e(Dr,{...l.register(`${o}.${t}.sni`),size:"sm",placeholder:"SNI"}),e(we,{children:(Z=(N=(L=l.formState.errors[o])==null?void 0:L[t])==null?void 0:N.sni)==null?void 0:Z.message})]}),r(z,{isInvalid:!!((W=(ee=l.formState.errors[o])==null?void 0:ee[t])!=null&&W.host),children:[e(F,{ms:"4px",fontSize:"sm",fontWeight:"normal",children:"\u0425\u043E\u0441\u0442"}),e(Dr,{...l.register(`${o}.${t}.host`),size:"sm",placeholder:"\u0425\u043E\u0441\u0442"}),e(we,{children:(H=(ne=(ae=l.formState.errors[o])==null?void 0:ae[t])==null?void 0:ne.host)==null?void 0:H.message})]}),r(z,{isInvalid:!!((U=(g=l.formState.errors[o])==null?void 0:g[t])!=null&&U.path),children:[e(F,{ms:"4px",fontSize:"sm",fontWeight:"normal",children:"\u041F\u0443\u0442\u044C"}),e(Dr,{...l.register(`${o}.${t}.path`),size:"sm",placeholder:"\u041F\u0443\u0442\u044C"}),e(we,{children:(oe=(X=(M=l.formState.errors[o])==null?void 0:M[t])==null?void 0:X.path)==null?void 0:oe.message})]}),r(z,{isInvalid:!!((ye=(Fe=l.formState.errors[o])==null?void 0:Fe[t])!=null&&ye.security),children:[e(F,{ms:"4px",fontSize:"sm",fontWeight:"normal",children:"\u0411\u0435\u0437\u043E\u043F\u0430\u0441\u043D\u043E\u0441\u0442\u044C"}),e(v0,{...l.register(`${o}.${t}.security`),size:"sm",sx:{option:{bg:"rgba(30, 35, 50, 0.98)",color:"white",_light:{bg:"white",color:"gray.800"}}},children:dt.map(E=>e("option",{value:E.value,children:E.title},E.value))}),e(we,{children:(ie=(dr=(ur=l.formState.errors[o])==null?void 0:ur[t])==null?void 0:dr.security)==null?void 0:ie.message})]}),r(z,{isInvalid:!!((cr=(Oe=l.formState.errors[o])==null?void 0:Oe[t])!=null&&cr.alpn),children:[e(F,{ms:"4px",fontSize:"sm",fontWeight:"normal",children:"ALPN"}),e(v0,{...l.register(`${o}.${t}.alpn`),size:"sm",sx:{option:{bg:"rgba(30, 35, 50, 0.98)",color:"white",_light:{bg:"white",color:"gray.800"}}},children:ct.map(E=>e("option",{value:E.value,children:E.title},E.value))}),e(we,{children:(Ze=(gr=(Qe=l.formState.errors[o])==null?void 0:Qe[t])==null?void 0:gr.alpn)==null?void 0:Ze.message})]}),r(z,{isInvalid:!!((Je=(Xe=l.formState.errors[o])==null?void 0:Xe[t])!=null&&Je.fingerprint),children:[e(F,{ms:"4px",fontSize:"sm",fontWeight:"normal",children:"\u041E\u0442\u043F\u0435\u0447\u0430\u0442\u043E\u043A"}),e(v0,{...l.register(`${o}.${t}.fingerprint`),size:"sm",sx:{option:{bg:"rgba(30, 35, 50, 0.98)",color:"white",_light:{bg:"white",color:"gray.800"}}},children:gt.map(E=>e("option",{value:E.value,children:E.title},E.value))}),e(we,{children:(rr=(er=(Ke=l.formState.errors[o])==null?void 0:Ke[t])==null?void 0:er.fingerprint)==null?void 0:rr.message})]}),e(z,{children:r(S,{justifyContent:"space-between",w:"full",children:[e(F,{ms:"4px",fontSize:"sm",fontWeight:"normal",children:"\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044C \u043D\u0435\u0431\u0435\u0437\u043E\u043F\u0430\u0441\u043D\u044B\u0435"}),e(se,{control:l.control,name:`${o}.${t}.allowinsecure`,render:({field:E})=>e(Se,{colorScheme:"primary",isChecked:E.value,onChange:E.onChange})})]})}),e(z,{children:r(S,{justifyContent:"space-between",w:"full",children:[e(F,{ms:"4px",fontSize:"sm",fontWeight:"normal",children:"\u041C\u0443\u043B\u044C\u0442\u0438\u043F\u043B\u0435\u043A\u0441\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435"}),e(se,{control:l.control,name:`${o}.${t}.mux_enable`,render:({field:E})=>e(Se,{colorScheme:"primary",isChecked:E.value,onChange:E.onChange})})]})}),e(z,{children:r(S,{justifyContent:"space-between",w:"full",children:[e(F,{ms:"4px",fontSize:"sm",fontWeight:"normal",children:"\u041E\u0442\u043A\u043B\u044E\u0447\u0435\u043D\u043E"}),e(se,{control:l.control,name:`${o}.${t}.is_disabled`,render:({field:E})=>e(Se,{colorScheme:"red",isChecked:E.value,onChange:E.onChange})})]})})]})},Dl=({isOpen:o,onClose:t,hostKey:a,index:l})=>(V(),r(he,{isOpen:o,onClose:t,size:"4xl",isCentered:!0,children:[e(de,{bg:"blackAlpha.300",backdropFilter:"blur(10px)"}),r(xe,{mx:"3",bg:"rgba(30, 35, 50, 0.95)",backdropFilter:"blur(20px) saturate(180%)",borderRadius:"30px",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.37)",_light:{bg:"rgba(255, 255, 255, 0.95)",border:"1px solid rgba(0, 0, 0, 0.1)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.15)"},children:[r(ce,{borderBottom:"1px solid rgba(255, 255, 255, 0.1)",color:"white",_light:{color:"gray.900"},children:[a," #",l+1]}),e(ge,{mt:3,bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"full",color:"white",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(0, 0, 0, 0.1)",color:"gray.600",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.08), inset 0 1px 0 rgba(255, 255, 255, 0.5)"},_hover:{bg:"rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.95)"}}}),e(be,{pb:6,children:e(El,{hostKey:a,index:l})})]})]})),zl=({hostKey:o,index:t,onEdit:a,onDelete:l,onDuplicate:u})=>{const s=Ur(),{t:d}=V(),b=s.watch(`${o}.${t}.remark`),p=s.watch(`${o}.${t}.address`),y=s.watch(`${o}.${t}.port`),m=s.watch(`${o}.${t}.is_disabled`);return r(ze,{p:5,display:"flex",flexDirection:"column",h:"full",opacity:m?.6:1,children:[r(S,{justify:"space-between",mb:4,children:[e(i,{fontWeight:"bold",fontSize:"md",noOfLines:1,children:b||`Host #${t+1}`}),m&&e(T,{colorScheme:"red",children:d("disabled")})]}),r(I,{align:"start",spacing:2,flex:1,mb:4,children:[r(S,{children:[e(T,{fontSize:"xs",colorScheme:"purple",children:"Addr"}),e(i,{fontSize:"sm",fontFamily:"mono",noOfLines:1,children:p})]}),r(S,{children:[e(T,{fontSize:"xs",colorScheme:"blue",children:"Port"}),e(i,{fontSize:"sm",fontFamily:"mono",children:y})]})]}),r(S,{spacing:2,mt:"auto",justify:"flex-end",children:[e(G,{label:"\u0414\u0443\u0431\u043B\u0438\u0440\u043E\u0432\u0430\u0442\u044C",children:e(P,{"aria-label":"duplicate",size:"sm",icon:e(_l,{}),onClick:u,variant:"ghost",borderRadius:"full",bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",color:"white",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(0, 0, 0, 0.1)",color:"gray.600",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.08), inset 0 1px 0 rgba(255, 255, 255, 0.5)"},_hover:{bg:"rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.95)"}}})}),e(G,{label:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C",children:e(P,{"aria-label":"delete",size:"sm",icon:e(Mr,{}),onClick:l,variant:"ghost",borderRadius:"full",bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",color:"white",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(0, 0, 0, 0.1)",color:"gray.600",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.08), inset 0 1px 0 rgba(255, 255, 255, 0.5)"},_hover:{bg:"rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.95)"}}})}),e(P,{"aria-label":"edit",size:"sm",icon:e(yl,{}),onClick:a,variant:"ghost",borderRadius:"full",bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",color:"white",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(0, 0, 0, 0.1)",color:"gray.600",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.08), inset 0 1px 0 rgba(255, 255, 255, 0.5)"},_hover:{bg:"rgba(255, 255, 255, 0.1)",_light:{bg:"rgba(255, 255, 255, 0.95)"}}})]})]})},Rl=({onClick:o})=>(V(),r(ze,{p:5,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",h:"full",minH:"150px",cursor:"pointer",onClick:o,transition:"all 0.2s",_hover:{transform:"translateY(-2px)",boxShadow:"lg"},borderStyle:"dashed",bg:"transparent",children:[e(w,{p:3,borderRadius:"full",bg:"whiteAlpha.100",_light:{bg:"blackAlpha.50"},mb:3,children:e(Cl,{})}),e(i,{fontWeight:"medium",fontSize:"sm",children:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"})]})),Fl=({hostKey:o})=>{const t=Ur(),{fields:a,append:l,remove:u}=qo({control:t.control,name:o}),[s,d]=x.exports.useState(null),{isOpen:b,onOpen:p,onClose:y}=yr(),m=h=>{d(h),p()},_=h=>{const R=t.getValues(`${o}.${h}`);l(R)},c=()=>{l({remark:"",address:"",port:null,sni:"",host:"",security:"inbound_default",alpn:"",fingerprint:"",allowinsecure:!1,is_disabled:!1,mux_enable:!1}),d(a.length),p()};return r(ke,{children:[r(le,{columns:{base:1,md:2,lg:3,xl:4},spacing:4,mt:4,children:[a.map((h,R)=>e(zl,{hostKey:o,index:R,onEdit:()=>m(R),onDelete:()=>u(R),onDuplicate:()=>_(R)},h.id)),e(Rl,{onClick:c})]}),s!==null&&e(Dl,{isOpen:b,onClose:()=>{y(),d(null)},hostKey:o,index:s})]})},Eo=()=>{const{t:o}=V(),t=pe(),{isLoading:a,fetchHosts:l,hosts:u,postHosts:s,isPostLoading:d}=bt(),b=qe({resolver:kr(kl)});x.exports.useEffect(()=>{l()},[]),x.exports.useEffect(()=>{u&&b.reset(u)},[u]);const p=y=>{s(y).then(()=>{t({title:o("hostsDialog.hostsUpdated"),status:"success",isClosable:!0,position:"top",duration:3e3})}).catch(m=>{var _,c;(((_=m==null?void 0:m.response)==null?void 0:_.status)===409||((c=m==null?void 0:m.response)==null?void 0:c.status)===400)&&Object.keys(m.response._data.detail).map(h=>{t({title:m.response._data.detail[h]+" ("+h+")",status:"error",isClosable:!0,position:"top",duration:3e3})})})};return e(w,{maxW:"1400px",mx:"auto",children:e(Y0,{...b,children:r("form",{onSubmit:b.handleSubmit(p),children:[a&&e(i,{children:o("hostsDialog.loading")}),!a&&u&&r(b0,{variant:"soft-rounded",colorScheme:"purple",children:[e(G0,{overflowX:"auto",py:2,children:Object.keys(u).map(y=>{var m;return r(Wr,{whiteSpace:"nowrap",children:[y,e(T,{ml:2,colorScheme:"gray",borderRadius:"full",children:((m=b.watch(y))==null?void 0:m.length)||0})]},y)})}),e(p0,{children:Object.keys(u).map(y=>e(ir,{px:0,children:e(Fl,{hostKey:y})},y))})]}),e(S,{justifyContent:"flex-end",py:4,mt:4,position:"sticky",bottom:0,bg:"transparent",backdropFilter:"blur(5px)",zIndex:10,children:e(J0,{type:"submit",candyVariant:"primary",size:"lg",px:10,borderRadius:"full",isLoading:d,disabled:d,boxShadow:"xl",children:o("hostsDialog.apply")})})]})})})},Al=({isOpen:o,onClose:t,node:a})=>{const{t:l}=V(),u=pe(),s=Kr(),{addNode:d,updateNode:b}=sr(),p=!!a,y=qe({resolver:kr(X0),defaultValues:a||{...L0(),add_as_new_host:!1}});x.exports.useEffect(()=>{o&&y.reset(a||{...L0(),add_as_new_host:!1})},[o,a,y]);const m=lr(p?b:d,{onSuccess:()=>{f0(p?"Node updated successfully":l("nodes.addNodeSuccess",{name:y.getValues("name")}),u),s.invalidateQueries(Cr),t()},onError:_=>{m0(_,u,y)}});return g0({queryKey:"node-settings",queryFn:()=>j("/node/settings"),enabled:o}),r(he,{isOpen:o,onClose:t,size:"2xl",isCentered:!0,children:[e(de,{backdropFilter:"blur(10px)"}),r(xe,{bg:"rgba(23, 25, 35, 0.85)",backdropFilter:"blur(16px)",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.37)",borderRadius:"24px",color:"white",children:[e(ce,{borderBottom:"1px solid rgba(255, 255, 255, 0.1)",children:p?"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0443\u0437\u0435\u043B":"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0443\u0437\u0435\u043B"}),e(ge,{}),e(be,{pb:6,children:r(I,{spacing:4,children:[r(z,{isRequired:!0,children:[e(F,{children:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435"}),e(Y,{...y.register("name"),bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"xl",_focus:{borderColor:"blue.400",boxShadow:"0 0 0 1px blue.400"}})]}),r(S,{width:"100%",children:[r(z,{isRequired:!0,children:[e(F,{children:"\u0410\u0434\u0440\u0435\u0441"}),e(Y,{...y.register("address"),bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"xl",_focus:{borderColor:"blue.400",boxShadow:"0 0 0 1px blue.400"}})]}),r(z,{isRequired:!0,children:[e(F,{children:"\u041F\u043E\u0440\u0442"}),e(Y,{...y.register("port"),bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"xl",_focus:{borderColor:"blue.400",boxShadow:"0 0 0 1px blue.400"}})]})]}),r(S,{width:"100%",children:[r(z,{isRequired:!0,children:[e(F,{children:"API \u041F\u043E\u0440\u0442"}),e(Y,{...y.register("api_port"),bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"xl",_focus:{borderColor:"blue.400",boxShadow:"0 0 0 1px blue.400"}})]}),r(z,{children:[e(F,{children:"\u041A\u043E\u044D\u0444\u0444\u0438\u0446\u0438\u0435\u043D\u0442 \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u0438\u044F"}),e(Y,{...y.register("usage_coefficient"),bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"xl",_focus:{borderColor:"blue.400",boxShadow:"0 0 0 1px blue.400"}})]})]}),!p&&e(z,{children:e(xr,{...y.register("add_as_new_host"),children:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043A\u0430\u043A \u043D\u043E\u0432\u044B\u0439 \u0445\u043E\u0441\u0442 \u0434\u043B\u044F \u0432\u0441\u0435\u0445 \u0432\u0445\u043E\u0434\u044F\u0449\u0438\u0445"})}),r(z,{display:"flex",alignItems:"center",children:[e(F,{mb:"0",children:"\u0421\u0442\u0430\u0442\u0443\u0441"}),e(se,{name:"status",control:y.control,render:({field:_})=>e(Se,{colorScheme:"green",isChecked:_.value!=="disabled",onChange:c=>_.onChange(c.target.checked?"connecting":"disabled")})})]})]})}),r(ve,{borderTop:"1px solid rgba(255, 255, 255, 0.1)",children:[e(q,{variant:"ghost",mr:3,onClick:t,color:"whiteAlpha.700",children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),e(J0,{candyVariant:"primary",onClick:y.handleSubmit(_=>m.mutate(_)),isLoading:m.isLoading,children:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C"})]})]})]})},Il=({node:o,onEdit:t,onDelete:a})=>{V();const{reconnectNode:l}=sr(),u=Kr(),s=pe(),{isLoading:d,mutate:b}=lr(()=>l(o),{onSuccess:()=>{u.invalidateQueries(Cr),s({title:"Reconnected",status:"success"})}}),p=d?"connecting":o.status?o.status:"error";return r(ze,{p:5,display:"flex",flexDirection:"column",h:"full",position:"relative",children:[r(S,{justify:"space-between",mb:4,children:[e(i,{fontWeight:"bold",fontSize:"lg",noOfLines:1,children:o.name}),e(ht,{status:p,compact:!0})]}),r(I,{align:"start",spacing:2,flex:1,mb:4,children:[r(S,{children:[e(T,{fontSize:"xs",colorScheme:"purple",children:"Addr"}),e(i,{fontSize:"sm",fontFamily:"mono",children:o.address})]}),r(S,{children:[e(T,{fontSize:"xs",colorScheme:"blue",children:"Port"}),e(i,{fontSize:"sm",fontFamily:"mono",children:o.port})]}),r(S,{children:[e(T,{fontSize:"xs",colorScheme:"green",children:"Ver"}),e(i,{fontSize:"sm",fontFamily:"mono",children:o.xray_version||"Unknown"})]})]}),r(S,{spacing:2,mt:"auto",justify:"flex-end",children:[e(G,{label:"\u041F\u0435\u0440\u0435\u043F\u043E\u0434\u043A\u043B\u044E\u0447\u0438\u0442\u044C",children:e(P,{"aria-label":"reconnect",size:"sm",icon:e(Ye,{style:{width:"16px"}}),onClick:()=>b(),isLoading:d,variant:"ghost",color:"white",bg:"rgba(255, 255, 255, 0.1)",_hover:{bg:"rgba(255, 255, 255, 0.2)"}})}),e(G,{label:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C",children:e(P,{"aria-label":"delete",size:"sm",icon:e(Lo,{style:{width:"16px"}}),onClick:a,variant:"ghost",color:"white",bg:"rgba(255, 255, 255, 0.1)",_hover:{bg:"rgba(255, 255, 255, 0.2)"}})}),e(P,{"aria-label":"edit",size:"sm",icon:e(h0,{style:{width:"16px"}}),onClick:t,variant:"ghost",color:"white",bg:"rgba(255, 255, 255, 0.1)",_hover:{bg:"rgba(255, 255, 255, 0.2)"}})]})]})},Do=()=>{V();const{data:o,isLoading:t}=x0(),{isOpen:a,onOpen:l,onClose:u}=yr(),[s,d]=x.exports.useState(void 0),{setDeletingNode:b}=sr(),p=()=>{d(void 0),l()},y=m=>{d(m),l()};return r(w,{maxW:"1400px",mx:"auto",children:[t?e(i,{children:"Loading..."}):r(le,{columns:{base:1,md:2,lg:3,xl:4},spacing:4,children:[o==null?void 0:o.map(m=>e(Il,{node:m,onEdit:()=>y(m),onDelete:()=>b(m)},m.id||m.name)),e(ze,{p:5,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",h:"200px",cursor:"pointer",onClick:p,transition:"all 0.2s",_hover:{transform:"translateY(-2px)",boxShadow:"lg"},borderStyle:"dashed",bg:"rgba(255, 255, 255, 0.05)",children:r(I,{spacing:3,children:[e(w,{p:3,borderRadius:"full",bg:"rgba(255, 255, 255, 0.1)",color:"white",children:e(Lr,{style:{width:"24px"}})}),e(i,{fontWeight:"bold",children:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0443\u0437\u0435\u043B"})]})})]}),e(Al,{isOpen:a,onClose:()=>{u(),d(void 0)},node:s}),e(pt,{deleteCallback:()=>{}})]})},Bl=()=>{const[o,t]=x.exports.useState([]),[a,l]=x.exports.useState(!1),{updateConfig:u}=Z0(),s=async()=>{l(!0);try{const b=await j("/api/core/config/history");t(b)}catch(b){console.error(b)}finally{l(!1)}};x.exports.useEffect(()=>{s()},[]);const d=async b=>{if(confirm("\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B, \u0447\u0442\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0432\u043E\u0441\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u044C \u044D\u0442\u0443 \u043A\u043E\u043D\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044E?"))try{await u(b),s()}catch(p){console.error(p)}};return r(w,{bg:"rgba(255, 255, 255, 0.03)",backdropFilter:"blur(20px) saturate(180%)",borderRadius:"30px",border:"1px solid rgba(255, 255, 255, 0.08)",p:6,mt:6,_light:{bg:"white",border:"1px solid",borderColor:"gray.200",boxShadow:"sm"},children:[r(S,{justify:"space-between",mb:4,children:[r(S,{children:[e(q0,{style:{width:20}}),e(i,{fontSize:"lg",fontWeight:"bold",children:"\u0418\u0441\u0442\u043E\u0440\u0438\u044F \u043A\u043E\u043D\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0439"})]}),e(P,{"aria-label":"Refresh",icon:e(Ye,{style:{width:20}}),onClick:s,size:"sm",variant:"ghost"})]}),r(I,{align:"stretch",spacing:3,maxH:"400px",overflowY:"auto",pr:2,css:{"&::-webkit-scrollbar":{width:"4px"},"&::-webkit-scrollbar-track":{width:"6px"},"&::-webkit-scrollbar-thumb":{background:"rgba(255, 255, 255, 0.1)",borderRadius:"24px"}},children:[a&&o.length===0?e(Ge,{}):o.map(b=>r(S,{justify:"space-between",p:3,bg:"rgba(255,255,255,0.05)",borderRadius:"xl",_light:{bg:"gray.50"},children:[r(I,{align:"start",spacing:0,children:[e(i,{fontSize:"sm",fontWeight:"bold",children:new Date(b.created_at).toLocaleString()}),e(i,{fontSize:"xs",color:"gray.500",children:b.note||"\u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0435 \u043A\u043E\u043D\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438"})]}),e(q,{size:"sm",colorScheme:"blue",variant:"ghost",onClick:()=>d(b.content),children:"\u0412\u043E\u0441\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u044C"})]},b.id)),!a&&o.length===0&&e(i,{color:"gray.500",children:"\u0418\u0441\u0442\u043E\u0440\u0438\u044F \u043F\u0443\u0441\u0442\u0430"})]})]})},zo=500,Tl=o=>({[Me.ReadyState.CONNECTING]:"connecting",[Me.ReadyState.OPEN]:"connected",[Me.ReadyState.CLOSING]:"closed",[Me.ReadyState.CLOSED]:"closed",[Me.ReadyState.UNINSTANTIATED]:"closed"})[o],Wl=o=>{try{let t=new URL("http://127.0.0.1:8000".startsWith("/")?window.location.origin+"http://127.0.0.1:8000":"http://127.0.0.1:8000");return(t.protocol==="https:"?"wss://":"ws://")+N0([t.host+t.pathname,o?`/node/${o}/logs`:"/core/logs"])+"?interval=1&token="+Xr()}catch(t){return console.error("Unable to generate websocket url"),console.error(t),null}};let pr=[];const Ll=A(Ye,{baseStyle:{w:4,h:4}}),Ul=A(Bo,{baseStyle:{w:4,h:4}}),Ml=A(To,{baseStyle:{w:3,h:3}}),Ro=()=>{const{colorMode:t}=nr(),{data:a}=x0(),[l,u]=x.exports.useState(""),[s,d]=x.exports.useState([]);Ne("white","gray.800"),Ne("gray.200","gray.700");const b=(g,U)=>{g!==l&&(g==="host"?(u(""),d([])):(u(g),d([])))},p=x.exports.useRef(null),y=x.exports.useRef(!0),m=x.exports.useCallback($0(g=>{var M,X,oe;const U=Math.abs((((M=p.current)==null?void 0:M.scrollTop)||0)-(((X=p.current)==null?void 0:X.scrollHeight)||0)+(((oe=p.current)==null?void 0:oe.offsetHeight)||0))<10;p.current&&U?y.current=!0:y.current=!1,g.length<40&&d(g)},300),[]),{readyState:_}=Wo(Wl(l),{onMessage:g=>{pr.push(g.data),pr.length>zo&&(pr=pr.splice(0,pr.length-zo)),m([...pr])},shouldReconnect:()=>!0,reconnectAttempts:10,reconnectInterval:1e3});x.exports.useEffect(()=>{var g;p.current&&y.current&&(p.current.scrollTop=(g=p.current)==null?void 0:g.scrollHeight)},[s]),x.exports.useEffect(()=>()=>{pr=[]},[]);const{fetchCoreSettings:c,updateConfig:h,isLoading:R,config:D,isPostLoading:B,version:C,restartCore:n}=Z0(),{t:f}=V();pe();const v=qe({defaultValues:{config:D||{}}});x.exports.useEffect(()=>{D&&v.setValue("config",D)},[D]),x.exports.useEffect(()=>{c()},[]);const{mutate:L,isLoading:N}=lr(n),Z=x.exports.useRef(null),[ee,W]=x.exports.useState(!1),ae=()=>{!Z.current||(ee?(document.exitFullscreen(),W(!1)):(Z.current.requestFullscreen(),W(!0)))},ne=({config:g})=>{h(g)},H=Tl(_.toString());return r("form",{onSubmit:v.handleSubmit(ne),style:{height:"100%",display:"flex",flexDirection:"column",gap:"24px"},children:[r(le,{columns:{base:1,lg:2},spacing:6,minH:"500px",children:[e(I,{spacing:4,align:"stretch",h:"full",children:e(ze,{p:6,display:"flex",flexDirection:"column",h:"full",children:r(z,{h:"full",display:"flex",flexDirection:"column",children:[e(I,{spacing:3,align:"stretch",mb:4,children:r(S,{justifyContent:"space-between",flexWrap:"wrap",gap:2,children:[r(S,{flexWrap:"wrap",children:[r(F,{fontSize:{base:"md",md:"lg"},fontWeight:"bold",mb:0,children:[f("core.configuration")," ",R&&e(O0,{isIndeterminate:!0,size:"15px"})]}),e(G,{label:"Xray Version",placement:"top",children:e(T,{height:"100%",textTransform:"lowercase",children:C&&`v${C}`})})]}),r(S,{gap:2,flexWrap:"wrap",children:[e(G,{label:f("core.restartCore"),children:e(P,{"aria-label":"Restart Core",icon:e(Ll,{className:vr({"animate-spin":N})}),onClick:()=>L(),size:"sm",borderRadius:"full",bg:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)",color:"white",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.1)",_hover:{bg:"rgba(255, 255, 255, 0.1)"},_light:{bg:"rgba(255, 255, 255, 0.8)",color:"gray.700",border:"1px solid rgba(0, 0, 0, 0.1)",_hover:{bg:"rgba(255, 255, 255, 0.95)"}}})}),e(q,{size:{base:"xs",md:"sm"},variant:"solid",colorScheme:"primary",px:{base:"3",md:"5"},type:"submit",isDisabled:R||B,isLoading:B,bg:"rgba(102, 126, 234, 0.8)",backdropFilter:"blur(10px)",borderRadius:"30px",border:"1px solid rgba(255, 255, 255, 0.2)",fontSize:"sm",fontWeight:"600",color:"white",boxShadow:"0 4px 15px rgba(102, 126, 234, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.2)",_hover:{bg:"rgba(102, 126, 234, 0.9)",boxShadow:"0 6px 20px rgba(102, 126, 234, 0.5)"},_light:{bg:"rgba(102, 126, 234, 0.9)",_hover:{bg:"rgba(102, 126, 234, 1)"}},children:f("core.save")})]})]})}),r(w,{position:"relative",ref:Z,flex:1,minHeight:{base:"300px",md:"400px"},overflowY:"auto",borderRadius:"xl",bg:"rgba(0, 0, 0, 0.2)",border:"1px solid rgba(255, 255, 255, 0.08)",_light:{bg:"gray.50",border:"1px solid",borderColor:"gray.200"},children:[e(se,{control:v.control,name:"config",render:({field:g})=>e(st,{json:D,onChange:g.onChange})}),e(P,{size:"xs","aria-label":"full screen",variant:"ghost",position:"absolute",top:"2",right:"4",onClick:ae,children:ee?e(Ml,{}):e(Ul,{})})]})]})})}),e(I,{spacing:4,align:"stretch",h:"full",children:e(ze,{p:6,display:"flex",flexDirection:"column",h:"full",children:r(z,{h:"full",display:"flex",flexDirection:"column",children:[r(S,{justifyContent:"space-between",style:{paddingBottom:"1rem"},children:[r(S,{children:[(a==null?void 0:a[0])&&r(Pe,{size:"sm",style:{width:"auto"},disabled:!1,bg:"transparent",_dark:{bg:"transparent"},sx:{option:{backgroundColor:t==="dark"?"#222C3B":"white"}},onChange:g=>b(g.currentTarget.value,g.currentTarget.selectedOptions[0].text),children:[e("option",{value:"host",defaultChecked:!0,children:"Master"},"host"),a&&a.map(g=>e("option",{value:String(g.id),children:f(g.name)},g.address))]}),e(F,{fontSize:"lg",fontWeight:"bold",mb:0,children:"\u041B\u043E\u0433\u0438 \u043A\u043E\u043D\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438"})]}),e(i,{as:F,fontSize:"sm",mb:0,children:f(`core.socket.${H}`)})]}),e(w,{borderRadius:"xl",bg:"rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.08)",_light:{bg:"gray.900",border:"1px solid",borderColor:"gray.200",color:"gray.100"},flex:1,minHeight:{base:"300px",md:"400px"},p:4,overflowY:"auto",ref:p,fontFamily:"monospace",children:s.map((g,U)=>e(i,{fontSize:"xs",opacity:.8,whiteSpace:"pre-line",children:g},U))})]})})})]}),e(Bl,{})]})},Nl=()=>{const[o]=xa("(max-width: 768px)"),[t,a]=x.exports.useState(0),l=[{name:"\u0425\u043E\u0441\u0442\u044B",icon:at},{name:"\u0423\u0437\u043B\u044B",icon:ma},{name:"\u041A\u043E\u043D\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044F",icon:Io}];return e(w,{minH:"600px",children:o?r(w,{mb:4,children:[r(Sr,{children:[e(wr,{as:q,rightIcon:e(Fr,{as:Q0}),w:"full",children:l[t].name}),e(_r,{children:l.map((u,s)=>e(_e,{onClick:()=>a(s),icon:e(Fr,{as:u.icon}),children:u.name},u.name))})]}),r(w,{mt:4,children:[t===0&&e(Eo,{}),t===1&&e(Do,{}),t===2&&e(Ro,{})]})]}):r(b0,{orientation:"vertical",variant:"unstyled",h:"full",display:"flex",gap:6,index:t,onChange:a,children:[e(G0,{w:"200px",py:2,display:"flex",flexDirection:"column",gap:3,children:l.map(u=>r(Wr,{justifyContent:"flex-start",px:4,py:3,borderRadius:"30px",border:"1px solid rgba(255, 255, 255, 0.08)",bg:"rgba(255, 255, 255, 0.03)",backdropFilter:"blur(20px) saturate(180%)",color:"rgba(255, 255, 255, 0.7)",fontWeight:"600",transition:"all 0.3s ease",boxShadow:"inset 0 1px 2px rgba(255, 255, 255, 0.2), 0 2px 6px rgba(0, 0, 0, 0.1)",_selected:{bg:"rgba(102, 126, 234, 0.5)",borderColor:"rgba(102, 126, 234, 0.5)",color:"white",boxShadow:"0 4px 15px rgba(102, 126, 234, 0.3), inset 0 1px 2px rgba(255, 255, 255, 0.2)"},_light:{bg:"rgba(255, 255, 255, 0.8)",borderColor:"rgba(0, 0, 0, 0.1)",color:"rgba(0, 0, 0, 0.7)",boxShadow:"0 4px 15px rgba(0, 0, 0, 0.15), inset 0 1px 2px rgba(255, 255, 255, 1)",_selected:{bg:"rgba(102, 126, 234, 0.8)",borderColor:"rgba(102, 126, 234, 0.8)",color:"white",boxShadow:"0 4px 15px rgba(102, 126, 234, 0.4), inset 0 1px 2px rgba(255, 255, 255, 0.5)"}},children:[e(Fr,{as:u.icon,mr:3,w:5,h:5}),u.name]},u.name))}),r(p0,{flex:1,h:"full",overflowY:"auto",children:[e(ir,{p:0,children:e(Eo,{})}),e(ir,{p:0,children:e(Do,{})}),e(ir,{p:0,children:e(Ro,{})})]})]})})},ft=()=>{nr();const o=pe(),[t,a]=x.exports.useState([]),[l,u]=x.exports.useState(!0),[s,d]=x.exports.useState(null),{isOpen:b,onOpen:p,onClose:y}=yr(),[m,_]=x.exports.useState({name:"",description:"",price:0,durationDays:30,trafficLimit:100*1024*1024*1024,unlimitedTraffic:!1,maxConnections:3,speedLimit:0});x.exports.useEffect(()=>{c()},[]);const c=async()=>{try{const n=await j("/tariffs/");a(n)}catch(n){console.error("Failed to load tariffs:",n),o({title:"\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438",description:"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0441\u043F\u0438\u0441\u043E\u043A \u0442\u0430\u0440\u0438\u0444\u043E\u0432",status:"error",duration:3e3})}finally{u(!1)}},h=n=>{n?(d(n),_({name:n.name,description:n.description,price:n.price,durationDays:n.durationDays,trafficLimit:n.trafficLimit,unlimitedTraffic:n.unlimitedTraffic,maxConnections:n.maxConnections,speedLimit:n.speedLimit})):(d(null),_({name:"",description:"",price:0,durationDays:30,trafficLimit:100*1024*1024*1024,unlimitedTraffic:!1,maxConnections:3,speedLimit:0})),p()},R=async()=>{try{s?(await j(`/tariffs/${s.id}`,{method:"PUT",body:JSON.stringify(m)}),o({title:"\u0422\u0430\u0440\u0438\u0444 \u043E\u0431\u043D\u043E\u0432\u043B\u0451\u043D",status:"success",duration:2e3})):(await j("/tariffs/",{method:"POST",body:JSON.stringify(m)}),o({title:"\u0422\u0430\u0440\u0438\u0444 \u0441\u043E\u0437\u0434\u0430\u043D",status:"success",duration:2e3})),y(),c()}catch(n){console.error("Failed to save tariff:",n),o({title:"\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F",description:"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0441\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0442\u0430\u0440\u0438\u0444",status:"error",duration:3e3})}},D=async n=>{if(!!confirm("\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B, \u0447\u0442\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u044D\u0442\u043E\u0442 \u0442\u0430\u0440\u0438\u0444?"))try{await j(`/tariffs/${n}`,{method:"DELETE"}),o({title:"\u0422\u0430\u0440\u0438\u0444 \u0443\u0434\u0430\u043B\u0451\u043D",status:"success",duration:2e3}),c()}catch(f){console.error("Failed to delete tariff:",f),o({title:"\u041E\u0448\u0438\u0431\u043A\u0430 \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u044F",description:"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u0442\u0430\u0440\u0438\u0444",status:"error",duration:3e3})}},B=async n=>{try{await j(`/tariffs/${n}/toggle`,{method:"POST"}),o({title:"\u0421\u0442\u0430\u0442\u0443\u0441 \u0438\u0437\u043C\u0435\u043D\u0451\u043D",status:"success",duration:2e3}),c()}catch(f){console.error("Failed to toggle tariff:",f),o({title:"\u041E\u0448\u0438\u0431\u043A\u0430",description:"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0438\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u0441\u0442\u0430\u0442\u0443\u0441",status:"error",duration:3e3})}},C=(n,f=!1)=>{if(f)return"\u221E";if(n===0)return"0 B";const v=1024,L=["B","KB","MB","GB","TB"],N=Math.floor(Math.log(n)/Math.log(v));return Math.round(n/Math.pow(v,N)*100)/100+" "+L[N]};return l?e(w,{p:6,children:e(i,{children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430..."})}):r(w,{p:6,children:[r(I,{spacing:6,align:"stretch",children:[r(S,{justify:"space-between",children:[e(i,{fontSize:"2xl",fontWeight:"bold",color:"white",_light:{color:"gray.800"},children:"\u0423\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u0442\u0430\u0440\u0438\u0444\u0430\u043C\u0438"}),e(q,{leftIcon:e(w,{as:Lr,w:5,h:5,strokeWidth:2}),bg:"rgba(102, 126, 234, 0.8)",color:"white",borderRadius:"30px",border:"1px solid rgba(255, 255, 255, 0.2)",px:6,py:2.5,boxShadow:"0 4px 15px rgba(102, 126, 234, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.2)",_hover:{bg:"rgba(102, 126, 234, 0.9)",boxShadow:"0 6px 20px rgba(102, 126, 234, 0.5)"},_light:{bg:"rgba(102, 126, 234, 0.9)",boxShadow:"0 4px 15px rgba(102, 126, 234, 0.3)",_hover:{bg:"rgba(102, 126, 234, 1)"}},onClick:()=>h(),children:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0442\u0430\u0440\u0438\u0444"})]}),e(V0,{below:"md",children:e(w,{overflowX:"auto",borderRadius:"30px",bg:"rgba(255, 255, 255, 0.03)",backdropFilter:"blur(20px) saturate(180%)",border:"1px solid rgba(255, 255, 255, 0.08)",css:{"&::-webkit-scrollbar":{width:"4px",height:"4px"},"&::-webkit-scrollbar-track":{width:"6px",height:"6px"},"&::-webkit-scrollbar-thumb":{background:"rgba(255, 255, 255, 0.1)",borderRadius:"24px"}},_light:{bg:"white",border:"1px solid",borderColor:"gray.200",boxShadow:"sm"},children:e(w,{children:r(a0,{variant:"unstyled",children:[e(i0,{bg:"linear-gradient(135deg, rgba(102, 126, 234, 0.12) 0%, rgba(128, 90, 213, 0.12) 100%)",backdropFilter:"blur(10px)",_light:{bg:"linear-gradient(135deg, rgba(102, 126, 234, 0.08) 0%, rgba(128, 90, 213, 0.08) 100%)"},children:r(De,{children:[e(re,{color:"rgba(255, 255, 255, 0.7)",fontSize:"xs",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em",py:3,borderBottom:"1px solid rgba(255, 255, 255, 0.1)",_light:{color:"gray.600",borderBottom:"1px solid rgba(0, 0, 0, 0.1)"},pl:4,children:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435"}),e(re,{color:"rgba(255, 255, 255, 0.7)",fontSize:"xs",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em",py:3,borderBottom:"1px solid rgba(255, 255, 255, 0.1)",_light:{color:"gray.600",borderBottom:"1px solid rgba(0, 0, 0, 0.1)"},children:"\u0426\u0435\u043D\u0430"}),e(re,{color:"rgba(255, 255, 255, 0.7)",fontSize:"xs",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em",py:3,borderBottom:"1px solid rgba(255, 255, 255, 0.1)",_light:{color:"gray.600",borderBottom:"1px solid rgba(0, 0, 0, 0.1)"},children:"\u0421\u0440\u043E\u043A"}),e(re,{color:"rgba(255, 255, 255, 0.7)",fontSize:"xs",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em",py:3,borderBottom:"1px solid rgba(255, 255, 255, 0.1)",_light:{color:"gray.600",borderBottom:"1px solid rgba(0, 0, 0, 0.1)"},children:"\u0422\u0440\u0430\u0444\u0438\u043A"}),e(re,{color:"rgba(255, 255, 255, 0.7)",fontSize:"xs",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em",py:3,borderBottom:"1px solid rgba(255, 255, 255, 0.1)",_light:{color:"gray.600",borderBottom:"1px solid rgba(0, 0, 0, 0.1)"},children:"\u041F\u043E\u0434\u043A\u043B\u044E\u0447\u0435\u043D\u0438\u0439"}),e(re,{color:"rgba(255, 255, 255, 0.7)",fontSize:"xs",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em",py:3,borderBottom:"1px solid rgba(255, 255, 255, 0.1)",_light:{color:"gray.600",borderBottom:"1px solid rgba(0, 0, 0, 0.1)"},children:"\u0421\u043A\u043E\u0440\u043E\u0441\u0442\u044C"}),e(re,{color:"rgba(255, 255, 255, 0.7)",fontSize:"xs",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em",py:3,borderBottom:"1px solid rgba(255, 255, 255, 0.1)",_light:{color:"gray.600",borderBottom:"1px solid rgba(0, 0, 0, 0.1)"},children:"\u0421\u0442\u0430\u0442\u0443\u0441"}),e(re,{color:"rgba(255, 255, 255, 0.7)",fontSize:"xs",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em",py:3,borderBottom:"1px solid rgba(255, 255, 255, 0.1)",_light:{color:"gray.600",borderBottom:"1px solid rgba(0, 0, 0, 0.1)"},children:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044F"})]})}),e(l0,{children:t.length===0?e(De,{children:e(J,{colSpan:8,textAlign:"center",py:8,children:e(i,{color:"gray.500",children:"\u0422\u0430\u0440\u0438\u0444\u044B \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u044B"})})}):t.map(n=>r(De,{transition:"all 0.25s ease",_hover:{bg:"rgba(255, 255, 255, 0.08)",_light:{bg:"rgba(0, 0, 0, 0.03)"}},borderBottom:"1px solid rgba(255, 255, 255, 0.06)",_light:{borderBottom:"1px solid rgba(0, 0, 0, 0.06)"},children:[e(J,{borderBottom:0,pl:4,children:r(I,{align:"start",spacing:0,children:[e(i,{fontWeight:"semibold",color:"white",_light:{color:"gray.800"},children:n.name}),e(i,{fontSize:"xs",color:"gray.400",_light:{color:"gray.500"},children:n.description})]})}),e(J,{borderBottom:0,children:r(i,{fontWeight:"semibold",color:"white",_light:{color:"gray.800"},children:[n.price," \u20BD"]})}),r(J,{borderBottom:0,color:"white",_light:{color:"gray.800"},children:[n.durationDays," \u0434\u043D."]}),e(J,{borderBottom:0,color:"white",_light:{color:"gray.800"},children:C(n.trafficLimit,n.unlimitedTraffic)}),e(J,{borderBottom:0,color:"white",_light:{color:"gray.800"},children:n.maxConnections}),e(J,{borderBottom:0,color:"white",_light:{color:"gray.800"},children:n.speedLimit===0?"\u0411\u0435\u0437\u043B\u0438\u043C\u0438\u0442":`${n.speedLimit} \u041C\u0431\u0438\u0442/\u0441`}),e(J,{borderBottom:0,children:e(Se,{isChecked:n.enabled,onChange:()=>B(n.id),colorScheme:"green"})}),e(J,{borderBottom:0,children:r(S,{spacing:2,children:[e(P,{"aria-label":"Edit",icon:e(n0,{}),w:{base:"32px",md:"40px"},h:{base:"32px",md:"40px"},minW:"unset",p:0,bg:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)",color:"white",borderRadius:"full",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.1)",_hover:{bg:"rgba(255, 255, 255, 0.1)"},_light:{bg:"rgba(255, 255, 255, 0.8)",color:"gray.700",border:"1px solid rgba(0, 0, 0, 0.1)",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.08), inset 0 1px 0 rgba(255, 255, 255, 0.5)",_hover:{bg:"rgba(255, 255, 255, 0.95)"}},onClick:()=>h(n)}),e(P,{"aria-label":"Delete",icon:e(s0,{}),w:{base:"32px",md:"40px"},h:{base:"32px",md:"40px"},minW:"unset",p:0,bg:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)",color:"white",borderRadius:"full",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.1)",_hover:{bg:"rgba(255, 255, 255, 0.1)"},_light:{bg:"rgba(255, 255, 255, 0.8)",color:"gray.700",border:"1px solid rgba(0, 0, 0, 0.1)",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.08), inset 0 1px 0 rgba(255, 255, 255, 0.5)",_hover:{bg:"rgba(255, 255, 255, 0.95)"}},onClick:()=>D(n.id)})]})})]},n.id))})]})})})}),e(H0,{below:"md",children:e(I,{spacing:4,w:"full",children:t.length===0?e(w,{p:8,textAlign:"center",bg:"rgba(255, 255, 255, 0.03)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.08)",borderRadius:"20px",_light:{bg:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(0, 0, 0, 0.1)"},children:e(i,{color:"gray.500",children:"\u0422\u0430\u0440\u0438\u0444\u044B \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u044B"})}):t.map(n=>e(w,{bg:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(20px) saturate(180%)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"20px",p:4,w:"full",boxShadow:"0 4px 15px rgba(0, 0, 0, 0.2)",_light:{bg:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(0, 0, 0, 0.1)",boxShadow:"0 4px 15px rgba(0, 0, 0, 0.1)"},children:r(I,{align:"stretch",spacing:3,children:[r(S,{justify:"space-between",align:"start",children:[r(I,{align:"start",spacing:1,flex:1,children:[e(i,{fontWeight:"bold",fontSize:"lg",color:"white",_light:{color:"gray.800"},children:n.name}),e(i,{fontSize:"sm",color:"gray.400",_light:{color:"gray.600"},children:n.description})]}),e(Se,{isChecked:n.enabled,onChange:()=>B(n.id),colorScheme:"green"})]}),r(le,{columns:2,spacing:3,children:[r(w,{children:[e(i,{fontSize:"xs",color:"gray.500",mb:1,children:"\u0426\u0435\u043D\u0430"}),r(i,{fontWeight:"semibold",color:"white",_light:{color:"gray.800"},children:[n.price," \u20BD"]})]}),r(w,{children:[e(i,{fontSize:"xs",color:"gray.500",mb:1,children:"\u0421\u0440\u043E\u043A"}),r(i,{fontWeight:"semibold",color:"white",_light:{color:"gray.800"},children:[n.durationDays," \u0434\u043D."]})]}),r(w,{children:[e(i,{fontSize:"xs",color:"gray.500",mb:1,children:"\u0422\u0440\u0430\u0444\u0438\u043A"}),e(i,{fontWeight:"semibold",color:"white",_light:{color:"gray.800"},children:C(n.trafficLimit,n.unlimitedTraffic)})]}),r(w,{children:[e(i,{fontSize:"xs",color:"gray.500",mb:1,children:"\u041F\u043E\u0434\u043A\u043B\u044E\u0447\u0435\u043D\u0438\u0439"}),e(i,{fontWeight:"semibold",color:"white",_light:{color:"gray.800"},children:n.maxConnections})]}),r(w,{children:[e(i,{fontSize:"xs",color:"gray.500",mb:1,children:"\u0421\u043A\u043E\u0440\u043E\u0441\u0442\u044C"}),e(i,{fontWeight:"semibold",color:"white",_light:{color:"gray.800"},children:n.speedLimit===0?"\u0411\u0435\u0437\u043B\u0438\u043C\u0438\u0442":`${n.speedLimit} \u041C\u0431\u0438\u0442/\u0441`})]})]}),r(S,{spacing:2,justify:"flex-end",pt:2,children:[e(P,{"aria-label":"Edit",icon:e(n0,{}),size:"md",bg:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)",color:"white",borderRadius:"full",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.1)",_hover:{bg:"rgba(255, 255, 255, 0.1)"},_light:{bg:"rgba(255, 255, 255, 0.8)",color:"gray.700",border:"1px solid rgba(0, 0, 0, 0.1)",_hover:{bg:"rgba(255, 255, 255, 0.95)"}},onClick:()=>h(n)}),e(P,{"aria-label":"Delete",icon:e(s0,{}),size:"md",bg:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)",color:"white",borderRadius:"full",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.1)",_hover:{bg:"rgba(255, 255, 255, 0.1)"},_light:{bg:"rgba(255, 255, 255, 0.8)",color:"gray.700",border:"1px solid rgba(0, 0, 0, 0.1)",_hover:{bg:"rgba(255, 255, 255, 0.95)"}},onClick:()=>D(n.id)})]})]})},n.id))})})]}),r(he,{isOpen:b,onClose:y,size:"xl",children:[e(de,{backdropFilter:"blur(10px)",bg:"rgba(0, 0, 0, 0.4)"}),r(xe,{bg:"rgba(30, 41, 59, 0.95)",backdropFilter:"blur(40px) saturate(180%)",border:"1px solid rgba(255, 255, 255, 0.08)",borderRadius:"30px",boxShadow:"0 8px 32px 0 rgba(31, 38, 135, 0.37)",_light:{bg:"rgba(255, 255, 255, 0.95)",border:"1px solid rgba(0, 0, 0, 0.08)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.15)"},children:[e(ce,{color:"white",_light:{color:"gray.800"},children:s?"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0442\u0430\u0440\u0438\u0444":"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0442\u0430\u0440\u0438\u0444"}),e(ge,{color:"white",_light:{color:"gray.800"}}),e(be,{children:r(I,{spacing:4,children:[r(z,{isRequired:!0,children:[e(F,{children:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435"}),e(Y,{value:m.name,onChange:n=>_({...m,name:n.target.value}),placeholder:"\u041D\u0430\u043F\u0440\u0438\u043C\u0435\u0440: Premium",bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"xl",_focus:{borderColor:"blue.400",boxShadow:"0 0 0 1px blue.400"},_dark:{bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)"},_light:{bg:"white",border:"1px solid",borderColor:"gray.200"}})]}),r(z,{children:[e(F,{children:"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435"}),e(tt,{value:m.description,onChange:n=>_({...m,description:n.target.value}),placeholder:"\u041A\u0440\u0430\u0442\u043A\u043E\u0435 \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u0442\u0430\u0440\u0438\u0444\u0430",rows:3,bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"xl",_focus:{borderColor:"blue.400",boxShadow:"0 0 0 1px blue.400"},_dark:{bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)"},_light:{bg:"white",border:"1px solid",borderColor:"gray.200"}})]}),r(le,{columns:2,spacing:4,w:"full",children:[r(z,{isRequired:!0,children:[e(F,{children:"\u0426\u0435\u043D\u0430 (\u20BD)"}),e(zr,{value:m.price,onChange:(n,f)=>_({...m,price:f}),min:0,children:e(Rr,{bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"xl",_focus:{borderColor:"blue.400",boxShadow:"0 0 0 1px blue.400"},_dark:{bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)"},_light:{bg:"white",border:"1px solid",borderColor:"gray.200"}})})]}),r(z,{isRequired:!0,children:[e(F,{children:"\u0421\u0440\u043E\u043A (\u0434\u043D\u0435\u0439)"}),e(zr,{value:m.durationDays,onChange:(n,f)=>_({...m,durationDays:f}),min:1,children:e(Rr,{bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"xl",_focus:{borderColor:"blue.400",boxShadow:"0 0 0 1px blue.400"},_dark:{bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)"},_light:{bg:"white",border:"1px solid",borderColor:"gray.200"}})})]}),r(z,{isRequired:!0,children:[e(F,{children:"\u0422\u0440\u0430\u0444\u0438\u043A (\u0413\u0411)"}),e(zr,{value:m.trafficLimit/(1024*1024*1024),onChange:(n,f)=>_({...m,trafficLimit:f*1024*1024*1024}),min:1,isDisabled:m.unlimitedTraffic,children:e(Rr,{bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"xl",_focus:{borderColor:"blue.400",boxShadow:"0 0 0 1px blue.400"},_dark:{bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)"},_light:{bg:"white",border:"1px solid",borderColor:"gray.200"}})})]}),r(z,{display:"flex",alignItems:"center",children:[e(F,{mb:"0",children:"\u0411\u0435\u0441\u043A\u043E\u043D\u0435\u0447\u043D\u044B\u0439 \u0442\u0440\u0430\u0444\u0438\u043A"}),e(Se,{isChecked:m.unlimitedTraffic,onChange:n=>_({...m,unlimitedTraffic:n.target.checked}),colorScheme:"purple"})]}),r(z,{isRequired:!0,children:[e(F,{children:"\u041C\u0430\u043A\u0441. \u043F\u043E\u0434\u043A\u043B\u044E\u0447\u0435\u043D\u0438\u0439"}),e(zr,{value:m.maxConnections,onChange:(n,f)=>_({...m,maxConnections:f}),min:1,children:e(Rr,{bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"xl",_focus:{borderColor:"blue.400",boxShadow:"0 0 0 1px blue.400"},_dark:{bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)"},_light:{bg:"white",border:"1px solid",borderColor:"gray.200"}})})]}),r(z,{children:[e(F,{children:"\u0421\u043A\u043E\u0440\u043E\u0441\u0442\u044C (\u041C\u0431\u0438\u0442/\u0441, 0 = \u0431\u0435\u0437\u043B\u0438\u043C\u0438\u0442)"}),e(zr,{value:m.speedLimit,onChange:(n,f)=>_({...m,speedLimit:f}),min:0,children:e(Rr,{bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"xl",_focus:{borderColor:"blue.400",boxShadow:"0 0 0 1px blue.400"},_dark:{bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)"},_light:{bg:"white",border:"1px solid",borderColor:"gray.200"}})})]})]})]})}),r(ve,{children:[e(q,{variant:"ghost",mr:3,onClick:y,color:"white",_hover:{bg:"rgba(255, 255, 255, 0.1)"},_light:{color:"gray.700",_hover:{bg:"rgba(0, 0, 0, 0.05)"}},children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),e(q,{bg:"rgba(102, 126, 234, 0.8)",color:"white",borderRadius:"20px",border:"1px solid rgba(255, 255, 255, 0.2)",px:6,boxShadow:"0 4px 15px rgba(102, 126, 234, 0.4)",_hover:{bg:"rgba(102, 126, 234, 0.9)",boxShadow:"0 6px 20px rgba(102, 126, 234, 0.5)"},_light:{bg:"rgba(102, 126, 234, 0.9)",boxShadow:"0 4px 15px rgba(102, 126, 234, 0.3)",_hover:{bg:"rgba(102, 126, 234, 1)"}},onClick:R,children:s?"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C":"\u0421\u043E\u0437\u0434\u0430\u0442\u044C"})]})]})]})]})},Pl=()=>{const[o,t]=x.exports.useState(0);$(),x.exports.useEffect(()=>{$.getState().refetchUsers(),ja()},[]);const a=Ne("gray.50","gray.900");return r(w,{minH:"100vh",bg:a,children:[r(I,{spacing:0,p:"6",children:[e(w,{w:"full",maxW:"1400px",mx:"auto",mb:4,children:e(ni,{activeTab:o,onTabChange:t})}),r(w,{w:"full",maxW:"1400px",mx:"auto",children:[o===0&&r(I,{spacing:6,align:"stretch",children:[e(Na,{}),e(ai,{}),e(gl,{})]}),o===1&&e(Sl,{}),o===2&&e(wl,{}),o===3&&e(Nl,{}),o===4&&e(ft,{})]}),e(Yi,{}),e(Ja,{}),e(Ri,{}),e(hi,{}),e(Bi,{}),e(Wi,{}),e(_i,{}),e(ki,{}),e(Ai,{}),e(Xa,{})]}),e(w,{mt:8,children:e(ut,{})})]})},$l=k.object({username:k.string().min(1,"login.fieldRequired"),password:k.string().min(1,"login.fieldRequired")}),Ol=A(fa,{baseStyle:{w:5,h:5,strokeWidth:"2px"}}),k0=()=>{var _,c;const[o,t]=x.exports.useState(""),[a,l]=x.exports.useState(!1),u=Sa(),{t:s}=V();let d=wa();const{register:b,formState:{errors:p},handleSubmit:y}=qe({resolver:kr($l)});x.exports.useEffect(()=>{Ta(),d.pathname!=="/login"&&u("/login",{replace:!0})},[]);const m=h=>{t("");const R=new FormData;R.append("username",h.username),R.append("password",h.password),R.append("grant_type","password"),l(!0),j("/admin/token",{method:"post",body:R}).then(({access_token:D})=>{Ba(D),u("/")}).catch(D=>{t(D.response._data.detail)}).finally(l.bind(null,!1))};return r(I,{justifyContent:"center",alignItems:"center",minH:"100vh",p:"6",w:"full",bg:"gray.50",_dark:{bg:"gray.900"},children:[e(w,{position:"absolute",top:4,right:4,children:e(U0,{})}),e(w,{w:"full",maxW:"400px",bg:"rgba(255, 255, 255, 0.9)",_dark:{bg:"rgba(30, 30, 40, 0.9)"},backdropFilter:"blur(20px)",borderRadius:"30px",border:"1px solid",borderColor:"rgba(0, 0, 0, 0.1)",_darkBorder:{borderColor:"rgba(255, 255, 255, 0.1)"},p:8,boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)",children:r(I,{spacing:6,w:"full",children:[r(I,{spacing:2,children:[e(i,{fontSize:"2xl",fontWeight:"bold",children:s("login.loginYourAccount")}),e(i,{color:"gray.500",fontSize:"sm",children:s("login.welcomeBack")})]}),e("form",{onSubmit:y(m),style:{width:"100%"},children:r(I,{spacing:4,w:"full",children:[r(z,{children:[e(Y,{size:"md",placeholder:s("username"),...b("username"),borderRadius:"20px",bg:"rgba(255, 255, 255, 0.5)",border:"1px solid rgba(0, 0, 0, 0.1)",_dark:{bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)"},_focus:{borderColor:"blue.400",boxShadow:"0 0 0 1px blue.400"},_placeholder:{color:"gray.400"}}),((_=p==null?void 0:p.username)==null?void 0:_.message)&&e(i,{color:"red.400",fontSize:"xs",mt:1,pl:3,children:s(p.username.message)})]}),r(z,{children:[e(Y,{size:"md",type:"password",placeholder:s("password"),...b("password"),borderRadius:"20px",bg:"rgba(255, 255, 255, 0.5)",border:"1px solid rgba(0, 0, 0, 0.1)",_dark:{bg:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)"},_focus:{borderColor:"blue.400",boxShadow:"0 0 0 1px blue.400"},_placeholder:{color:"gray.400"}}),((c=p==null?void 0:p.password)==null?void 0:c.message)&&e(i,{color:"red.400",fontSize:"xs",mt:1,pl:3,children:s(p.password.message)})]}),o&&r(Zr,{status:"error",borderRadius:"15px",bg:"red.50",_dark:{bg:"rgba(254, 178, 178, 0.1)"},children:[e(t0,{}),e(Go,{fontSize:"sm",children:o})]}),r(q,{isLoading:a,type:"submit",w:"full",h:"45px",borderRadius:"20px",bg:"blue.500",color:"white",_hover:{bg:"blue.600"},_active:{bg:"blue.700"},fontWeight:"medium",mt:2,children:[e(Ol,{marginRight:2}),s("login")]})]})})]})}),e(w,{position:"absolute",bottom:4,children:e(ut,{})})]})},E0=({title:o,value:t,subtitle:a,icon:l})=>e(ze,{variant:"default",elevated:!0,p:6,transition:"all 0.3s ease",cursor:"default",children:r(I,{align:"start",spacing:3,children:[l&&e(i,{fontSize:"2xl",mb:-2,children:l}),e(i,{fontSize:"sm",color:"rgba(255, 255, 255, 0.5)",_light:{color:"rgba(0, 0, 0, 0.5)"},fontWeight:"medium",textTransform:"uppercase",letterSpacing:"wider",children:o}),e(i,{fontSize:"3xl",fontWeight:"bold",color:"white",_light:{color:"gray.900"},children:t}),a&&e(i,{fontSize:"xs",color:"rgba(255, 255, 255, 0.6)",_light:{color:"rgba(0, 0, 0, 0.6)"},children:a})]})}),jl=()=>{const[o,t]=x.exports.useState(null),[a,l]=x.exports.useState(!0);x.exports.useEffect(()=>{u()},[]);const u=async()=>{try{const p=await j("/user-cabinet/info");t(p)}catch(p){console.error("Failed to load user cabinet data:",p)}finally{l(!1)}},s=p=>{if(p===0)return"0 B";const y=1024,m=["B","KB","MB","GB","TB"],_=Math.floor(Math.log(p)/Math.log(y));return Math.round(p/Math.pow(y,_)*100)/100+" "+m[_]};if(a||!o)return e(w,{p:6,children:e(ze,{variant:"default",borderRadius:"20px",p:8,textAlign:"center",children:e(i,{color:"white",children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430..."})})});const d=o.trafficUsed/o.tariff.trafficLimit*100,b=Math.ceil((new Date(o.subscriptionExpiry).getTime()-Date.now())/(1e3*60*60*24));return r(w,{p:6,minH:"100vh",children:[r(I,{spacing:6,align:"stretch",maxW:"1200px",mx:"auto",children:[e(ze,{variant:"default",elevated:!0,borderRadius:"30px",p:6,overflow:"hidden",position:"relative",children:r(S,{justify:"space-between",align:"start",children:[r(I,{align:"start",spacing:1,children:[e(i,{fontSize:"3xl",fontWeight:"bold",color:"white",_light:{color:"gray.900"},children:"\u041B\u0438\u0447\u043D\u044B\u0439 \u043A\u0430\u0431\u0438\u043D\u0435\u0442"}),e(i,{fontSize:"md",color:"rgba(255, 255, 255, 0.7)",_light:{color:"rgba(0, 0, 0, 0.7)"},children:o.username})]}),e(T,{px:4,py:2,borderRadius:"full",fontSize:"sm",fontWeight:"bold",bg:o.isActive?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)",color:o.isActive?"#10b981":"#ef4444",border:"1px solid",borderColor:o.isActive?"rgba(16, 185, 129, 0.3)":"rgba(239, 68, 68, 0.3)",children:o.isActive?"\u2713 \u0410\u043A\u0442\u0438\u0432\u0435\u043D":"\u2717 \u041D\u0435\u0430\u043A\u0442\u0438\u0432\u0435\u043D"})]})}),e(ze,{variant:"accent",elevated:!0,borderRadius:"30px",p:8,position:"relative",overflow:"hidden",border:"2px solid",borderColor:"rgba(102, 126, 234, 0.3)",_before:{content:'""',position:"absolute",top:-2,left:-2,right:-2,bottom:-2,background:"rgba(102, 126, 234, 0.1)",opacity:1,borderRadius:"30px",zIndex:-1},children:r(I,{align:"stretch",spacing:5,children:[r(S,{justify:"space-between",align:"start",children:[r(I,{align:"start",spacing:2,children:[r(S,{children:[e(i,{fontSize:"2xl",children:"\u{1F48E}"}),e(i,{fontSize:"2xl",fontWeight:"bold",color:"white",_light:{color:"gray.900"},children:o.tariff.name})]}),e(i,{fontSize:"md",color:"rgba(255, 255, 255, 0.7)",_light:{color:"rgba(0, 0, 0, 0.7)"},children:o.tariff.description})]}),r(I,{align:"end",spacing:0,children:[r(i,{fontSize:"4xl",fontWeight:"bold",color:"white",_light:{color:"gray.900"},children:[o.tariff.price," \u20BD"]}),r(i,{fontSize:"sm",color:"rgba(255, 255, 255, 0.5)",_light:{color:"rgba(0, 0, 0, 0.5)"},children:["\u0437\u0430 ",o.tariff.durationDays," \u0434\u043D\u0435\u0439"]})]})]}),r(le,{columns:{base:1,md:3},spacing:4,mt:4,children:[r(w,{bg:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",borderRadius:"30px",p:4,border:"1px solid rgba(255, 255, 255, 0.1)",transition:"all 0.3s ease",_light:{bg:"rgba(0, 0, 0, 0.03)",border:"1px solid rgba(0, 0, 0, 0.1)"},_hover:{bg:"rgba(255, 255, 255, 0.08)",_light:{bg:"rgba(0, 0, 0, 0.05)"}},children:[e(i,{fontSize:"xs",color:"rgba(255, 255, 255, 0.5)",_light:{color:"rgba(0, 0, 0, 0.5)"},mb:2,children:"\u{1F4CA} \u0422\u0440\u0430\u0444\u0438\u043A"}),e(i,{fontSize:"lg",fontWeight:"semibold",color:"white",_light:{color:"gray.900"},children:s(o.tariff.trafficLimit)})]}),r(w,{bg:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",borderRadius:"30px",p:4,border:"1px solid rgba(255, 255, 255, 0.1)",transition:"all 0.3s ease",_light:{bg:"rgba(0, 0, 0, 0.03)",border:"1px solid rgba(0, 0, 0, 0.1)"},_hover:{bg:"rgba(255, 255, 255, 0.08)",_light:{bg:"rgba(0, 0, 0, 0.05)"}},children:[e(i,{fontSize:"xs",color:"rgba(255, 255, 255, 0.5)",_light:{color:"rgba(0, 0, 0, 0.5)"},mb:2,children:"\u{1F4F1} \u041F\u043E\u0434\u043A\u043B\u044E\u0447\u0435\u043D\u0438\u044F"}),r(i,{fontSize:"lg",fontWeight:"semibold",color:"white",_light:{color:"gray.900"},children:["\u0414\u043E ",o.tariff.maxConnections," \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432"]})]}),r(w,{bg:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",borderRadius:"30px",p:4,border:"1px solid rgba(255, 255, 255, 0.1)",transition:"all 0.3s ease",_light:{bg:"rgba(0, 0, 0, 0.03)",border:"1px solid rgba(0, 0, 0, 0.1)"},_hover:{bg:"rgba(255, 255, 255, 0.08)",_light:{bg:"rgba(0, 0, 0, 0.05)"}},children:[e(i,{fontSize:"xs",color:"rgba(255, 255, 255, 0.5)",_light:{color:"rgba(0, 0, 0, 0.5)"},mb:2,children:"\u26A1 \u0421\u043A\u043E\u0440\u043E\u0441\u0442\u044C"}),e(i,{fontSize:"lg",fontWeight:"semibold",color:"white",_light:{color:"gray.900"},children:o.tariff.speedLimit===0?"\u0411\u0435\u0437\u043B\u0438\u043C\u0438\u0442":`${o.tariff.speedLimit} \u041C\u0431\u0438\u0442/\u0441`})]})]})]})}),r(le,{columns:{base:1,md:3},spacing:6,children:[e(E0,{icon:"\u{1F4C8}",title:"\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u043E \u0442\u0440\u0430\u0444\u0438\u043A\u0430",value:s(o.trafficUsed),subtitle:`\u0438\u0437 ${s(o.tariff.trafficLimit)}`}),e(E0,{icon:"\u{1F4C5}",title:"\u041F\u043E\u0434\u043F\u0438\u0441\u043A\u0430 \u0434\u0435\u0439\u0441\u0442\u0432\u0443\u0435\u0442",value:new Date(o.subscriptionExpiry).toLocaleDateString("ru-RU"),subtitle:`\u041E\u0441\u0442\u0430\u043B\u043E\u0441\u044C ${b} ${b===1?"\u0434\u0435\u043D\u044C":b<5?"\u0434\u043D\u044F":"\u0434\u043D\u0435\u0439"}`}),e(E0,{icon:"\u{1F5D3}\uFE0F",title:"\u0410\u043A\u043A\u0430\u0443\u043D\u0442 \u0441\u043E\u0437\u0434\u0430\u043D",value:new Date(o.createdAt).toLocaleDateString("ru-RU"),subtitle:`${Math.ceil((Date.now()-new Date(o.createdAt).getTime())/(1e3*60*60*24))} \u0434\u043D\u0435\u0439 \u043D\u0430\u0437\u0430\u0434`})]}),e(ze,{variant:"default",elevated:!0,borderRadius:"30px",p:6,children:r(I,{align:"stretch",spacing:4,children:[r(S,{justify:"space-between",children:[r(S,{children:[e(i,{fontSize:"xl",children:"\u{1F4CA}"}),e(i,{fontSize:"lg",fontWeight:"semibold",color:"white",_light:{color:"gray.900"},children:"\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u0438\u0435 \u0442\u0440\u0430\u0444\u0438\u043A\u0430"})]}),r(i,{fontSize:"2xl",fontWeight:"bold",color:d>90?"#ef4444":d>70?"#f59e0b":"#10b981",children:[d.toFixed(1),"%"]})]}),e(w,{position:"relative",children:e(w,{height:"24px",borderRadius:"full",bg:"rgba(255, 255, 255, 0.05)",overflow:"hidden",border:"1px solid rgba(255, 255, 255, 0.1)",children:e(w,{height:"100%",width:`${Math.min(d,100)}%`,bg:d>90?"#ef4444":d>70?"#f59e0b":"#10b981",transition:"width 0.5s ease",position:"relative"})})}),r(S,{justify:"space-between",px:2,children:[r(i,{fontSize:"sm",color:"rgba(255, 255, 255, 0.7)",_light:{color:"rgba(0, 0, 0, 0.7)"},children:[s(o.trafficUsed)," \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u043E"]}),r(i,{fontSize:"sm",color:"rgba(255, 255, 255, 0.7)",_light:{color:"rgba(0, 0, 0, 0.7)"},children:[s(o.tariff.trafficLimit-o.trafficUsed)," \u043E\u0441\u0442\u0430\u043B\u043E\u0441\u044C"]})]})]})})]}),e("style",{children:`
        @keyframes shimmer {
          0% { transform: translateX(-100%); }
          100% { transform: translateX(100%); }
        }
      `})]})},D0=({title:o,value:t,color:a="blue",subtitle:l})=>e(w,{bg:"white",borderRadius:"12px",p:4,boxShadow:"sm",border:"1px solid",borderColor:"gray.200",children:r(I,{align:"start",spacing:2,children:[e(i,{fontSize:"sm",color:"gray.500",fontWeight:"medium",children:o}),e(i,{fontSize:"2xl",fontWeight:"bold",color:`${a}.500`,children:t}),l&&e(i,{fontSize:"xs",color:"gray.500",children:l})]})}),Hl=()=>{const o=pe(),[t,a]=x.exports.useState(!0),[l,u]=x.exports.useState(null),[s,d]=x.exports.useState([]),[b,p]=x.exports.useState(null);x.exports.useEffect(()=>{var B;const D=(B=window.Telegram)==null?void 0:B.WebApp;D&&(D.ready(),D.expand(),D.themeParams.bg_color&&(document.body.style.backgroundColor=D.themeParams.bg_color)),y()},[]);const y=async()=>{var B;const D=(B=window.Telegram)==null?void 0:B.WebApp;if(!D||!D.initDataUnsafe.user){o({title:"\u041E\u0448\u0438\u0431\u043A\u0430",description:"\u041E\u0442\u043A\u0440\u043E\u0439\u0442\u0435 \u043F\u0440\u0438\u043B\u043E\u0436\u0435\u043D\u0438\u0435 \u0447\u0435\u0440\u0435\u0437 Telegram",status:"error",duration:5e3}),a(!1);return}try{const C={id:D.initDataUnsafe.user.id,first_name:D.initDataUnsafe.user.first_name,last_name:D.initDataUnsafe.user.last_name,username:D.initDataUnsafe.user.username,photo_url:D.initDataUnsafe.user.photo_url,auth_date:D.initDataUnsafe.auth_date,hash:D.initDataUnsafe.hash},n=await j("/telegram/auth",{method:"POST",body:JSON.stringify(C)});u(n),n.is_linked&&m()}catch(C){console.error("Authentication failed:",C),o({title:"\u041E\u0448\u0438\u0431\u043A\u0430 \u0430\u0432\u0442\u043E\u0440\u0438\u0437\u0430\u0446\u0438\u0438",description:"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0432\u043E\u0439\u0442\u0438 \u0432 \u0441\u0438\u0441\u0442\u0435\u043C\u0443",status:"error",duration:5e3})}finally{a(!1)}},m=async()=>{try{const D=await j("/tariffs/?enabled_only=true");d(D)}catch(D){console.error("Failed to load tariffs:",D)}},_=D=>{var C;p(D);const B=(C=window.Telegram)==null?void 0:C.WebApp;B!=null&&B.MainButton&&(B.MainButton.setText(`\u041A\u0443\u043F\u0438\u0442\u044C \u0437\u0430 ${D.price} \u20BD`),B.MainButton.show(),B.MainButton.onClick(()=>{o({title:"\u041E\u043F\u043B\u0430\u0442\u0430",description:"\u0424\u0443\u043D\u043A\u0446\u0438\u044F \u043E\u043F\u043B\u0430\u0442\u044B \u0431\u0443\u0434\u0435\u0442 \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0430",status:"info",duration:3e3})}))},c=(D,B=!1)=>{if(B)return"\u221E \u0411\u0435\u0441\u043A\u043E\u043D\u0435\u0447\u043D\u044B\u0439";if(D===0)return"0 B";const C=1024,n=["B","KB","MB","GB","TB"],f=Math.floor(Math.log(D)/Math.log(C));return Math.round(D/Math.pow(C,f)*100)/100+" "+n[f]};if(t)return e(w,{p:6,textAlign:"center",children:e(i,{children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430..."})});if(!l)return e(w,{p:6,textAlign:"center",children:e(i,{color:"red.500",children:"\u041E\u0448\u0438\u0431\u043A\u0430 \u0430\u0432\u0442\u043E\u0440\u0438\u0437\u0430\u0446\u0438\u0438"})});if(!l.is_linked)return e(w,{p:6,children:r(I,{spacing:4,children:[e(i,{fontSize:"xl",fontWeight:"bold",children:"\u0410\u043A\u043A\u0430\u0443\u043D\u0442 \u043D\u0435 \u0430\u043A\u0442\u0438\u0432\u0438\u0440\u043E\u0432\u0430\u043D"}),r(i,{color:"gray.600",textAlign:"center",children:["\u0412\u0430\u0448 Telegram ID: ",e(i,{as:"span",fontWeight:"bold",children:l.telegram_id})]}),e(i,{color:"gray.600",textAlign:"center",children:"\u041E\u0442\u043F\u0440\u0430\u0432\u044C\u0442\u0435 \u044D\u0442\u043E\u0442 ID \u0430\u0434\u043C\u0438\u043D\u0438\u0441\u0442\u0440\u0430\u0442\u043E\u0440\u0443 \u0434\u043B\u044F \u0430\u043A\u0442\u0438\u0432\u0430\u0446\u0438\u0438 \u0434\u043E\u0441\u0442\u0443\u043F\u0430"})]})});const h=l.data_limit?(l.used_traffic||0)/l.data_limit*100:0,R=l.expire?new Date(l.expire*1e3).toLocaleDateString("ru-RU"):"\u041D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D\u0430";return e(w,{p:4,minH:"100vh",children:r(I,{spacing:4,align:"stretch",children:[r(S,{justify:"space-between",children:[e(i,{fontSize:"xl",fontWeight:"bold",children:"\u041B\u0438\u0447\u043D\u044B\u0439 \u043A\u0430\u0431\u0438\u043D\u0435\u0442"}),e(T,{colorScheme:l.status==="active"?"green":"red",fontSize:"md",p:2,borderRadius:"md",children:l.status==="active"?"\u0410\u043A\u0442\u0438\u0432\u0435\u043D":"\u041D\u0435\u0430\u043A\u0442\u0438\u0432\u0435\u043D"})]}),r(le,{columns:2,spacing:3,children:[e(D0,{title:"\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u043E",value:c(l.used_traffic||0),color:"blue"}),e(D0,{title:"\u041B\u0438\u043C\u0438\u0442",value:c(l.data_limit||0),color:"green"})]}),e(w,{bg:"white",borderRadius:"12px",p:4,boxShadow:"sm",children:r(I,{align:"stretch",spacing:2,children:[r(S,{justify:"space-between",children:[e(i,{fontSize:"sm",fontWeight:"medium",children:"\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u0438\u0435 \u0442\u0440\u0430\u0444\u0438\u043A\u0430"}),r(i,{fontSize:"sm",color:"gray.500",children:[h.toFixed(1),"%"]})]}),e(I0,{value:h,colorScheme:h>90?"red":h>70?"orange":"green",borderRadius:"full",size:"lg"})]})}),e(D0,{title:"\u0421\u0440\u043E\u043A \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044F",value:R,color:"purple"}),s.length>0&&r(ke,{children:[e(i,{fontSize:"lg",fontWeight:"bold",mt:4,children:"\u0414\u043E\u0441\u0442\u0443\u043F\u043D\u044B\u0435 \u0442\u0430\u0440\u0438\u0444\u044B"}),e(I,{spacing:3,children:s.map(D=>e(w,{bg:"white",borderRadius:"12px",p:4,boxShadow:"sm",border:"2px solid",borderColor:"blue.200",w:"full",children:r(I,{align:"stretch",spacing:3,children:[r(S,{justify:"space-between",children:[e(i,{fontSize:"lg",fontWeight:"bold",children:D.name}),r(i,{fontSize:"xl",fontWeight:"bold",color:"blue.500",children:[D.price," \u20BD"]})]}),e(i,{fontSize:"sm",color:"gray.600",children:D.description}),r(le,{columns:2,spacing:2,children:[r(i,{fontSize:"xs",color:"gray.500",children:["\u{1F4CA} ",c(D.trafficLimit,D.unlimitedTraffic)]}),r(i,{fontSize:"xs",color:"gray.500",children:["\u{1F4C5} ",D.durationDays," \u0434\u043D\u0435\u0439"]}),r(i,{fontSize:"xs",color:"gray.500",children:["\u{1F4F1} ",D.maxConnections," \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432"]}),r(i,{fontSize:"xs",color:"gray.500",children:["\u26A1 ",D.speedLimit===0?"\u0411\u0435\u0437\u043B\u0438\u043C\u0438\u0442":`${D.speedLimit} \u041C\u0431\u0438\u0442/\u0441`]})]}),e(q,{colorScheme:"blue",onClick:()=>_(D),w:"full",children:"\u041A\u0443\u043F\u0438\u0442\u044C"})]})},D.id))})]})]})})},Fo=()=>j("/admin",{headers:{Authorization:`Bearer ${Xr()}`}}),Vl=_a([{path:"/",element:e(Pl,{}),errorElement:e(k0,{}),loader:Fo},{path:"/login/",element:e(k0,{})},{path:"/cabinet/",element:e(jl,{})},{path:"/tariffs/",element:e(ft,{}),errorElement:e(k0,{}),loader:Fo},{path:"/miniapp/",element:e(Hl,{})}]);function Yl(){return e("main",{className:"p-8",children:e(ya,{router:Vl})})}K.extend(Ca);K.extend(va);K.extend(ka);K.extend(Ea);K.extend(Da);T0(za.get()||"light");Ra.createRoot(document.getElementById("root")).render(e(R0.StrictMode,{children:e(Fa,{theme:Ia,children:e(Aa,{client:B0,children:e(Yl,{})})})}));
